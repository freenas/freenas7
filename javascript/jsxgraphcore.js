/*
    Copyright 2008,2009
        Matthias Ehmann,
        Michael Gerhaeuser,
        Carsten Miller,
        Bianca Valentin,
        Alfred Wassermann,
        Peter Wilfahrt

    This file is part of JSXGraph.

    JSXGraph is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    JSXGraph is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with JSXGraph.  If not, see <http://www.gnu.org/licenses/>.
*/
    var JXG={};JXG.countDrawings=0;JXG.countTime=0;JXG.require=function(a){};JXG.rendererFiles=[];JXG.rendererFiles.svg="SVGRenderer";JXG.rendererFiles.vml="VMLRenderer";JXG.baseFiles=null;JXG.Math=new Object();JXG.Math.eps=0.000001;JXG.Math.Vector=function(b){this.length=0;if((typeof b!=undefined)&&(b!=null)){for(var a=0;a<b.length;a++){this.push(b[a])}}};JXG.Math.Vector.prototype=new Array();JXG.Math.Vector.prototype.n=function(){return this.length};JXG.Math.Vector.prototype.exchange=function(c,b){var a=this[c];this[c]=this[b];this[b]=a};JXG.Math.Matrix=function(e){this.length=0;var c=0;var d=false;if((typeof e!=undefined)&&(e!=null)){for(var b=0;b<e.length;b++){this.push(new Array());if(d){if(c!=e[b].length){this.length=0;throw new JXG.DimensionMismatchException("Your array contains arrays with different lengths.")}}for(var a=0;a<e[b].length;a++){this[b].push(e[b][a])}c=e[b].length;d=true}}};JXG.Math.Matrix.prototype=new Array();JXG.Math.Matrix.prototype.m=function(){return this.length};JXG.Math.Matrix.prototype.n=function(){if(this.length>0){return this[0].length}else{return 0}};JXG.Math.Matrix.prototype.exchangeRows=function(c,b){var a=this[c];this[c]=this[b];this[b]=a};JXG.DimensionMismatchException=function(a){if((typeof a!=undefined)&&(a!=null)){this.message=a}else{this.message=null}};JXG.DimensionMismatchException.prototype.what=function(){var a="Matrix has incorrect dimensions";if(this.message!=null){return a+": "+this.message+"."}else{return a+"."}};JXG.SingularMatrixException=function(a){if((typeof a!=undefined)&&(a!=null)){this.message=a}else{this.message=null}};JXG.SingularMatrixException.prototype.what=function(){var a="Matrix is singular";if(this.message!=null){return a+": "+this.message+"."}else{return a+"."}};JXG.memoizer=function(b){if(b.memo){return b.memo}var a={},c=Array.prototype.join;return(b.memo=function(){var d=c.call(arguments);return(d in a)?a[d]:a[d]=b.apply(this,arguments)})};JXG.Math.factorial=JXG.memoizer(function(a){if(a<0){return NaN}if(a==0||a==1){return 1}return a*arguments.callee(a-1)});JXG.Math.binomial=JXG.memoizer(function(e,c){if(c>e||c<0){return 0}if(c==0||c==e){return 1}var a=1;for(var d=0;d<c;d++){a*=(e-d);a/=(d+1)}return a});JXG.Math.Numerics=new Object();JXG.Math.Numerics.INT_TRAPEZ=1;JXG.Math.Numerics.INT_SIMPSON=2;JXG.Math.Numerics.INT_MILNE=3;JXG.Math.Numerics.number_of_nodes=28;JXG.Math.Numerics.integration_type=JXG.INT_MILNE;JXG.Math.Numerics.backwardSolve=function(f,c){var a=c;for(var e=f.m()-1;e>=0;e--){for(var d=f.n()-1;d>e;d--){a[e]-=f[e][d]*a[d]}a[e]/=f[e][e]}return a};JXG.Math.Numerics.Gauss=function(a,h){var n=1e-12;var f=new JXG.Math.Vector();for(var e=0;e<a.n();e++){f.push(e)}for(var d=0;d<a.n();d++){for(var e=a.n()-1;e>d;e--){if(Math.abs(a[e][d])>JXG.Math.eps){if(Math.abs(a[d][d])<JXG.Math.eps){a.exchangeRows(e,d);h.exchange(e,d);f.exchange(e,d)}else{a[e][d]/=a[d][d];h[e]-=a[e][d]*h[d];for(var c=d+1;c<a.n();c++){a[e][c]-=a[e][d]*a[d][c]}}}if(Math.abs(a[d][d])<JXG.Math.eps){throw new SingularMatrixException()}}}var g=JXG.Math.Numerics.backwardSolve(a,h);var m=new JXG.Math.Vector();for(var e=0;e<g.n();e++){m.push(g[f[e]])}return m};JXG.Math.Numerics.QR=function(c,a){};JXG.Math.Numerics.NewtonCotes=function(d,g){var b=0;var a=(d[1]-d[0])/this.number_of_nodes;switch(this.integration_type){case JXG.INT_TRAPEZ:b=(g(d[0])+g(d[1]))*0.5;var h=d[0];for(var e=0;e<this.number_of_nodes-1;e++){h+=a;b+=g(h)}b*=a;break;case JXG.INT_SIMPSON:if(this.number_of_nodes%2>0){throw"Error: INT_SIMPSONS requires Algebra.number_of_nodes dividable by 2."}var c=this.number_of_nodes/2;b=g(d[0])+g(d[1]);h=d[0];for(e=0;e<c-1;e++){h+=2*a;b+=2*g(h)}h=d[0]-a;for(e=0;e<c;e++){h+=2*a;b+=4*g(h)}b*=a/3;break;default:if(this.number_of_nodes%4>0){throw"Error in INT_MILNE: Algebra.number_of_nodes must be a multiple of 4"}c=this.number_of_nodes*0.25;b=7*(g(d[0])+g(d[1]));h=d[0];for(e=0;e<c-1;e++){h+=4*a;b+=14*g(h)}h=d[0]-3*a;for(e=0;e<c;e++){h+=4*a;b+=32*(g(h)+g(h+2*a))}h=d[0]-2*a;for(e=0;e<c;e++){h+=4*a;b+=12*g(h)}b*=2*a/45}return b};JXG.Math.Numerics.splineDef=function(j,h){if(j.length!=h.length){throw"Error in JXG.Math.Numerics.splineDef: Input vector dimensions do not match."}var a=j.length;var d=new Array();var c;for(var e=0;e<a;e++){c={X:j[e],Y:h[e]};d.push(c)}d.sort(function(q,n){return q.X-n.X});for(var e=0;e<a;e++){j[e]=d[e].X;h[e]=d[e].Y}var o=new Array();var k=new Array();for(var e=0;e<a-1;e++){o.push(j[e+1]-j[e])}for(var e=0;e<a-2;e++){k.push(6*(h[e+2]-h[e+1])/(o[e+1])-6*(h[e+1]-h[e])/(o[e]))}var f=new Array();var g=new Array();var b;f.push(2*(o[0]+o[1]));g.push(k[0]);for(var e=0;e<a-3;e++){b=o[e+1]/f[e];f.push(2*(o[e+1]+o[e+2])-b*o[e+1]);g.push(k[e+1]-b*g[e])}var m=new Array();m[a-3]=g[a-3]/f[a-3];for(var e=a-4;e>=0;e--){m[e]=(g[e]-(o[e+1]*m[e+1]))/f[e]}for(var e=a-3;e>=0;e--){m[e+1]=m[e]}m[0]=0;m[a-1]=0;return m};JXG.Math.Numerics.splineEval=function(f,v,t,z){if(v.length!=t.length){throw"Error in JXG.Math.Numerics.splineEval: Defining vector dimensions do not match."}var g=v.length;var k=1;var h=false;if(JXG.IsArray(f)){k=f.length;h=true}else{f=[f]}var w=new Array();for(var o=0;o<k;o++){if((f[o]<v[0])||(v[o]>v[g-1])){return"NaN"}var m;for(m=1;m<g;m++){if(f[o]<=v[m]){break}}m--;var u=t[m];var s=(t[m+1]-t[m])/(v[m+1]-v[m])-(v[m+1]-v[m])/6*(z[m+1]+2*z[m]);var r=z[m]/2;var q=(z[m+1]-z[m])/(6*(v[m+1]-v[m]));var e=f[o]-v[m];w.push(u+(s+(r+q*e)*e)*e)}if(h){return w}else{return w[0]}};JXG.Math.Numerics.lagrangePolynomial=function(a){return function(b){var e,c;var g=0;var f=[];for(e=0;e<a.length;e++){f[e]=a[e].X()}for(e=0;e<a.length;e++){var d=a[e].Y();for(c=0;c<a.length;c++){if(c!=e){d*=(b-f[c])/(f[e]-f[c])}}g+=d}return g}};JXG.Math.Numerics.neville=function(a){return[function(e){var d,c,b;var f=0;for(d=0;d<a.length;d++){b=a[d].X();for(c=0;c<a.length;c++){if(c!=d){b*=(e-c)/(d-c)}}f+=b}return f},function(e){var d,c,b;var f=0;for(d=0;d<a.length;d++){b=a[d].Y();for(c=0;c<a.length;c++){if(c!=d){b*=(e-c)/(d-c)}}f+=b}return f},0,function(){return a.length-1}]};JXG.Math.Numerics.D=function(b,c){var a=0.00001;if(arguments.length==1){return function(d){return(b(d+a)-b(d-a))/(2*a)}}else{return function(d){return(b.apply(c,[d+a])-b.apply(c,[d-a]))/(2*a)}}};JXG.Math.Numerics.I=function(a,b){return JXG.Math.Numerics.NewtonCotes(a,b)};JXG.Math.Numerics.newton=function(e,a,g){var b=0;var c=1e-7;var d=e.apply(g,[a]);while(b<50&&Math.abs(d)>c){var j=this.D(e,g)(a);if(Math.abs(j)>c){a-=d/j}else{a+=(Math.random()*0.2-1)}d=e.apply(g,[a]);b++}return a};JXG.Math.Numerics.root=function(b,a,c){return this.newton(b,a,c)};JXG.Math.Numerics.cosh=function(a){return(Math.exp(a)+Math.exp(-a))*0.5};JXG.Math.Numerics.sinh=function(a){return(Math.exp(a)-Math.exp(-a))*0.5};JXG.MathStatistics=function(){};JXG.MathStatistics.prototype.sum=function(b){var d=0;for(var c=0,a=b.length;c<a;c++){d+=b[c]}return d};JXG.MathStatistics.prototype.prod=function(b){var d=1;for(var c=0,a=b.length;c<a;c++){d*=b[c]}return d};JXG.MathStatistics.prototype.mean=function(a){if(a.length>0){return this.sum(a)/a.length}else{return 0}};JXG.MathStatistics.prototype.median=function(b){if(b.length>0){var c=b.clone();c.sort(function(e,d){return e-d});var a=c.length;if(a%2==1){return c[parseInt(a*0.5)]}else{return(c[a*0.5-1]+c[a*0.5])*0.5}}else{return 0}};JXG.MathStatistics.prototype.variance=function(c){if(c.length>1){var b=this.mean(c);var e=0;for(var d=0,a=c.length;d<a;d++){e+=(c[d]-b)*(c[d]-b)}return e/(c.length-1)}else{return 0}};JXG.MathStatistics.prototype.sd=function(a){return Math.sqrt(this.variance(a))};JXG.MathStatistics.prototype.weightedMean=function(a,b){if(a.length!=b.length){return}if(a.length>0){var c=this.multiply(a,b);return this.mean(c)}else{return 0}};JXG.MathStatistics.prototype.max=function(b){if(b.length==0){return NaN}var d=b[0];for(var c=1,a=b.length;c<a;c++){d=(b[c]>d)?(b[c]):d}return d};JXG.MathStatistics.prototype.min=function(b){if(b.length==0){return NaN}var d=b[0];for(var c=1,a=b.length;c<a;c++){d=(b[c]<d)?(b[c]):d}return d};JXG.MathStatistics.prototype.range=function(a){return[this.min(a),this.max(a)]};JXG.MathStatistics.prototype.diff=function(a){return a};JXG.MathStatistics.prototype.min=function(b){if(b.length==0){return NaN}var d=b[0];for(var c=1,a=b.length;c<a;c++){d=(b[c]<d)?(b[c]):d}return d};JXG.MathStatistics.prototype.abs=function(b){var d=[];if(typeof JXG.IsArray(arr1)){for(var c=0,a=b.length;c<a;c++){d[c]=Math.abs(b[c])}}else{if(typeof b=="number"){return Math.abs(b)}else{d=null}}return d};JXG.MathStatistics.prototype.add=function(c,b){var e=[];if(typeof JXG.IsArray(c)&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]+b}}else{if(typeof c=="number"&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c+b[d]}}else{if(typeof JXG.IsArray(c)&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]+b[d]}}else{if(typeof c=="number"&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c+b}}else{e=null}}}}return e};JXG.MathStatistics.prototype.divide=function(c,b){var e=[];if(typeof JXG.IsArray(c)&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]/b}}else{if(typeof c=="number"&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c/b[d]}}else{if(typeof JXG.IsArray(c)&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]/b[d]}}else{if(typeof c=="number"&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c/b}}else{e=null}}}}return e};JXG.MathStatistics.prototype.mod=function(c,b){var e=[];if(typeof JXG.IsArray(c)&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]%b}}else{if(typeof c=="number"&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c%b[d]}}else{if(typeof JXG.IsArray(c)&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]%b[d]}}else{if(typeof c=="number"&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c%b}}else{e=null}}}}return e};JXG.MathStatistics.prototype.multiply=function(c,b){var e=[];if(typeof JXG.IsArray(c)&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]*b}}else{if(typeof c=="number"&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c*b[d]}}else{if(typeof JXG.IsArray(c)&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]*b[d]}}else{if(typeof c=="number"&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c*b}}else{e=null}}}}return e};JXG.MathStatistics.prototype.subtract=function(c,b){var e=[];if(typeof JXG.IsArray(c)&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]-b}}else{if(typeof c=="number"&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c-b[d]}}else{if(typeof JXG.IsArray(c)&&typeof JXG.IsArray(b)){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c[d]-b[d]}}else{if(typeof c=="number"&&typeof b=="number"){for(var d=0,a=Math.min(c.length,b.length);d<a;d++){e[d]=c-b}}else{e=null}}}}return e};JXG.AbstractRenderer=function(){this.vOffsetText=8;this.enhancedRendering=true};JXG.AbstractRenderer.prototype.drawPoint=function(c){var d;var a;var b=this.getPointSize(c.visProp.style);if(c.visProp.style==0||c.visProp.style==1||c.visProp.style==2){d=this.createPrimitive("line",c.id+"_x1");this.setStrokeProp(d,c.visProp);a=this.createPrimitive("line",c.id+"_x2");this.setStrokeProp(a,c.visProp);this.appendChildPrimitive(d,"points");this.appendChildPrimitive(a,"points");c.rendNodeX1=d;c.rendNodeX2=a}else{if(c.visProp.style==3||c.visProp.style==4||c.visProp.style==5||c.visProp.style==6){d=this.createPrimitive("circle",c.id);this.setStrokeProp(d,c.visProp);this.setFillProp(d,c.visProp);this.appendChildPrimitive(d,"points");c.rendNode=d}else{if(c.visProp.style==7||c.visProp.style==8||c.visProp.style==9){d=this.createPrimitive("rect",c.id);this.setStrokeProp(d,c.visProp);this.setFillProp(d,c.visProp);this.appendChildPrimitive(d,"points");c.rendNode=d}else{if(c.visProp.style==10||c.visProp.style==11||c.visProp.style==12){d=this.createPrimitive("line",c.id+"_x1");this.setStrokeProp(d,c.visProp);a=this.createPrimitive("line",c.id+"_x2");this.setStrokeProp(a,c.visProp);this.appendChildPrimitive(d,"points");this.appendChildPrimitive(a,"points");c.rendNodeX1=d;c.rendNodeX2=a}}}}this.setDraft(c);this.updatePoint(c)};JXG.AbstractRenderer.prototype.updatePoint=function(b){if(this.enhancedRendering){if(!b.visProp.draft){this.setObjectStrokeWidth(b,b.visProp.strokeWidth);this.setObjectStrokeColor(b,b.visProp.strokeColor,b.visProp.strokeOpacity);this.setObjectFillColor(b,b.visProp.fillColor,b.visProp.fillOpacity)}else{this.setDraft(b)}}var a=this.getPointSize(b.visProp.style);if(b.visProp.style==0||b.visProp.style==1||b.visProp.style==2){this.updateLinePrimitive(b.rendNodeX1,b.coords.scrCoords[1]-a,b.coords.scrCoords[2]-a,b.coords.scrCoords[1]+a,b.coords.scrCoords[2]+a);this.updateLinePrimitive(b.rendNodeX2,b.coords.scrCoords[1]+a,b.coords.scrCoords[2]-a,b.coords.scrCoords[1]-a,b.coords.scrCoords[2]+a)}else{if(b.visProp.style==3||b.visProp.style==4||b.visProp.style==5||b.visProp.style==6){this.updateCirclePrimitive(b.rendNode,b.coords.scrCoords[1],b.coords.scrCoords[2],a+1)}else{if(b.visProp.style==7||b.visProp.style==8||b.visProp.style==9){this.updateRectPrimitive(b.rendNode,b.coords.scrCoords[1]-a,b.coords.scrCoords[2]-a,a*2,a*2)}else{if(b.visProp.style==10||b.visProp.style==11||b.visProp.style==12){this.updateLinePrimitive(b.rendNodeX1,b.coords.scrCoords[1]-a,b.coords.scrCoords[2],b.coords.scrCoords[1]+a,b.coords.scrCoords[2]);this.updateLinePrimitive(b.rendNodeX2,b.coords.scrCoords[1],b.coords.scrCoords[2]-a,b.coords.scrCoords[1],b.coords.scrCoords[2]+a)}}}}};JXG.AbstractRenderer.prototype.changePointStyle=function(a){var b=this.getElementById(a.id);if(b!=null){this.remove(b)}else{this.remove(this.getElementById(a.id+"_x1"));this.remove(this.getElementById(a.id+"_x2"))}this.drawPoint(a);if(!a.visProp.visible){this.hide(a)}if(a.visProp.draft){this.setDraft(a)}};JXG.AbstractRenderer.prototype.drawLine=function(a){var b=this.createPrimitive("line",a.id);this.appendChildPrimitive(b,"lines");a.rendNode=b;this.setDashStyle(a.rendNode,a.visProp);this.updateLine(a)};JXG.AbstractRenderer.prototype.updateLine=function(b){var n=new JXG.Coords(JXG.COORDS_BY_USER,b.point1.coords.usrCoords,b.board);var k=new JXG.Coords(JXG.COORDS_BY_USER,b.point2.coords.usrCoords,b.board);if(b.visProp.straightFirst||b.visProp.straightLast){this.calcStraight(b,n,k)}this.updateLinePrimitive(b.rendNode,n.scrCoords[1],n.scrCoords[2],k.scrCoords[1],k.scrCoords[2]);if(b.image!=null){var a=n.scrCoords[1];var o=n.scrCoords[2];var f=k.scrCoords[1];var e=k.scrCoords[2];var j;var d=(f-a>0)?1:-1;if(Math.abs(f-a)>1e-7){j=Math.atan((e-o)/(f-a))+((d<0)?Math.PI:0)}else{j=((e-o>0)?0.5:-0.5)*Math.PI}var h=250;var g=256;var c=[[1,0,0],[h*(1-Math.cos(j))+g*Math.sin(j),Math.cos(j),-Math.sin(j)],[g*(1-Math.cos(j))-h*Math.sin(j),Math.sin(j),Math.cos(j)]];b.imageTransformMatrix=c}this.makeArrows(b);if(this.enhancedRendering){if(!b.visProp.draft){this.setObjectStrokeWidth(b,b.visProp.strokeWidth);this.setObjectStrokeColor(b,b.visProp.strokeColor,b.visProp.strokeOpacity)}else{this.setDraft(b)}}};JXG.AbstractRenderer.prototype.drawCurve=function(a){var b=this.createPrimitive("path",a.id);this.appendChildPrimitive(b,"curves");a.rendNode=b;this.setStrokeProp(a.rendNode,a.visProp);this.setFillProp(a.rendNode,a.visProp);this.setDashStyle(a.rendNode,a.visProp);this.updateCurve(a)};JXG.AbstractRenderer.prototype.updateCurve=function(a){if(this.enhancedRendering){if(!a.visProp.draft){this.setObjectStrokeWidth(a,a.visProp.strokeWidth);this.setObjectStrokeColor(a,a.visProp.strokeColor,a.visProp.strokeOpacity);this.setObjectFillColor(a,a.visProp.fillColor,a.visProp.fillOpacity)}else{this.setDraft(a)}}this.updatePathPrimitive(a.rendNode,this.updatePathStringPrimitive(a),a.board)};JXG.AbstractRenderer.prototype.calcStraight=function(f,r,o){var d,a,m,h,t,e,q,n,w,k,g,v,u;q=f.board.algebra;t=f.visProp.straightFirst;e=f.visProp.straightLast;if(!t&&!e){return}if(Math.abs(r.scrCoords[0])<q.eps||Math.abs(o.scrCoords[0])<q.eps){t=true;e=true}n=[];n[0]=f.stdform[0]-f.stdform[1]*f.board.origin.scrCoords[1]/(f.board.unitX*f.board.zoomX)+f.stdform[2]*f.board.origin.scrCoords[2]/(f.board.unitY*f.board.zoomY);n[1]=f.stdform[1]/(f.board.unitX*f.board.zoomX);n[2]=f.stdform[2]/(-f.board.unitY*f.board.zoomY);if(isNaN(n[0]+n[1]+n[2])){return}w=[];w[0]=q.crossProduct(n,[0,0,1]);w[1]=q.crossProduct(n,[0,1,0]);w[2]=q.crossProduct(n,[-f.board.canvasHeight,0,1]);w[3]=q.crossProduct(n,[-f.board.canvasWidth,1,0]);for(k=0;k<4;k++){if(Math.abs(w[k][0])>q.eps){for(g=2;g>0;g--){w[k][g]/=w[k][0]}w[k][0]=1}}d=false;a=false;if(!t&&r.scrCoords[1]>=0&&r.scrCoords[1]<=f.board.canvasWidth&&r.scrCoords[2]>=0&&r.scrCoords[2]<=f.board.canvasHeight){d=true}if(!e&&o.scrCoords[1]>=0&&o.scrCoords[1]<=f.board.canvasWidth&&o.scrCoords[2]>=0&&o.scrCoords[2]<=f.board.canvasHeight){a=true}if(Math.abs(w[1][0])<q.eps){m=w[0];h=w[2]}else{if(Math.abs(w[0][0])<q.eps){m=w[1];h=w[3]}else{if(w[1][2]<0){m=w[0];if(w[3][2]>f.board.canvasHeight){h=w[2]}else{h=w[3]}}else{if(w[1][2]>f.board.canvasHeight){m=w[2];if(w[3][2]<0){h=w[0]}else{h=w[3]}}else{m=w[1];if(w[3][2]<0){h=w[0]}else{if(w[3][2]>f.board.canvasHeight){h=w[2]}else{h=w[3]}}}}}}m=new JXG.Coords(JXG.COORDS_BY_SCREEN,m.slice(1),f.board);h=new JXG.Coords(JXG.COORDS_BY_SCREEN,h.slice(1),f.board);if(!d){if(!a){if(this.isSameDirection(r,o,m)){if(!this.isSameDirection(r,o,h)){u=m;v=h}else{if(f.board.algebra.affineDistance(o.usrCoords,m.usrCoords)<f.board.algebra.affineDistance(o.usrCoords,h.usrCoords)){v=m;u=h}else{u=m;v=h}}}else{if(this.isSameDirection(r,o,h)){v=m;u=h}else{if(f.board.algebra.affineDistance(o.usrCoords,m.usrCoords)<f.board.algebra.affineDistance(o.usrCoords,h.usrCoords)){u=m;v=h}else{v=m;u=h}}}}else{if(this.isSameDirection(o,r,m)){v=m}else{v=h}}}else{if(!a){if(this.isSameDirection(r,o,m)){u=m}else{u=h}}}if(v){r.setCoordinates(JXG.COORDS_BY_USER,v.usrCoords.slice(1))}if(u){o.setCoordinates(JXG.COORDS_BY_USER,u.usrCoords.slice(1))}};JXG.AbstractRenderer.prototype.isSameDirection=function(g,d,c){var b,a,f,e;b=d.usrCoords[1]-g.usrCoords[1];a=d.usrCoords[2]-g.usrCoords[2];f=c.usrCoords[1]-g.usrCoords[1];e=c.usrCoords[2]-g.usrCoords[2];if(Math.abs(b)<JXG.Math.eps){b=0}if(Math.abs(a)<JXG.Math.eps){a=0}if(Math.abs(f)<JXG.Math.eps){f=0}if(Math.abs(e)<JXG.Math.eps){e=0}if(b>=0&&f>=0){if((a>=0&&e>=0)||(a<=0&&e<=0)){return true}}else{if(b<=0&&f<=0){if((a>=0&&e>=0)||(a<=0&&e<=0)){return true}}}return false};JXG.AbstractRenderer.prototype.drawCircle=function(a){var b=this.createPrimitive("ellipse",a.id);this.setStrokeProp(b,a.visProp);this.setFillProp(b,a.visProp);this.setDashStyle(b,a.visProp);this.appendChildPrimitive(b,"circles");a.rendNode=b;this.setDraft(a);this.updateCircle(a)};JXG.AbstractRenderer.prototype.updateCircle=function(b){if(this.enhancedRendering){if(!b.visProp.draft){this.setObjectStrokeWidth(b,b.visProp.strokeWidth);this.setObjectStrokeColor(b,b.visProp.strokeColor,b.visProp.strokeOpacity);this.setObjectFillColor(b,b.visProp.fillColor,b.visProp.fillOpacity)}else{this.setDraft(b)}}var a=b.getRadius();this.updateEllipsePrimitive(b.rendNode,b.midpoint.coords.scrCoords[1],b.midpoint.coords.scrCoords[2],(a*b.board.unitX*b.board.zoomX),(a*b.board.unitY*b.board.zoomY))};JXG.AbstractRenderer.prototype.drawPolygon=function(a){var b=this.createPrimitive("polygon",a.id);a.visProp.fillOpacity=0.3;this.setFillProp(b,a.visProp);this.appendChildPrimitive(b,"polygone");a.rendNode=b;this.setDraft(a);this.updatePolygon(a)};JXG.AbstractRenderer.prototype.updatePolygon=function(a){if(this.enhancedRendering){if(!a.visProp.draft){this.setObjectStrokeWidth(a,a.visProp.strokeWidth);this.setObjectFillColor(a,a.visProp.fillColor,a.visProp.fillOpacity)}else{this.setDraft(a)}}this.updatePolygonePrimitive(a.rendNode,a)};JXG.AbstractRenderer.prototype.drawArrow=function(a){var b=this.createPrimitive("line",a.id);this.setStrokeProp(b,a.visProp);this.setDashStyle(b,a.visProp);this.makeArrow(b,a);this.appendChildPrimitive(b,"lines");a.rendNode=b;this.setDraft(a);this.updateArrow(a)};JXG.AbstractRenderer.prototype.updateArrow=function(a){if(this.enhancedRendering){if(!a.visProp.draft){this.setObjectStrokeWidth(a,a.visProp.strokeWidth);this.setObjectStrokeColor(a,a.visProp.strokeColor,a.visProp.strokeOpacity);this.setObjectFillColor(a,a.visProp.fillColor,a.visProp.fillOpacity)}else{this.setDraft(a)}}this.updateLinePrimitive(a.rendNode,a.point1.coords.scrCoords[1],a.point1.coords.scrCoords[2],a.point2.coords.scrCoords[1],a.point2.coords.scrCoords[2])};JXG.AbstractRenderer.prototype.updateTicks=function(c,b,a){};JXG.AbstractRenderer.prototype.removeTicks=function(a){var b=this.getElementById(a.id+"_ticks");this.remove(b)};JXG.AbstractRenderer.prototype.drawArc=function(a){};JXG.AbstractRenderer.prototype.updateArc=function(a){this.remove(a.rendNode);this.remove(a.rendNodeFill);var b=a.rendNodeTriangleStart;if(b!=null){this.remove(b)}b=a.rendNodeTriangleEnd;if(b!=null){this.remove(b)}this.drawArc(a);this.setDraft(a);return};JXG.AbstractRenderer.prototype.drawLabel=function(a){var b=this.container.ownerDocument.createElement("div");b.style.position="absolute";b.style.fontSize=a.board.fontSize+"px";b.style.color=a.color;b.className="JXGText";b.style.zIndex="10";b.setAttribute("id",a.id);b.innerHTML=a.nameHTML;this.container.appendChild(b);a.rendNode=b;this.updateLabel(a)};JXG.AbstractRenderer.prototype.updateLabel=function(a){a.rendNode.style.left=(a.coords.scrCoords[1])+"px";a.rendNode.style.top=(a.coords.scrCoords[2]-this.vOffsetText)+"px"};JXG.AbstractRenderer.prototype.drawText=function(a){var b=this.container.ownerDocument.createElement("div");b.setAttribute("id",a.id);b.style.position="absolute";b.style.fontSize=a.board.fontSize+"px";b.style.color=a.visProp.strokeColor;b.className="JXGtext";b.style.zIndex="10";this.container.appendChild(b);a.rendNode=b;this.updateText(a)};JXG.AbstractRenderer.prototype.updateText=function(a){this.updateTextStyle(a);a.rendNode.style.left=(a.coords.scrCoords[1])+"px";a.rendNode.style.top=(a.coords.scrCoords[2]-this.vOffsetText)+"px";a.rendNode.innerHTML=a.plaintextStr};JXG.AbstractRenderer.prototype.updateTextStyle=function(b){if(b.visProp.fontSize){if(typeof b.visProp.fontSize=="function"){var a=b.visProp.fontSize();b.rendNode.style.fontSize=(a>0?a:0)}else{b.rendNode.style.fontSize=(b.visProp.fontSize)}}};JXG.AbstractRenderer.prototype.drawAngle=function(a){};JXG.AbstractRenderer.prototype.updateAngle=function(a){};JXG.AbstractRenderer.prototype.drawImage=function(a){};JXG.AbstractRenderer.prototype.updateImage=function(a){this.updateRectPrimitive(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]);if(a.parent!=null){this.transformImageParent(a,a.parent.imageTransformMatrix)}else{this.transformImageParent(a)}this.transformImage(a,a.transformations)};JXG.AbstractRenderer.prototype.drawGrid=function(q){q.hasGrid=true;var m=q.gridX;var h=q.gridY;var b;var d=new JXG.Coords(JXG.COORDS_BY_SCREEN,[0,0],q);var o=new JXG.Coords(JXG.COORDS_BY_SCREEN,[q.canvasWidth,q.canvasHeight],q);var g=Math.ceil(d.usrCoords[1]);var e=0;for(var f=0;f<=m+1;f++){if(g-f/m<d.usrCoords[1]){e=f-1;break}}g=Math.floor(o.usrCoords[1]);var v=0;for(var f=0;f<=m+1;f++){if(g+f/m>o.usrCoords[1]){v=f-1;break}}g=Math.ceil(o.usrCoords[2]);var a=0;for(var f=0;f<=h+1;f++){if(g-f/h<o.usrCoords[2]){a=f-1;break}}g=Math.floor(d.usrCoords[2]);var c=0;for(var f=0;f<=h+1;f++){if(g+f/h>d.usrCoords[2]){c=f-1;break}}var u=Math.round((1/m)*q.zoomX*q.unitX);var t=Math.round((1/h)*q.zoomY*q.unitY);var r=new JXG.Coords(JXG.COORDS_BY_USER,[Math.ceil(d.usrCoords[1])-e/m,Math.floor(d.usrCoords[2])+c/h],q);var n=new JXG.Coords(JXG.COORDS_BY_USER,[Math.floor(o.usrCoords[1])+v/m,Math.ceil(o.usrCoords[2])-a/h],q);var f=0;while(r.scrCoords[1]<n.scrCoords[1]+u-1){var s=this.createPrimitive("line","gridx"+f);this.updateLinePrimitive(s,r.scrCoords[1],0,r.scrCoords[1],q.canvasHeight);if(!q.snapToGrid){this.setPropertyPrimitive(s,"stroke",q.gridColor)}else{this.setPropertyPrimitive(s,"stroke","#FF8080")}this.setPropertyPrimitive(s,"stroke-width","0.4px");if(q.gridDash){this.setPropertyPrimitive(s,"stroke-dasharray","5, 5")}this.appendChildPrimitive(s,"grid");f++;r.setCoordinates(JXG.COORDS_BY_SCREEN,[r.scrCoords[1]+u,r.scrCoords[2]])}f=0;while(r.scrCoords[2]<=n.scrCoords[2]+t-1){var s=this.createPrimitive("line","gridy"+f);this.updateLinePrimitive(s,0,r.scrCoords[2],q.canvasWidth,r.scrCoords[2]);if(!q.snapToGrid){this.setPropertyPrimitive(s,"stroke",q.gridColor)}else{this.setPropertyPrimitive(s,"stroke","#FF8080")}this.setPropertyPrimitive(s,"stroke-width","0.4px");if(q.gridDash){this.setPropertyPrimitive(s,"stroke-dasharray","5, 5")}this.appendChildPrimitive(s,"grid");f++;r.setCoordinates(JXG.COORDS_BY_SCREEN,[r.scrCoords[1],r.scrCoords[2]+t])}};JXG.AbstractRenderer.prototype.removeGrid=function(a){};JXG.AbstractRenderer.prototype.hide=function(a){};JXG.AbstractRenderer.prototype.show=function(a){};JXG.AbstractRenderer.prototype.setObjectStrokeWidth=function(c,b){var a;if(typeof b=="function"){a=b()}else{a=b}if(c.elementClass!=JXG.OBJECT_CLASS_POINT){var d;if(c.type==JXG.OBJECT_TYPE_ANGLE){d=c.rendNode2}else{d=c.rendNode}this.setPropertyPrimitive(d,"stroked","true");if(a!=null){this.setPropertyPrimitive(d,"stroke-width",a)}}else{if(c.visProp.style>=3&&c.visProp.style<=9){var d=c.rendNode;this.setPropertyPrimitive(d,"stroked","true");if(a!=null){this.setPropertyPrimitive(d,"stroke-width",a)}}else{var d=c.rendNodeX1;this.setPropertyPrimitive(d,"stroked","true");if(a!=null){this.setPropertyPrimitive(d,"stroke-width",a)}var d=c.rendNodeX2;this.setPropertyPrimitive(d,"stroked","true");if(a!=null){this.setPropertyPrimitive(d,"stroke-width",a)}}}};JXG.AbstractRenderer.prototype.setObjectStrokeColor=function(c,a,b){};JXG.AbstractRenderer.prototype.setObjectDash=function(a){};JXG.AbstractRenderer.prototype.setObjectFillColor=function(c,a,b){};JXG.AbstractRenderer.prototype.setDraft=function(b){if(!b.visProp.draft){return}var a=b.board.options.elements.draft.color;var c=b.board.options.elements.draft.opacity;if(b.type==JXG.OBJECTT_TYPE_POLYGON){this.setObjectFillColor(b,a,c)}else{if(b.elementClass==JXG.OBJECT_CLASS_POINT){this.setObjectFillColor(b,a,c)}else{this.setObjectFillColor(b,"none",0)}this.setObjectStrokeColor(b,a,c);this.setObjectStrokeWidth(b,b.board.options.elements.draft.strokeWidth)}};JXG.AbstractRenderer.prototype.removeDraft=function(a){if(a.type==JXG.OBJECT_TYPE_POLYGON){this.setObjectFillColor(a,a.visProp.fillColor,a.visProp.fillColorOpacity)}else{if(a.type==JXG.OBJECT_CLASS_POINT){this.setObjectFillColor(a,a.visProp.fillColor,a.visProp.fillColorOpacity)}this.setObjectStrokeColor(a,a.visProp.strokeColor,a.visProp.strokeColorOpacity);this.setObjectStrokeWidth(a,a.visProp.strokeWidth)}};JXG.AbstractRenderer.prototype.highlight=function(b){if(b.visProp.draft==false){if(b.type==JXG.OBJECT_CLASS_POINT){this.setObjectStrokeColor(b,b.visProp.highlightStrokeColor,b.visProp.highlightStrokeOpacity);this.setObjectFillColor(b,b.visProp.highlightStrokeColor,b.visProp.highlightStrokeOpacity)}else{if(b.type==JXG.OBJECT_TYPE_POLYGON){this.setObjectFillColor(b,b.visProp.highlightFillColor,b.visProp.highlightFillOpacity);for(var a=0;a<b.borders.length;a++){this.setObjectStrokeColor(b.borders[a],b.borders[a].visProp.highlightStrokeColor,b.visProp.highlightStrokeOpacity)}}else{this.setObjectStrokeColor(b,b.visProp.highlightStrokeColor,b.visProp.highlightStrokeOpacity);this.setObjectFillColor(b,b.visProp.highlightFillColor,b.visProp.highlightFillOpacity)}}}};JXG.AbstractRenderer.prototype.noHighlight=function(a){if(a.visProp.draft==false){if(a.type==JXG.OBJECT_CLASS_POINT){this.setObjectStrokeColor(a,a.visProp.strokeColor,a.visProp.strokeOpacity);this.setObjectFillColor(a,a.visProp.strokeColor,a.visProp.strokeOpacity)}else{if(a.type==JXG.OBJECT_TYPE_POLYGON){this.setObjectFillColor(a,a.visProp.fillColor,a.visProp.fillOpacity);for(i=0;i<a.borders.length;i++){this.setObjectStrokeColor(a.borders[i],a.borders[i].visProp.strokeColor,a.visProp.strokeOpacity)}}else{this.setObjectStrokeColor(a,a.visProp.strokeColor,a.visProp.strokeOpacity);this.setObjectFillColor(a,a.visProp.fillColor,a.visProp.fillOpacity)}}}};JXG.AbstractRenderer.prototype.setLabelColor=function(a){a.rendNode.style.color=a.color};JXG.AbstractRenderer.prototype.suspendRedraw=function(){};JXG.AbstractRenderer.prototype.unsuspendRedraw=function(){};JXG.AbstractRenderer.prototype.remove=function(a){};JXG.AbstractRenderer.prototype.getPointSize=function(b){var a=0;switch(b){case 0:a=2;break;case 1:a=3;break;case 2:a=4;break;case 3:a=1;break;case 4:a=2;break;case 5:a=3;break;case 6:a=4;break;case 7:a=2;break;case 8:a=3;break;case 9:a=4;break;case 10:a=2;break;case 11:a=3;break;case 12:a=4;break;default:}return a};JXG.AbstractRenderer.prototype.drawZoomBar=function(g){var c=this.container.ownerDocument.createElement("div");c.className="JXGtext";c.style.color="#aaaaaa";c.style.backgroundColor="#f5f5f5";c.style.padding="2px";c.style.position="absolute";c.style.fontSize="10px";c.style.cursor="pointer";c.style.zIndex="100";this.container.appendChild(c);c.style.right="5px";c.style.bottom="5px";var f=this.container.ownerDocument.createElement("span");c.appendChild(f);f.innerHTML="&nbsp;&ndash;&nbsp;";JXG.addEvent(f,"click",g.zoomOut,g);var e=this.container.ownerDocument.createElement("span");c.appendChild(e);e.innerHTML="&nbsp;o&nbsp;";JXG.addEvent(e,"click",g.zoom100,g);var b=this.container.ownerDocument.createElement("span");c.appendChild(b);b.innerHTML="&nbsp;+&nbsp;";JXG.addEvent(b,"click",g.zoomIn,g);var j=this.container.ownerDocument.createElement("span");c.appendChild(j);j.innerHTML="&nbsp;&larr;&nbsp;";JXG.addEvent(j,"click",g.clickLeftArrow,g);var h=this.container.ownerDocument.createElement("span");c.appendChild(h);h.innerHTML="&nbsp;&uarr;&nbsp;";JXG.addEvent(h,"click",g.clickUpArrow,g);var a=this.container.ownerDocument.createElement("span");c.appendChild(a);a.innerHTML="&nbsp;&darr;&nbsp;";JXG.addEvent(a,"click",g.clickDownArrow,g);var d=this.container.ownerDocument.createElement("span");c.appendChild(d);d.innerHTML="&nbsp;&rarr;&nbsp;";JXG.addEvent(d,"click",g.clickRightArrow,g)};JXG.AbstractRenderer.prototype.getElementById=function(a){return document.getElementById(a)};JXG.FileReader=new function(){this.parseFileContent=function(a,b,d){this.request=false;var c;try{this.request=new XMLHttpRequest();if(d.toLowerCase()=="raw"){this.request.overrideMimeType("text/plain; charset=iso-8859-1")}else{this.request.overrideMimeType("text/xml; charset=iso-8859-1")}}catch(c){try{this.request=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{this.request=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){this.request=false}}}if(!this.request){alert("AJAX not activated!");return}this.request.open("GET",a,true);if(d.toLowerCase()=="raw"){this.cbp=function(){var e=this.request;if(e.readyState==4){b(e.responseText)}}}else{this.cbp=function(){var e=this.request;if(e.readyState==4){this.parseString(e.responseText,b,d)}}}this.cb=JXG.bind(this.cbp,this);this.request.onreadystatechange=this.cb;this.request.send(null)};this.cleanWhitespace=function(a){var b=a.firstChild;while(b!=null){if(b.nodeType==3&&!/\S/.test(b.nodeValue)){a.removeChild(b)}else{if(b.nodeType==1){this.cleanWhitespace(b)}}b=b.nextSibling}};this.stringToXMLTree=function(b){if(typeof DOMParser=="undefined"){DOMParser=function(){};DOMParser.prototype.parseFromString=function(f,g){if(typeof ActiveXObject!="undefined"){var e=new ActiveXObject("MSXML.DomDocument");e.loadXML(f);return e}}}var c=new DOMParser();var a=c.parseFromString(b,"text/xml");this.cleanWhitespace(a);return a};this.parseString=function(c,b,d){if(d.toLowerCase()=="geonext"){c=JXG.GeonextReader.prepareString(c)}b.xmlString=c;var a=this.stringToXMLTree(c);this.readElements(a,b,d)};this.readElements=function(a,b,c){b.suspendUpdate();if(c.toLowerCase()=="geonext"){if(a.getElementsByTagName("GEONEXT").length!=0){JXG.GeonextReader.readGeonext(a,b)}}else{if(a.getElementsByTagName("geogebra").length!=0){JXG.GeogebraReader.readGeogebra(a,b)}else{if(c.toLowerCase()=="intergeo"){JXG.IntergeoReader.readIntergeo(a,b)}}}b.unsuspendUpdate();b.afterLoad()}};JXG.GeonextReader=new function(){this.changeOriginIds=function(a,b){if((b=="gOOe0")||(b=="gXOe0")||(b=="gYOe0")||(b=="gXLe0")||(b=="gYLe0")){return a.id+b}else{return b}};this.colorProperties=function(b,a){b.colorStroke=a.getElementsByTagName("color")[0].getElementsByTagName("stroke")[0].firstChild.data;b.highlightStrokeColor=a.getElementsByTagName("color")[0].getElementsByTagName("lighting")[0].firstChild.data;b.colorFill=a.getElementsByTagName("color")[0].getElementsByTagName("fill")[0].firstChild.data;b.colorLabel=a.getElementsByTagName("color")[0].getElementsByTagName("label")[0].firstChild.data;b.colorDraft=a.getElementsByTagName("color")[0].getElementsByTagName("draft")[0].firstChild.data;return b};this.firstLevelProperties=function(e,c){var a=c.childNodes;for(var d=0;d<a.length;d++){if(a[d].firstChild!=null&&a[d].nodeName!="data"&&a[d].nodeName!="straight"){var b=a[d].nodeName;e[b]=a[d].firstChild.data}}return e};this.boardProperties=function(b,a){return b};this.defProperties=function(b,a){if(a.nodeType==3||a.nodeType==8){return null}b.ident=a.nodeName;if(b.ident=="text"||b.ident=="intersection"||b.ident=="composition"){b.name=""}else{b.name=a.getElementsByTagName("name")[0].firstChild.data}b.id=a.getElementsByTagName("id")[0].firstChild.data;return b};this.visualProperties=function(b,a){b.visible=a.getElementsByTagName("visible")[0].firstChild.data;b.trace=a.getElementsByTagName("trace")[0].firstChild.data;return b};this.readNodes=function(g,d,b,e){var c;var a=d.getElementsByTagName(b)[0].childNodes;for(var f=0;f<a.length;f++){if(a[f].firstChild!=null){if(e!=null){c=e+JXG.capitalize(a[f].nodeName)}else{c=a[f].nodeName}g[c]=a[f].firstChild.data}}return g};this.subtreeToString=function(a){try{return(new XMLSerializer()).serializeToString(a)}catch(b){return a.xml}return null};this.readImage=function(c){var b="";var a=c;if(a!=null){b=a.data;while(a.nextSibling!=null){a=a.nextSibling;b+=a.data}}return b};this.parseImage=function(j,g,a,n,m,o,f,d){if(g==null){return null}if(g.getElementsByTagName("src")[0]!=null){var s="src"}else{if(g.getElementsByTagName("image")[0]!=null){var s="image"}else{return null}}var c=this.readImage(g.getElementsByTagName(s)[0].firstChild);if(c!=""){if(s=="src"){var n=g.getElementsByTagName("x")[0].firstChild.data;var m=g.getElementsByTagName("y")[0].firstChild.data;var o=g.getElementsByTagName("width")[0].firstChild.data;var f=g.getElementsByTagName("height")[0].firstChild.data}else{var e=document.createElement("img");e.setAttribute("id","tmpimg");e.style.display="none";document.getElementsByTagName("body")[0].appendChild(e);e.setAttribute("src","data:image/png;base64,"+c);var r=e.width;var q=e.height;r=(r==0)?3:r;q=(q==0)?3:q;m-=q*o/r*0.5;f=q*o/r;document.getElementsByTagName("body")[0].removeChild(e)}if(d!=null){var b=d.id+"_image"}else{var b=false}var k=new JXG.Image(j,c,[n,m],[o,f],a,b,false,d);return k}};this.readConditions=function(f,d){d.conditions="";if(f!=null){for(var b=0;b<f.getElementsByTagName("data").length;b++){var c;var g;var a=f.getElementsByTagName("data")[b];c=JXG.GeonextReader.subtreeToString(a);d.conditions+=c}}};this.printDebugMessage=function(a,d,c,b){};this.readGeonext=function(t,k){var n={};boardData=t.getElementsByTagName("board")[0];n.ident="board";n.id=boardData.getElementsByTagName("id")[0].firstChild.data;n.width=boardData.getElementsByTagName("width")[0].firstChild.data;n.height=boardData.getElementsByTagName("height")[0].firstChild.data;n.fontSize=(boardData.getElementsByTagName("fontsize")[0]!=null)?document.body.style.fontSize=boardData.getElementsByTagName("fontsize")[0].firstChild.data:document.body.style.fontSize;n.modus=boardData.getElementsByTagName("modus")[0].firstChild.data;n.originX=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("origin")[0].getElementsByTagName("x")[0].firstChild.data;n.originY=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("origin")[0].getElementsByTagName("y")[0].firstChild.data;n.zoomX=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("zoom")[0].getElementsByTagName("x")[0].firstChild.data;n.zoomY=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("zoom")[0].getElementsByTagName("y")[0].firstChild.data;n.unitX=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("unit")[0].getElementsByTagName("x")[0].firstChild.data;n.unitY=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("unit")[0].getElementsByTagName("y")[0].firstChild.data;n.viewportTop=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("viewport")[0].getElementsByTagName("top")[0].firstChild.data;n.viewportLeft=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("viewport")[0].getElementsByTagName("left")[0].firstChild.data;n.viewportBottom=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("viewport")[0].getElementsByTagName("bottom")[0].firstChild.data;n.viewportRight=boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("viewport")[0].getElementsByTagName("right")[0].firstChild.data;this.readConditions(boardData.getElementsByTagName("conditions")[0],n);k.origin={};k.origin.usrCoords=[1,0,0];k.origin.scrCoords=[1,1*n.originX,1*n.originY];k.zoomX=1*n.zoomX;k.zoomY=1*n.zoomY;k.unitX=1*n.unitX;k.unitY=1*n.unitY;k.fontSize=1*n.fontSize;k.geonextCompatibilityMode=true;delete (JXG.JSXGraph.boards[k.id]);k.id=n.id;JXG.JSXGraph.boards[k.id]=k;k.initGeonextBoard();k.renderer.enhancedRendering=true;JXG.GeonextReader.parseImage(k,boardData.getElementsByTagName("file")[0],"images");var d=(boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("snap")[0].firstChild.data=="true")?k.snapToGrid=true:null;var g=(boardData.getElementsByTagName("grid")[1].getElementsByTagName("x")[0].firstChild.data)?k.gridX=boardData.getElementsByTagName("grid")[1].getElementsByTagName("x")[0].firstChild.data*1:null;var f=(boardData.getElementsByTagName("grid")[1].getElementsByTagName("y")[0].firstChild.data)?k.gridY=boardData.getElementsByTagName("grid")[1].getElementsByTagName("y")[0].firstChild.data*1:null;k.calculateSnapSizes();var m=boardData.getElementsByTagName("grid")[1].getElementsByTagName("dash")[0].firstChild.data;k.gridDash=k.algebra.str2Bool(m);var o=boardData.getElementsByTagName("grid")[1].getElementsByTagName("color")[0].firstChild.data;var j;if(o.length=="9"&&o.substr(0,1)=="#"){j=o.substr(7,2);o=o.substr(0,7)}else{j="FF"}k.gridColor=o;k.gridOpacity=j;var a=(boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("grid")[0].firstChild.data=="true")?k.renderer.drawGrid(k):null;if(boardData.getElementsByTagName("coordinates")[0].getElementsByTagName("coord")[0].firstChild.data=="true"){var c=k.createElement("axis",[[0,0],[1,0]]);c.setProperty("strokeColor:"+c.visProp.strokeColor,"strokeWidth:"+c.visProp.strokeWidth,"fillColor:none","highlightStrokeColor:"+c.visProp.highlightStrokeColor,"highlightFillColor:none","visible:true");var b=k.createElement("axis",[[0,0],[0,1]]);b.setProperty("strokeColor:"+b.visProp.strokeColor,"strokeWidth:"+b.visProp.strokeWidth,"fillColor:none","highlightStrokeColor:"+b.visProp.highlightStrokeColor,"highlightFillColor:none","visible:true")}var r=boardData.getElementsByTagName("background")[0].getElementsByTagName("color")[0].firstChild.data;var h=1;if(r.length=="9"&&r.substr(0,1)=="#"){h=r.substr(7,2);r=r.substr(0,7)}k.containerObj.style.backgroundColor=r;var e=t.getElementsByTagName("elements")[0].childNodes;for(var q=0;q<e.length;q++){(function(S){var T=e[S];var aj={};aj=JXG.GeonextReader.defProperties(aj,T);if(aj==null){return}switch(T.nodeName.toLowerCase()){case"point":aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj=JXG.GeonextReader.readNodes(aj,T,"data");aj.fixed=T.getElementsByTagName("fix")[0].firstChild.data;JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"points");try{V=new JXG.Point(k,[1*aj.x,1*aj.y],aj.id,aj.name,true);V.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorStroke,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.highlightStrokeColor,"labelColor:"+aj.colorLabel,"visible:"+aj.visible,"fixed:"+aj.fixed,"draft:"+aj.draft);V.setStyle(1*aj.style);V.traced=(aj.trace=="false")?false:true;JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK")}catch(ag){}break;case"line":aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj=JXG.GeonextReader.readNodes(aj,T,"data");aj=JXG.GeonextReader.readNodes(aj,T,"straight","straight");aj.first=JXG.GeonextReader.changeOriginIds(k,aj.first);aj.last=JXG.GeonextReader.changeOriginIds(k,aj.last);var Y=new JXG.Line(k,aj.first,aj.last,aj.id,aj.name);var O=Y.point1.coords.usrCoords[1];var N=Y.point1.coords.usrCoords[2];var P=Y.point1.coords.distance(JXG.COORDS_BY_USER,Y.point2.coords);var ac=0;Y.image=JXG.GeonextReader.parseImage(k,T,"lines",O,N,P,ac,Y);aj.straightFirst=(aj.straightFirst=="false")?false:true;aj.straightLast=(aj.straightLast=="false")?false:true;Y.setStraight(aj.straightFirst,aj.straightLast);Y.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorFill,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.colorFill,"visible:"+aj.visible,"dash:"+aj.dash,"draft:"+aj.draft);Y.traced=(aj.trace=="false")?false:true;JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"circle":aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj.midpoint=T.getElementsByTagName("data")[0].getElementsByTagName("midpoint")[0].firstChild.data;JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"circles");if(T.getElementsByTagName("data")[0].getElementsByTagName("radius").length>0){aj.radiuspoint=T.getElementsByTagName("data")[0].getElementsByTagName("radius")[0].firstChild.data;aj.radius=null;aj.method="twoPoints"}else{if(T.getElementsByTagName("data")[0].getElementsByTagName("radiusvalue").length>0){aj.radiuspoint=null;aj.radius=T.getElementsByTagName("data")[0].getElementsByTagName("radiusvalue")[0].firstChild.data;aj.radiusnum=T.getElementsByTagName("data")[0].getElementsByTagName("radiusnum")[0].firstChild.data;aj.method="pointRadius"}}if(aj.method=="twoPoints"){if(k.objects[aj.radiuspoint].type==JXG.OBJECT_TYPE_LINE){aj.method="pointLine";aj.radiuspoint=JXG.GeonextReader.changeOriginIds(k,aj.radiuspoint)}else{if(k.objects[aj.radiuspoint].type==JXG.OBJECT_TYPE_CIRCLE){aj.method="pointCircle"}}}if(aj.method=="pointRadius"){aj.midpoint=JXG.GeonextReader.changeOriginIds(k,aj.midpoint);var ah=new JXG.Circle(k,aj.method,aj.midpoint,aj.radius,aj.id,aj.name)}else{aj.midpoint=JXG.GeonextReader.changeOriginIds(k,aj.midpoint);var ah=new JXG.Circle(k,aj.method,aj.midpoint,aj.radiuspoint,aj.id,aj.name)}ah.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorFill,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.colorFill,"visible:"+aj.visible,"dash:"+aj.dash,"draft:"+aj.draft);ah.traced=(aj.trace=="false")?false:true;JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"slider":aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj=JXG.GeonextReader.readNodes(aj,T,"data");aj.fixed=T.getElementsByTagName("fix")[0].firstChild.data;aj=JXG.GeonextReader.readNodes(aj,T,"animate","animate");JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"points");try{var V=new JXG.Point(k,[1*aj.x,1*aj.y],aj.id,aj.name,true);aj.parent=JXG.GeonextReader.changeOriginIds(k,aj.parent);V.makeGlider(aj.parent);V.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorStroke,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.highlightStrokeColor,"visible:"+aj.visible,"fixed:"+aj.fixed,"labelColor:"+aj.colorLabel,"draft:"+aj.draft);V.onPolygon=k.algebra.str2Bool(aj.onpolygon);V.traced=(aj.trace=="false")?false:true;V.setStyle(1*aj.style);JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK")}catch(ag){}break;case"cas":aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj.fixed=T.getElementsByTagName("fix")[0].firstChild.data;aj=JXG.GeonextReader.readNodes(aj,T,"data");JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"points");var V=new JXG.Point(k,[1*aj.xval,1*aj.yval],aj.id,aj.name,true);V.addConstraint([aj.x,aj.y]);V.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorStroke,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.highlightStrokeColor,"visible:"+aj.visible,"fixed:"+aj.fixed,"labelColor:"+aj.colorLabel,"draft:"+aj.draft);V.traced=(aj.trace=="false")?false:true;V.setStyle(1*aj.style);JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"intersection":aj=JXG.GeonextReader.readNodes(aj,T,"data");aj.outputFirstId=T.getElementsByTagName("first")[1].getElementsByTagName("id")[0].firstChild.data;aj.outputFirstName=T.getElementsByTagName("first")[1].getElementsByTagName("name")[0].firstChild.data;aj.outputFirstVisible=T.getElementsByTagName("first")[1].getElementsByTagName("visible")[0].firstChild.data;aj.outputFirstTrace=T.getElementsByTagName("first")[1].getElementsByTagName("trace")[0].firstChild.data;aj.outputFirstFixed=T.getElementsByTagName("first")[1].getElementsByTagName("fix")[0].firstChild.data;aj.outputFirstStyle=T.getElementsByTagName("first")[1].getElementsByTagName("style")[0].firstChild.data;aj.outputFirstStrokewidth=T.getElementsByTagName("first")[1].getElementsByTagName("strokewidth")[0].firstChild.data;aj.outputFirstColorStroke=T.getElementsByTagName("first")[1].getElementsByTagName("color")[0].getElementsByTagName("stroke")[0].firstChild.data;aj.outputFirstHighlightStrokeColor=T.getElementsByTagName("first")[1].getElementsByTagName("color")[0].getElementsByTagName("lighting")[0].firstChild.data;aj.outputFirstColorFill=T.getElementsByTagName("first")[1].getElementsByTagName("color")[0].getElementsByTagName("fill")[0].firstChild.data;aj.outputFirstColorLabel=T.getElementsByTagName("first")[1].getElementsByTagName("color")[0].getElementsByTagName("label")[0].firstChild.data;aj.outputFirstColorDraft=T.getElementsByTagName("first")[1].getElementsByTagName("color")[0].getElementsByTagName("draft")[0].firstChild.data;aj.first=JXG.GeonextReader.changeOriginIds(k,aj.first);aj.last=JXG.GeonextReader.changeOriginIds(k,aj.last);if((((k.objects[aj.first]).type==(k.objects[aj.last]).type)&&((k.objects[aj.first]).type==JXG.OBJECT_TYPE_LINE||(k.objects[aj.first]).type==JXG.OBJECT_TYPE_ARROW))||(((k.objects[aj.first]).type==JXG.OBJECT_TYPE_LINE)&&((k.objects[aj.last]).type==JXG.OBJECT_TYPE_ARROW))||(((k.objects[aj.last]).type==JXG.OBJECT_TYPE_LINE)&&((k.objects[aj.first]).type==JXG.OBJECT_TYPE_ARROW))){var X=new JXG.Intersection(k,aj.id,k.objects[aj.first],k.objects[aj.last],aj.outputFirstId,"",aj.outputFirstName,"");if(aj.outputFirstVisible=="false"){X.hideElement()}X.p.setProperty("strokeColor:"+aj.outputFirstColorStroke,"strokeWidth:"+aj.outputFirstStrokewidth,"fillColor:"+aj.outputFirstColorStroke,"highlightStrokeColor:"+aj.outputFirstHighlightStrokeColor,"highlightFillColor:"+aj.outputFirstHighlightStrokeColor,"visible:"+aj.outputFirstVisible,"labelColor:"+aj.outputFirstColorLabel,"draft:"+aj.draft);X.p.setStyle(1*aj.outputFirstStyle);X.p.traced=(aj.outputFirstTrace=="false")?false:true}else{aj.outputLastId=T.getElementsByTagName("last")[1].getElementsByTagName("id")[0].firstChild.data;aj.outputLastName=T.getElementsByTagName("last")[1].getElementsByTagName("name")[0].firstChild.data;aj.outputLastVisible=T.getElementsByTagName("last")[1].getElementsByTagName("visible")[0].firstChild.data;aj.outputLastTrace=T.getElementsByTagName("last")[1].getElementsByTagName("trace")[0].firstChild.data;aj.outputLastFixed=T.getElementsByTagName("last")[1].getElementsByTagName("fix")[0].firstChild.data;aj.outputLastStyle=T.getElementsByTagName("last")[1].getElementsByTagName("style")[0].firstChild.data;aj.outputLastStrokewidth=T.getElementsByTagName("last")[1].getElementsByTagName("strokewidth")[0].firstChild.data;var U=T.getElementsByTagName("last")[1].getElementsByTagName("color")[0];aj.outputLastColorStroke=U.getElementsByTagName("stroke")[0].firstChild.data;aj.outputLastHighlightStrokeColor=U.getElementsByTagName("lighting")[0].firstChild.data;aj.outputLastColorFill=U.getElementsByTagName("fill")[0].firstChild.data;aj.outputLastColorLabel=U.getElementsByTagName("label")[0].firstChild.data;aj.outputLastColorDraft=U.getElementsByTagName("draft")[0].firstChild.data;var X=new JXG.Intersection(k,aj.id,k.objects[aj.first],k.objects[aj.last],aj.outputFirstId,aj.outputLastId,aj.outputFirstName,aj.outputLastName);X.p1.setProperty("strokeColor:"+aj.outputFirstColorStroke,"strokeWidth:"+aj.outputFirstStrokewidth,"fillColor:"+aj.outputFirstColorStroke,"highlightStrokeColor:"+aj.outputFirstHighlightStrokeColor,"highlightFillColor:"+aj.outputFirstHighlightStrokeColor,"visible:"+aj.outputFirstVisible,"labelColor:"+aj.outputFirstColorLabel,"draft:"+aj.draft);X.p1.setStyle(1*aj.outputFirstStyle);X.p1.traced=(aj.outputFirstTrace=="false")?false:true;X.p2.setProperty("strokeColor:"+aj.outputLastColorStroke,"strokeWidth:"+aj.outputLastStrokewidth,"fillColor:"+aj.outputLastColorStroke,"highlightStrokeColor:"+aj.outputLastHighlightStrokeColor,"highlightFillColor:"+aj.outputLastHighlightStrokeColor,"visible:"+aj.outputLastVisible,"labelColor:"+aj.outputLastColorLabel,"draft:"+aj.draft);X.p2.setStyle(1*aj.outputLastStyle);X.p2.traced=(aj.outputLastTrace=="false")?false:true;if(aj.outputFirstVisible=="false"){if(aj.outputLastVisible=="false"){X.hideElement()}else{X.p1.hideElement()}}else{if(aj.outputLastVisible=="false"){X.p2.hideElement()}}}JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"composition":aj=JXG.GeonextReader.readNodes(aj,T,"data");aj=JXG.GeonextReader.firstLevelProperties(aj,T);switch(aj.type){case"210070":aj.typeName="ARROW_PARALLEL";break;case"210080":aj.typeName="BISECTOR";break;case"210090":aj.typeName="CIRCUMCIRCLE";break;case"210100":aj.typeName="CIRCUMCIRCLE_CENTER";break;case"210110":aj.typeName="MIDPOINT";break;case"210120":aj.typeName="MIRROR_LINE";break;case"210125":aj.typeName="MIRROR_POINT";break;case"210130":aj.typeName="NORMAL";break;case"210140":aj.typeName="PARALLEL";break;case"210150":aj.typeName="PARALLELOGRAM_POINT";break;case"210160":aj.typeName="PERPENDICULAR";break;case"210170":aj.typeName="PERPENDICULAR_POINT";break;case"210180":aj.typeName="ROTATION";break;case"210190":aj.typeName="SECTOR";break}aj.defEl=[];var W=0;for(var aa=0;aa<T.getElementsByTagName("data")[0].getElementsByTagName("input").length;aa++){aj.defEl[aa]=T.getElementsByTagName("data")[0].getElementsByTagName("input")[aa].firstChild.data;W=aa+1}aj.outputId=T.getElementsByTagName("output")[0].getElementsByTagName("id")[0].firstChild.data;aj.outputName=T.getElementsByTagName("output")[0].getElementsByTagName("name")[0].firstChild.data;aj.outputVisible=T.getElementsByTagName("output")[0].getElementsByTagName("visible")[0].firstChild.data;aj.outputTrace=T.getElementsByTagName("output")[0].getElementsByTagName("trace")[0].firstChild.data;aj.outputStrokewidth=aj=JXG.GeonextReader.readNodes(aj,T,"output","output");aj.outputName=T.getElementsByTagName("output")[0].getElementsByTagName("name")[0].firstChild.data;aj.outputDash=T.getElementsByTagName("output")[0].getElementsByTagName("dash")[0].firstChild.data;aj.outputDraft=T.getElementsByTagName("output")[0].getElementsByTagName("draft")[0].firstChild.data;aj.outputStrokewidth=T.getElementsByTagName("output")[0].getElementsByTagName("strokewidth")[0].firstChild.data;aj.outputColorStroke=T.getElementsByTagName("output")[0].getElementsByTagName("color")[0].getElementsByTagName("stroke")[0].firstChild.data;aj.outputHighlightStrokeColor=T.getElementsByTagName("output")[0].getElementsByTagName("color")[0].getElementsByTagName("lighting")[0].firstChild.data;aj.outputColorFill=T.getElementsByTagName("output")[0].getElementsByTagName("color")[0].getElementsByTagName("fill")[0].firstChild.data;aj.outputColorLabel=T.getElementsByTagName("output")[0].getElementsByTagName("color")[0].getElementsByTagName("label")[0].firstChild.data;aj.outputColorDraft=T.getElementsByTagName("output")[0].getElementsByTagName("color")[0].getElementsByTagName("draft")[0].firstChild.data;aj.defEl[0]=JXG.GeonextReader.changeOriginIds(k,aj.defEl[0]);aj.defEl[1]=JXG.GeonextReader.changeOriginIds(k,aj.defEl[1]);aj.defEl[2]=JXG.GeonextReader.changeOriginIds(k,aj.defEl[2]);if(aj.typeName=="MIDPOINT"){if(W==2){k.addMidpoint(aj.defEl[0],aj.defEl[1],aj.outputId,aj.outputName)}else{if(W==1){k.addMidpoint(k.objects[aj.defEl[0]].point1.id,k.objects[aj.defEl[0]].point2.id,aj.outputId,aj.outputName)}}}else{if(aj.typeName=="NORMAL"){k.addNormal(aj.defEl[1],aj.defEl[0],aj.outputId,aj.outputName)}else{if(aj.typeName=="PARALLEL"){k.addParallel(aj.defEl[1],aj.defEl[0],aj.outputId,aj.outputName)}else{if(aj.typeName=="CIRCUMCIRCLE"){var Q=T.getElementsByTagName("output")[1].getElementsByTagName("id")[0].firstChild.data;var D=T.getElementsByTagName("output")[1].getElementsByTagName("name")[0].firstChild.data;k.addCircumcenter(aj.defEl[0],aj.defEl[1],aj.defEl[2],aj.outputId,aj.outputName,Q,D)}else{if(aj.typeName=="CIRCUMCIRCLE_CENTER"){k.addCircumcenterMidpoint(aj.defEl[0],aj.defEl[1],aj.defEl[2],aj.outputId,aj.outputName)}else{if(aj.typeName=="BISECTOR"){k.addAngleBisector(aj.defEl[0],aj.defEl[1],aj.defEl[2],aj.outputId,aj.outputName)}else{if(aj.typeName=="MIRROR_LINE"){k.addReflection(aj.defEl[1],aj.defEl[0],aj.outputId,aj.outputName)}else{if(aj.typeName=="MIRROR_POINT"){k.addRotation(aj.defEl[0],aj.defEl[1],Math.PI,aj.outputId,aj.outputName)}else{if(aj.typeName=="PARALLELOGRAM_POINT"){if(aj.defEl.length==2){k.addParallelPoint(JXG.GetReferenceFromParameter(aj.defEl[0]).point1,JXG.GetReferenceFromParameter(aj.defEl[0]).point2,aj.defEl[1],aj.outputId,aj.outputName)}else{k.addParallelPoint(aj.defEl[0],aj.defEl[1],aj.defEl[2],aj.outputId,aj.outputName)}}else{if(aj.typeName=="SECTOR"){JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"sectors");var I=[];var R=[];var K=[];var M=[];var ab=[];var Z=[];var B=[];var H=[];var u=[];var G=[];var E=[];for(var aa=0;aa<T.getElementsByTagName("output").length;aa++){I[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("id")[0].firstChild.data;I[aa]=JXG.GeonextReader.changeOriginIds(k,I[aa]);R[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("name")[0];K[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("visible")[0].firstChild.data;M[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("trace")[0].firstChild.data;ab[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("dash")[0].firstChild.data;Z[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("draft")[0].firstChild.data;B[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("strokewidth")[0].firstChild.data;var U=T.getElementsByTagName("output")[aa].getElementsByTagName("color")[0];H[aa]=U.getElementsByTagName("stroke")[0].firstChild.data;u[aa]=U.getElementsByTagName("lighting")[0].firstChild.data;G[aa]=U.getElementsByTagName("fill")[0].firstChild.data;E[aa]=U.getElementsByTagName("label")[0].firstChild.data}var ad=new JXG.Sector(k,aj.defEl[0],aj.defEl[1],aj.defEl[2],[I[0],I[1],I[2],I[3]],[R[0].firstChild.data,R[1].firstChild.data,R[2].firstChild.data,R[3].firstChild.data],aj.id);var af=I[0];k.objects[af].setProperty("strokeColor:"+H[0],"strokeWidth:"+B[0],"fillColor:"+G[0],"highlightStrokeColor:"+u[0],"highlightFillColor:"+G[0],"visible:"+K[0],"dash:"+ab[0],"draft:"+Z[0]);k.objects[af].traced=(M[0]=="false")?false:true;aj.firstArrow=T.getElementsByTagName("output")[0].getElementsByTagName("firstarrow")[0].firstChild.data;aj.lastArrow=T.getElementsByTagName("output")[0].getElementsByTagName("lastarrow")[0].firstChild.data;aj.firstArrow=(aj.firstArrow=="false")?false:true;aj.lastArrow=(aj.lastArrow=="false")?false:true;k.objects[af].setArrow(aj.firstArrow,aj.lastArrow);var J=I[1];aj.fixed=T.getElementsByTagName("output")[1].getElementsByTagName("fix")[0].firstChild.data;k.objects[J].setProperty("strokeColor:"+H[1],"strokeWidth:"+B[1],"fillColor:"+H[1],"highlightStrokeColor:"+u[1],"highlightFillColor:"+u[1],"visible:"+K[1],"fixed:"+aj.fixed,"labelColor:"+E[1],"draft:"+Z[1]);aj.style=T.getElementsByTagName("output")[1].getElementsByTagName("style")[0].firstChild.data;k.objects[J].setStyle(1*aj.style);k.objects[J].traced=(M[1]=="false")?false:true;var C=I[2];var U=T.getElementsByTagName("output")[2].getElementsByTagName("straight")[0];aj.straightFirst=U.getElementsByTagName("first")[0].firstChild.data;aj.straightLast=U.getElementsByTagName("last")[0].firstChild.data;aj.straightFirst=(aj.straightFirst=="false")?false:true;aj.straightLast=(aj.straightLast=="false")?false:true;k.objects[C].setStraight(aj.straightFirst,aj.straightLast);k.objects[C].setProperty("strokeColor:"+H[2],"strokeWidth:"+B[2],"fillColor:"+G[2],"highlightStrokeColor:"+u[2],"highlightFillColor:"+G[2],"visible:"+K[2],"dash:"+ab[2],"draft:"+Z[2]);k.objects[C].traced=(M[2]=="false")?false:true;var v=I[3];U=T.getElementsByTagName("output")[3].getElementsByTagName("straight")[0];aj.straightFirst=U.getElementsByTagName("first")[0].firstChild.data;aj.straightLast=U.getElementsByTagName("last")[0].firstChild.data;aj.straightFirst=(aj.straightFirst=="false")?false:true;aj.straightLast=(aj.straightLast=="false")?false:true;k.objects[v].setStraight(aj.straightFirst,aj.straightLast);k.objects[v].setProperty("strokeColor:"+H[3],"strokeWidth:"+B[3],"fillColor:"+G[3],"highlightStrokeColor:"+u[3],"highlightFillColor:"+G[3],"visible:"+K[3],"dash:"+ab[3],"draft:"+Z[3]);k.objects[v].traced=(M[3]=="false")?false:true}else{if(aj.typeName=="PERPENDICULAR"){var I=[];var R=[];var K=[];var M=[];var ab=[];var Z=[];var B=[];var H=[];var u=[];var G=[];var E=[];for(var aa=0;aa<T.getElementsByTagName("output").length;aa++){I[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("id")[0].firstChild.data;I[aa]=JXG.GeonextReader.changeOriginIds(k,I[aa]);R[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("name")[0];K[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("visible")[0].firstChild.data;M[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("trace")[0].firstChild.data;ab[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("dash")[0].firstChild.data;Z[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("draft")[0].firstChild.data;B[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("strokewidth")[0].firstChild.data;var U=T.getElementsByTagName("output")[aa].getElementsByTagName("color")[0];H[aa]=U.getElementsByTagName("stroke")[0].firstChild.data;u[aa]=U.getElementsByTagName("lighting")[0].firstChild.data;G[aa]=U.getElementsByTagName("fill")[0].firstChild.data;E[aa]=U.getElementsByTagName("label")[0].firstChild.data}aj.outputFixed=T.getElementsByTagName("output")[0].getElementsByTagName("fix")[0].firstChild.data;aj.outputStyle=T.getElementsByTagName("output")[0].getElementsByTagName("style")[0].firstChild.data;k.addPerpendicular(aj.defEl[1],aj.defEl[0],I[1],R[1].firstChild.data,I[0],R[0].firstChild.data);var L=I[0];k.objects[L].setProperty("strokeColor:"+H[0],"strokeWidth:"+B[0],"fillColor:"+H[0],"highlightStrokeColor:"+u[0],"highlightFillColor:"+u[0],"visible:"+K[0],"fixed:"+aj.outputFixed,"labelColor:"+E[0],"draft:"+Z[0]);k.objects[L].setStyle(1*aj.outputStyle);k.objects[L].traced=(M[0]=="false")?false:true;var z=I[1];k.objects[z].setProperty("strokeColor:"+H[1],"strokeWidth:"+B[1],"fillColor:"+G[1],"highlightStrokeColor:"+u[1],"highlightFillColor:"+G[1],"visible:"+K[1],"dash:"+ab[1],"draft:"+Z[1]);k.objects[z].traced=(M[1]=="false")?false:true}else{if(aj.typeName=="ARROW_PARALLEL"){var I=[];var R=[];var K=[];var M=[];var ab=[];var Z=[];var B=[];var H=[];var u=[];var G=[];var E=[];for(var aa=0;aa<T.getElementsByTagName("output").length;aa++){I[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("id")[0].firstChild.data;I[aa]=JXG.GeonextReader.changeOriginIds(k,I[aa]);R[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("name")[0];K[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("visible")[0].firstChild.data;M[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("trace")[0].firstChild.data;ab[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("dash")[0].firstChild.data;Z[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("draft")[0].firstChild.data;B[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("strokewidth")[0].firstChild.data;var U=T.getElementsByTagName("output")[aa].getElementsByTagName("color")[0];H[aa]=U.getElementsByTagName("stroke")[0].firstChild.data;u[aa]=U.getElementsByTagName("lighting")[0].firstChild.data;G[aa]=U.getElementsByTagName("fill")[0].firstChild.data;E[aa]=U.getElementsByTagName("label")[0].firstChild.data}aj.outputFixed=T.getElementsByTagName("output")[1].getElementsByTagName("fix")[0].firstChild.data;aj.outputStyle=T.getElementsByTagName("output")[1].getElementsByTagName("style")[0].firstChild.data;k.addArrowParallel(aj.defEl[1],aj.defEl[0],I[0],I[1],R[0].firstChild.data,R[1].firstChild.data);var F=I[0];k.objects[F].setProperty("strokeColor:"+H[0],"strokeWidth:"+B[0],"fillColor:"+G[0],"highlightStrokeColor:"+u[0],"highlightFillColor:"+G[0],"visible:"+K[0],"dash:"+ab[0],"draft:"+Z[0]);k.objects[F].traced=(M[0]=="false")?false:true;var L=I[1];k.objects[L].setProperty("strokeColor:"+H[1],"strokeWidth:"+B[1],"fillColor:"+H[1],"highlightStrokeColor:"+u[1],"highlightFillColor:"+u[1],"visible:"+K[1],"fixed:"+aj.outputFixed,"labelColor:"+E[1],"draft:"+Z[1]);k.objects[L].setStyle(1*aj.outputStyle);k.objects[L].traced=(M[1]=="false")?false:true}else{if(aj.typeName=="PERPENDICULAR_POINT"){k.addPerpendicularPoint(aj.defEl[1],aj.defEl[0],aj.outputId,aj.outputName)}else{throw ("GEONExT-Element "+aj.typeName+" not yet implemented")}}}}}}}}}}}}}if(aj.typeName=="MIDPOINT"||aj.typeName=="MIRROR_LINE"||aj.typeName=="CIRCUMCIRCLE_CENTER"||aj.typeName=="PERPENDICULAR_POINT"||aj.typeName=="MIRROR_POINT"||aj.typeName=="PARALLELOGRAM_POINT"){aj.outputFixed=T.getElementsByTagName("output")[0].getElementsByTagName("fix")[0].firstChild.data;aj.outputStyle=T.getElementsByTagName("output")[0].getElementsByTagName("style")[0].firstChild.data;k.objects[aj.outputId].setProperty("strokeColor:"+aj.outputColorStroke,"strokeWidth:"+aj.outputStrokewidth,"fillColor:"+aj.outputColorStroke,"highlightStrokeColor:"+aj.outputHighlightStrokeColor,"highlightFillColor:"+aj.outputHighlightStrokeColor,"visible:"+aj.outputVisible,"fixed:"+aj.outputFixed,"labelColor:"+aj.outputColorLabel,"draft:"+aj.outputDraft);k.objects[aj.outputId].setStyle(1*aj.outputStyle);k.objects[aj.outputId].traced=(aj.outputTrace=="false")?false:true}else{if(aj.typeName=="BISECTOR"||aj.typeName=="NORMAL"||aj.typeName=="PARALLEL"){var U=T.getElementsByTagName("output")[0].getElementsByTagName("straight")[0];aj.straightFirst=U.getElementsByTagName("first")[0].firstChild.data;aj.straightLast=U.getElementsByTagName("last")[0].firstChild.data;aj.straightFirst=(aj.straightFirst=="false")?false:true;aj.straightLast=(aj.straightLast=="false")?false:true;k.objects[aj.outputId].setStraight(aj.straightFirst,aj.straightLast);k.objects[aj.outputId].setProperty("strokeColor:"+aj.outputColorStroke,"strokeWidth:"+aj.outputStrokewidth,"fillColor:"+aj.outputColorFill,"highlightStrokeColor:"+aj.outputHighlightStrokeColor,"highlightFillColor:"+aj.outputColorFill,"visible:"+aj.outputVisible,"dash:"+aj.outputDash,"draft:"+aj.outputDraft);k.objects[aj.outputId].traced=(aj.outputTrace=="false")?false:true}else{if(aj.typeName=="CIRCUMCIRCLE"){var I=[];var R=[];var K=[];var M=[];var ab=[];var Z=[];var B=[];var H=[];var u=[];var G=[];var E=[];for(var aa=0;aa<T.getElementsByTagName("output").length;aa++){I[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("id")[0].firstChild.data;I[aa]=JXG.GeonextReader.changeOriginIds(k,I[aa]);R[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("name")[0];K[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("visible")[0].firstChild.data;M[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("trace")[0].firstChild.data;ab[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("dash")[0].firstChild.data;Z[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("draft")[0].firstChild.data;B[aa]=T.getElementsByTagName("output")[aa].getElementsByTagName("strokewidth")[0].firstChild.data;var U=T.getElementsByTagName("output")[aa].getElementsByTagName("color")[0];H[aa]=U.getElementsByTagName("stroke")[0].firstChild.data;u[aa]=U.getElementsByTagName("lighting")[0].firstChild.data;G[aa]=U.getElementsByTagName("fill")[0].firstChild.data;E[aa]=U.getElementsByTagName("label")[0].firstChild.data}aj.outputFixed=T.getElementsByTagName("output")[0].getElementsByTagName("fix")[0].firstChild.data;aj.outputStyle=T.getElementsByTagName("output")[0].getElementsByTagName("style")[0].firstChild.data;var L=I[0];k.objects[L].setProperty("strokeColor:"+H[0],"strokeWidth:"+B[0],"fillColor:"+H[0],"highlightStrokeColor:"+u[0],"highlightFillColor:"+u[0],"visible:"+K[0],"fixed:"+aj.outputFixed,"labelColor:"+E[0],"draft:"+Z[0]);k.objects[L].setStyle(1*aj.outputStyle);k.objects[L].traced=(M[0]=="false")?false:true;var A=I[1];k.objects[A].setProperty("strokeColor:"+H[1],"strokeWidth:"+B[1],"fillColor:"+G[1],"highlightStrokeColor:"+u[1],"highlightFillColor:"+G[1],"visible:"+K[1],"dash:"+ab[1],"draft:"+Z[1]);k.objects[A].traced=(M[1]=="false")?false:true}}}JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"polygon":aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj.dataVertex=[];for(var aa=0;aa<T.getElementsByTagName("data")[0].getElementsByTagName("vertex").length;aa++){aj.dataVertex[aa]=T.getElementsByTagName("data")[0].getElementsByTagName("vertex")[aa].firstChild.data;aj.dataVertex[aa]=JXG.GeonextReader.changeOriginIds(k,aj.dataVertex[aa])}aj.border=[];for(var aa=0;aa<T.getElementsByTagName("border").length;aa++){aj.border[aa]={};var U=T.getElementsByTagName("border")[aa];aj.border[aa].id=U.getElementsByTagName("id")[0].firstChild.data;aj.border[aa].name=U.getElementsByTagName("name")[0].firstChild.data;aj.border[aa].straightFirst=U.getElementsByTagName("straight")[0].getElementsByTagName("first")[0].firstChild.data;aj.border[aa].straightLast=U.getElementsByTagName("straight")[0].getElementsByTagName("last")[0].firstChild.data;aj.border[aa].straightFirst=(aj.border[aa].straightFirst=="false")?false:true;aj.border[aa].straightLast=(aj.border[aa].straightLast=="false")?false:true;aj.border[aa].strokewidth=U.getElementsByTagName("strokewidth")[0].firstChild.data;aj.border[aa].dash=U.getElementsByTagName("dash")[0].firstChild.data;aj.border[aa].visible=U.getElementsByTagName("visible")[0].firstChild.data;aj.border[aa].draft=U.getElementsByTagName("draft")[0].firstChild.data;aj.border[aa].trace=U.getElementsByTagName("trace")[0].firstChild.data;aj.border[aa].colorStroke=U.getElementsByTagName("color")[0].getElementsByTagName("stroke")[0].firstChild.data;aj.border[aa].highlightStrokeColor=U.getElementsByTagName("color")[0].getElementsByTagName("lighting")[0].firstChild.data;aj.border[aa].colorFill=U.getElementsByTagName("color")[0].getElementsByTagName("fill")[0].firstChild.data;aj.border[aa].colorLabel=U.getElementsByTagName("color")[0].getElementsByTagName("label")[0].firstChild.data;aj.border[aa].colorDraft=U.getElementsByTagName("color")[0].getElementsByTagName("draft")[0].firstChild.data}JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"polygone");var V=new JXG.Polygon(k,aj.dataVertex,aj.border,aj.id,aj.name);V.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorFill,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.colorFill,"visible:"+aj.visible,"draft:"+aj.draft,"trace:"+aj.trace);for(aa=0;aa<V.borders.length;aa++){V.borders[aa].setStraight(aj.border[aa].straightFirst,aj.border[aa].straightLast);V.borders[aa].setProperty("strokeColor:"+aj.border[aa].colorStroke,"strokeWidth:"+aj.border[aa].strokewidth,"fillColor:"+aj.border[aa].colorFill,"highlightStrokeColor:"+aj.border[aa].highlightStrokeColor,"highlightFillColor:"+aj.border[aa].colorFill,"visible:"+aj.border[aa].visible,"dash:"+aj.border[aa].dash,"draft:"+aj.border[aa].draft,"trace:"+aj.border[aa].trace)}JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"graph":aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj.funct=T.getElementsByTagName("data")[0].getElementsByTagName("function")[0].firstChild.data;JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"graphs");var ae=new JXG.Curve(k,["x","x",aj.funct],aj.id,aj.name);JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");ae.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:none","highlightStrokeColor:"+aj.highlightStrokeColor);break;case"arrow":aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj=JXG.GeonextReader.readNodes(aj,T,"data");aj=JXG.GeonextReader.readNodes(aj,T,"straight","straight");aj=JXG.GeonextReader.visualProperties(aj,T);aj.first=JXG.GeonextReader.changeOriginIds(k,aj.first);aj.last=JXG.GeonextReader.changeOriginIds(k,aj.last);var ai=new JXG.Line(k,aj.first,aj.last,aj.id,aj.name);ai.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorFill,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.colorFill,"visible:"+aj.visible,"dash:"+aj.dash,"draft:"+aj.draft);ai.setStraight(false,false);ai.setArrow(false,true);ai.traced=(aj.trace=="false")?false:true;JXG.GeonextReader.printDebugMessage("debug",ai,T.nodeName,"OK");break;case"arc":aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj=JXG.GeonextReader.readNodes(aj,T,"data");aj.firstArrow=T.getElementsByTagName("firstarrow")[0].firstChild.data;aj.lastArrow=T.getElementsByTagName("lastarrow")[0].firstChild.data;JXG.GeonextReader.parseImage(k,T.getElementsByTagName("image")[0],"arcs");aj.midpoint=JXG.GeonextReader.changeOriginIds(k,aj.midpoint);aj.angle=JXG.GeonextReader.changeOriginIds(k,aj.angle);aj.radius=JXG.GeonextReader.changeOriginIds(k,aj.radius);var ai=new JXG.Arc(k,aj.midpoint,aj.radius,aj.angle,aj.id,aj.name);ai.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorFill,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.colorFill,"visible:"+aj.visible,"dash:"+aj.dash,"draft:"+aj.draft);ai.traced=(aj.trace=="false")?false:true;aj.firstArrow=(aj.firstArrow=="false")?false:true;aj.lastArrow=(aj.lastArrow=="false")?false:true;ai.setArrow(aj.firstArrow,aj.lastArrow);JXG.GeonextReader.printDebugMessage("debug",ai,T.nodeName,"OK");break;case"angle":aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj=JXG.GeonextReader.readNodes(aj,T,"data");aj.txt=JXG.GeonextReader.subtreeToString(T.getElementsByTagName("text")[0]);var ai=new JXG.Angle(k,aj.first,aj.middle,aj.last,aj.radius,aj.txt,aj.id,aj.name);ai.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:"+aj.colorFill,"highlightStrokeColor:"+aj.highlightStrokeColor,"highlightFillColor:"+aj.colorFill,"visible:"+aj.visible,"dash:"+aj.dash);JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"text":if(aj.id.match(/oldVersion/)){break}aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.visualProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj=JXG.GeonextReader.readNodes(aj,T,"data");aj.mpStr=JXG.GeonextReader.subtreeToString(T.getElementsByTagName("data")[0].getElementsByTagName("mp")[0]);aj.mpStr=aj.mpStr.replace(/<\/?mp>/g,"");try{if(T.getElementsByTagName("data")[0].getElementsByTagName("parent")[0].firstChild){aj.parent=T.getElementsByTagName("data")[0].getElementsByTagName("parent")[0].firstChild.data}}catch(ag){}aj.condition=T.getElementsByTagName("condition")[0].firstChild.data;aj.content=T.getElementsByTagName("content")[0].firstChild.data;aj.fix=T.getElementsByTagName("fix")[0].firstChild.data;aj.autodigits=T.getElementsByTagName("digits")[0].firstChild.data;aj.parent=JXG.GeonextReader.changeOriginIds(k,aj.parent);var ah=new JXG.Text(k,aj.mpStr,aj.parent,[aj.x,aj.y],aj.id,aj.name,aj.autodigits);ah.setProperty("labelColor:"+aj.colorLabel);if(aj.visible=="false"){ah.hideElement()}break;case"parametercurve":aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj.functionx=T.getElementsByTagName("functionx")[0].firstChild.data;aj.functiony=T.getElementsByTagName("functiony")[0].firstChild.data;aj.min=T.getElementsByTagName("min")[0].firstChild.data;aj.max=T.getElementsByTagName("max")[0].firstChild.data;var ae=new JXG.Curve(k,["t",aj.functionx,aj.functiony,aj.min,aj.max],aj.id,aj.name);ae.setProperty("strokeColor:"+aj.colorStroke,"strokeWidth:"+aj.strokewidth,"fillColor:none","highlightStrokeColor:"+aj.highlightStrokeColor);JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;case"tracecurve":aj.tracepoint=T.getElementsByTagName("tracepoint")[0].firstChild.data;aj.traceslider=T.getElementsByTagName("traceslider")[0].firstChild.data;JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"<b>ERR</b>");break;case"group":aj=JXG.GeonextReader.boardProperties(aj,T);aj=JXG.GeonextReader.colorProperties(aj,T);aj=JXG.GeonextReader.firstLevelProperties(aj,T);aj.members=[];for(var aa=0;aa<T.getElementsByTagName("data")[0].getElementsByTagName("member").length;aa++){aj.members[aa]=T.getElementsByTagName("data")[0].getElementsByTagName("member")[aa].firstChild.data;aj.members[aa]=JXG.GeonextReader.changeOriginIds(k,aj.members[aa])}var ae=new JXG.Group(k,aj.id,aj.name,aj.members);JXG.GeonextReader.printDebugMessage("debug",aj,T.nodeName,"OK");break;default:if(T.nodeName!="#text"){}}delete (aj)})(q)}k.addConditions(n.conditions)};this.decodeString=function(b){if(b.indexOf("<GEONEXT>")<0){var a=(new JXG.Gunzip(Base64.decodeAsArray(b))).unzip();if(a==""){return b}else{return a}}else{return b}};this.prepareString=function(a){if(a.indexOf("GEONEXT")<0){a=JXG.GeonextReader.decodeString(a)}a=JXG.GeonextReader.fixXML(a);return a};this.fixXML=function(e){var a=["active","angle","animate","animated","arc","area","arrow","author","autodigits","axis","back","background","board","border","bottom","buttonsize","cas","circle","color","comment","composition","condition","conditions","content","continuous","control","coord","coordinates","cross","cs","dash","data","description","digits","direction","draft","editable","elements","event","file","fill","first","firstarrow","fix","fontsize","free","full","function","functionx","functiony","GEONEXT","graph","grid","group","height","id","image","info","information","input","intersection","item","jsf","label","last","lastarrow","left","lefttoolbar","lighting","line","loop","max","maximized","member","middle","midpoint","min","modifier","modus","mp","mpx","multi","name","onpolygon","order","origin","output","overline","parametercurve","parent","point","pointsnap","polygon","position","radius","radiusnum","radiusvalue","right","section","selectedlefttoolbar","showconstruction","showcoord","showinfo","showunit","showx","showy","size","slider","snap","speed","src","start","stop","straight","stroke","strokewidth","style","term","text","top","trace","tracecurve","type","unit","value","VERSION","vertex","viewport","visible","width","wot","x","xooy","xval","y","yval","zoom"];e=JXG.escapeHTML(e);var c=a.join("|");var b="&lt;(/?("+c+"))&gt;";var d=new RegExp(b,"g");e=e.replace(d,"<$1>");e=e.replace(/(<content>.*)<arc>(.*<\/content>)/g,"$1&lt;arc&gt;$2");e=e.replace(/(<mp>.*)<arc>(.*<\/mpx>)/g,"$1&lt;arc&gt;$2");e=e.replace(/(<mpx>.*)<arc>(.*<\/mpx>)/g,"$1&lt;arc&gt;$2");return e}};JXG.GeogebraReader=new function(){this.changeOriginIds=function(a,b){if((b=="gOOe0")||(b=="gXOe0")||(b=="gYOe0")||(b=="gXLe0")||(b=="gYLe0")){return a.id+b}else{return b}};this.colorProperties=function(b,a){b.colorR=a.getElementsByTagName("objColor")[0].attributes.r.value;b.colorG=a.getElementsByTagName("objColor")[0].attributes.g.value;b.colorB=a.getElementsByTagName("objColor")[0].attributes.b.value;b.colorA=a.getElementsByTagName("objColor")[0].attributes.alpha.value;return b};this.firstLevelProperties=function(e,c){var a=c.childNodes;for(var d=0;d<a.length;d++){if(a[d].firstChild!=null&&a[d].nodeName!="data"&&a[d].nodeName!="straight"){var b=a[d].nodeName;e[b]=a[d].firstChild.data}}return e};this.boardProperties=function(b,a){return b};this.defProperties=function(b,a){if(a.nodeType==3||a.nodeType==8){return null}b.ident=a.nodeName;if(b.ident=="text"||b.ident=="intersection"||b.ident=="composition"){b.label=""}else{b.label=a.getElementsByTagName("name")[0].firstChild.data}b.id=a.getElementsByTagName("id")[0].firstChild.data;return b};this.visualProperties=function(b,a){b.visible=a.getElementsByTagName("show")[0].attributes.object.value;b.visibleLabel=a.getElementsByTagName("show")[0].attributes.label.value;b.labelX=(a.getElementsByTagName("labelOffset")[0])?a.getElementsByTagName("labelOffset")[0].attributes.x.value:false;b.labelY=(a.getElementsByTagName("labelOffset")[0])?a.getElementsByTagName("labelOffset")[0].attributes.y.value:false;b.trace=(a.getElementsByTagName("trace")[0])?a.getElementsByTagName("trace")[0].attributes.val.value:false;b.fixed=(a.getElementsByTagName("fix")[0])?a.getElementsByTagName("fix")[0].attributes.val.value:false;b.x=(a.getElementsByTagName("coords")[0])?a.getElementsByTagName("coords")[0].attributes.x.value:a.getElementsByTagName("startPoint")[0].attributes.x.value;b.y=(a.getElementsByTagName("coords")[0])?a.getElementsByTagName("coords")[0].attributes.y.value:a.getElementsByTagName("startPoint")[0].attributes.y.value;b.z=(a.getElementsByTagName("coords")[0])?a.getElementsByTagName("coords")[0].attributes.z.value:a.getElementsByTagName("startPoint")[0].attributes.z.value;return b};this.readNodes=function(g,d,b,e){var c;var a=d.getElementsByTagName(b)[0].childNodes;for(var f=0;f<a.length;f++){if(a[f].firstChild!=null){if(e!=null){c=e+a[f].nodeName.capitalize()}else{c=a[f].nodeName}g[c]=a[f].firstChild.data}}return g};this.subtreeToString=function(a){try{return(new XMLSerializer()).serializeToString(a)}catch(b){return a.xml}return null};this.readConditions=function(f,d){d.conditions="";if(f!=null){for(var b=0;b<f.getElementsByTagName("data").length;b++){var c;var g;var a=f.getElementsByTagName("data")[b];c=JXG.GeogebraReader.subtreeToString(a);d.conditions+=c}}};this.getElement=function(a,c){for(var e=0;e<a.getElementsByTagName("construction").length;e++){for(var b=0;b<a.getElementsByTagName("construction")[e].getElementsByTagName("element").length;b++){var d=a.getElementsByTagName("construction")[e].getElementsByTagName("element")[b];if(c==d.attributes.label.value){return d}}}};this.writeBoard=function(b,d){var g=b.getElementsByTagName("euclidianView")[0];d.origin={};d.origin.usrCoords=[1,0,0];d.origin.scrCoords=[1,1*g.getElementsByTagName("coordSystem")[0].attributes.xZero.value,1*g.getElementsByTagName("coordSystem")[0].attributes.yZero.value];d.unitX=(g.getElementsByTagName("coordSystem")[0].attributes.scale)?1*g.getElementsByTagName("coordSystem")[0].attributes.scale.value:1;d.unitY=(g.getElementsByTagName("coordSystem")[0].attributes.yscale)?1*g.getElementsByTagName("coordSystem")[0].attributes.yscale.value:1;d.fontSize=1*b.getElementsByTagName("gui")[0].getElementsByTagName("font")[0].attributes.size.value;JXG.JSXGraph.boards[d.id]=d;d.initGeonextBoard();d.renderer.enhancedRendering=false;var a=(g.getElementsByTagName("evSettings")[0].attributes.pointCapturing.value=="true")?d.snapToGrid=true:null;var c=(g.getElementsByTagName("evSettings")[0].attributes.grid.value=="true")?d.renderer.drawGrid(d):null;if(g.getElementsByTagName("evSettings")[0].attributes.axes.value=="true"){var f=d.createElement("axis",[[0,0],[1,0]]);var e=d.createElement("axis",[[0,0],[0,1]])}};this.writeElement=function(a,f,d,c,b,h){var j={};j.type=d.attributes.type.value;j.label=d.attributes.label.value;if(!b){switch(j.type.toLowerCase()){case"point":j=JXG.GeogebraReader.boardProperties(j,d);j=JXG.GeogebraReader.colorProperties(j,d);j=JXG.GeogebraReader.visualProperties(j,d);j.pointSize=(d.getElementsByTagName("pointSize")[0])?d.getElementsByTagName("pointSize")[0].attributes.val.value:0;try{p=f.createElement("point",[j.x,j.y,j.z],{name:j.label,style:j.pointSize});$("debug").innerHTML+="* <b>Point:</b> "+j.label+"<br>\n";return true}catch(g){$("debug").innerHTML+="* <b>Err:</b> Point "+j.label+" "+j.id+"<br>\n";return false}break;case"angle":break;case"numeric":break;case"function":break;case"conic":break;case"vector":break;case"circlepart":break;case"image":break;case"text":j=JXG.GeogebraReader.boardProperties(j,d);j=JXG.GeogebraReader.colorProperties(j,d);j=JXG.GeogebraReader.visualProperties(j,d);try{$("debug").innerHTML+="* <b>Text:</b> "+j.label+"<br>\n";l=f.createElement("text",h,[j.x,j.y,j.z],{name:j.label});return true}catch(g){$("debug").innerHTML+="* <b>Err:</b> Text "+j.label+" "+j.id+"<br>\n";return false}break;default:return false;break}}else{switch(b.toLowerCase()){case"segment":j=JXG.GeogebraReader.boardProperties(j,d);j=JXG.GeogebraReader.colorProperties(j,d);j=JXG.GeogebraReader.visualProperties(j,d);try{$("debug").innerHTML+="* <b>Segment:</b> ("+j.label+") First: "+c[0]+", Last: "+c[1]+"<br>\n";l=f.createElement("line",c,{strokeColor:"#00ff00",strokeWidth:2});l.setStraight(false,false);return true}catch(g){$("debug").innerHTML+="* <b>Err:</b> Segment "+j.label+" "+j.id+"<br>\n";return false}break;case"line":j=JXG.GeogebraReader.boardProperties(j,d);j=JXG.GeogebraReader.colorProperties(j,d);j=JXG.GeogebraReader.visualProperties(j,d);try{$("debug").innerHTML+="* <b>Line:</b> ("+j.label+") First: "+c[0]+", Last: "+c[1]+"<br>\n";l=f.createElement("line",c,{strokeColor:"#00ff00",strokeWidth:2});return true}catch(g){$("debug").innerHTML+="* <b>Err:</b> Line "+j.label+" "+j.id+"<br>\n";return false}break;case"orthogonalline":j=JXG.GeogebraReader.boardProperties(j,d);j=JXG.GeogebraReader.colorProperties(j,d);j=JXG.GeogebraReader.visualProperties(j,d);try{$("debug").innerHTML+="* <b>Orthogonalline:</b> First: "+c[0]+", Last: "+c[1]+"<br>\n";l=f.createElement("line",[c[0],c[1]],{strokeColor:"#00ff00",strokeWidth:2});l.setStraight(false,false);return true}catch(g){$("debug").innerHTML+="* <b>Err:</b> Orthogonalline "+j.label+" "+j.id+"<br>\n";return false}break;case"polygon":j=JXG.GeogebraReader.boardProperties(j,d);j=JXG.GeogebraReader.colorProperties(j,d);j=JXG.GeogebraReader.visualProperties(j,d);try{$("debug").innerHTML+="* <b>Polygon:</b> First: "+c[0]+", Last: "+c[1]+"<br>\n";l=f.createElement("polygon",c,{strokeColor:"#00ff00",strokeWidth:2});l.setStraight(false,false);return true}catch(g){$("debug").innerHTML+="* <b>Err:</b> Polygon "+j.label+" "+j.id+"<br>\n";return false}break;case"ellipse":break;case"intersect":break;case"linebisector":break;case"midpoint":break;case"angularbisector":break;case"function":break;case"numeric":break;case"vector":break;case"unitvector":break;case"distance":break;case"tangent":break;case"slope":break;case"corner":break;case"mirror":break;case"integral":break;case"circle":break;case"radius":break;case"polar":break;case"derivative":break;case"root":break;case"conic":break;case"center":break;case"extremum":break;case"turningpoint":break;case"arc":break;case"angle":j=JXG.GeogebraReader.boardProperties(j,d);j=JXG.GeogebraReader.colorProperties(j,d);j=JXG.GeogebraReader.visualProperties(j,d);try{$("debug").innerHTML+="* <b>Angle:</b> First: "+c[0]+", Middle: "+c[1]+", Last: "+c[2]+"<br>\n";l=f.createElement("angle",c,{strokeColor:"#00ff00",strokeWidth:2});l.setStraight(false,false);return true}catch(g){$("debug").innerHTML+="* <b>Err:</b> Angle "+j.label+" "+j.id+"<br>\n";return false}break;case"semicircle":break;case"rotate":break;case"uppersum":break;case"lowersum":break;case"dilate":break;default:return false;break}}};this.readGeogebra=function(r,h){var b;var k;var e;JXG.GeogebraReader.writeBoard(r,h);var f=r.getElementsByTagName("construction");for(var o=0;o<f.length;o++){var d=[];var a=f[o].getElementsByTagName("command");for(var q=0;q<a.length;q++){k=a[q];var j=[],g=[];for(e=0;e<k.getElementsByTagName("input")[0].attributes.length;e++){b=k.getElementsByTagName("input")[0].attributes[e].value;j[e]=JXG.GeogebraReader.getElement(r,b);g[e]=b;d[b]=(!d[b])?JXG.GeogebraReader.writeElement(r,h,j[e]):d[b]}var c=[];for(e=0;e<k.getElementsByTagName("output")[0].attributes.length;e++){b=k.getElementsByTagName("output")[0].attributes[e].value;c[e]=JXG.GeogebraReader.getElement(r,b);d[b]=(!d[b])?JXG.GeogebraReader.writeElement(r,h,c[e],g,k.attributes.name.value):d[b]}}var m=f[o].getElementsByTagName("expression");for(q=0;q<m.length;q++){k=m[q];b=k.attributes.label.value;var n=k.attributes.exp.value;var j=JXG.GeogebraReader.getElement(r,b);d[b]=(!d[b])?JXG.GeogebraReader.writeElement(r,h,j,false,false,n):d[b]}}}};JXG.IntergeoReader=new function(){this.board=null;this.objects={};this.readIntergeo=function(a,b){this.board=b;this.board.origin={};this.board.origin.usrCoords=[1,0,0];this.board.origin.scrCoords=[1,400,300];this.board.unitX=30;this.board.unitY=30;this.readElements(a.getElementsByTagName("elements"));this.readConstraints(a.getElementsByTagName("constraints"))};this.readElements=function(a){for(var b=0;b<a[0].childNodes.length;b++){(function(c){var d=a[0].childNodes[c];if(d.nodeType>1){return}if(d.nodeName=="point"){JXG.IntergeoReader.addPoint(d)}else{if(d.nodeName=="line"){JXG.IntergeoReader.storeLine(d)}else{}}})(b)}};this.addPoint=function(e){var b=0;var d;var f=e.childNodes[b];while(f.nodeType>1){b++;f=e.childNodes[b]}if(f.nodeName=="homogeneous_coordinates"){var g=[];for(var a=0;a<f.childNodes.length;a++){if(f.childNodes[a].nodeType==1){if(f.childNodes[a].nodeName=="double"){g.push(f.childNodes[a].firstChild.data)}else{}}}for(a=0;a<3;a++){g[a]=parseFloat(g[a])}d=this.board.createElement("point",[g[2],g[0],g[1]],{name:e.getAttribute("id")})}else{if(f.nodeName=="euclidean_coordinates"){var g=[];for(var a=0;a<f.childNodes.length;a++){if(f.childNodes[a].nodeType==1){g.push(f.childNodes[a].firstChild.data)}}d=this.board.createElement("point",[g[0],g[1]],{name:e.getAttribute("id")})}else{if(f.nodeName=="polar_coordinates"){var g=[];for(var a=0;a<f.childNodes.length;a++){if(f.childNodes[a].nodeType==1){g.push(f.childNodes[a].firstChild.data)}}d=this.board.createElement("point",[g[0]*Math.cos(g[1]),g[0]*Math.sin(g[1])],{name:e.getAttribute("id")})}else{return}}}this.objects[e.getAttribute("id")]=d};this.storeLine=function(d){this.objects[d.getAttribute("id")]={id:d.getAttribute("id"),coords:null};var b=0;var e=d.childNodes[b];while(e.nodeType>1){b++;e=d.childNodes[b]}if(e.nodeName=="homogeneous_coordinates"){var f=[];for(var a=0;a<e.childNodes.length;a++){if(e.childNodes[a].nodeType==1){if(e.childNodes[a].nodeName=="double"){f.push(parseFloat(e.childNodes[a].firstChild.data))}else{}}}this.objects[d.getAttribute("id")].coords=f}};this.readConstraints=function(a){for(var b=0;b<a[0].childNodes.length;b++){(function(c){var d=a[0].childNodes[c];if(d.nodeType>1){return}if(d.nodeName=="line_through_two_points"){JXG.IntergeoReader.addLineThroughTwoPoints(d)}else{if(d.nodeName=="line_parallel_to_line_through_point"){JXG.IntergeoReader.addLineParallelToLineThroughPoint(d)}else{if(d.nodeName=="line_perpendicular_to_line_through_point"){JXG.IntergeoReader.addLinePerpendicularToLineThroughPoint(d)}else{if(d.nodeName=="point_intersection_of_two_lines"){JXG.IntergeoReader.addPointIntersectionOfTwoLines(d)}else{if(d.nodeName=="free_point"){}else{if(d.nodeName=="free_line"){JXG.IntergeoReader.addFreeLine(d)}else{if(d.nodeName=="point_on_line"){JXG.IntergeoReader.addPointOnLine(d)}else{if(d.nodeName=="angular_bisector_of_three_points"){JXG.IntergeoReader.addAngularBisectorOfThreePoints(d)}else{}}}}}}}}})(b)}};this.readParams=function(b){var c=[];for(var a=0;a<b.childNodes.length;a++){if(b.childNodes[a].nodeType==1){c.push(b.childNodes[a].firstChild.data)}}return c};this.addLineThroughTwoPoints=function(b){var c=JXG.IntergeoReader.readParams(b);var a=this.board.createElement("line",[this.objects[c[1]],this.objects[c[2]]],{name:c[0]});this.objects[c[0]]=a};this.addLineParallelToLineThroughPoint=function(b){var c=JXG.IntergeoReader.readParams(b);var a=this.board.createElement("parallel",[this.objects[c[1]].id,this.objects[c[2]].id],{name:c[0]});this.objects[c[0]]=a};this.addLinePerpendicularToLineThroughPoint=function(b){var c=JXG.IntergeoReader.readParams(b);var a=this.board.createElement("perpendicular",[this.objects[c[1]].id,this.objects[c[2]].id],{name:c[0]});a[0].setProperty("straightFirst:true","straightLast:true");a[1].setProperty("visible:false");this.objects[c[0]]=a[0]};this.addPointIntersectionOfTwoLines=function(a){var b=JXG.IntergeoReader.readParams(a);this.objects[b[0]].addConstraint([this.board.intersectionFunc(this.objects[b[1]],this.objects[b[2]],0)])};this.addFreeLine=function(g){var h=JXG.IntergeoReader.readParams(g);var e=this.objects[h[0]].coords[0];var d=this.objects[h[0]].coords[1];var j=this.objects[h[0]].coords[2];var f=this.board.createElement("line",[j,e,d],{name:h[0],id:h[0]});this.objects[h[0]]=f};this.addPointOnLine=function(b){var c=JXG.IntergeoReader.readParams(b);var a=JXG.GetReferenceFromParameter(this.board,c[0]);a.makeGlider(this.objects[c[1]]);this.objects[c[0]]=a};this.addAngularBisectorOfThreePoints=function(b){var c=JXG.IntergeoReader.readParams(b);var a=this.board.createElement("bisector",[c[1],c[2],c[3]],{name:c[0],id:c[0]});a.setProperty("straightFirst:false","straightLast:true");this.objects[c[0]]=a}};JXG.JSXGraph=new function(e){this.licenseText="JSXGraph v0.71 Copyright (C) see http://jsxgraph.org";this.rendererType="";this.boards={};this.elements={};var f;var b;if((e=="undefined")||(e==null)||(e=="")){f=navigator.appVersion.match(/MSIE (\d\.\d)/);b=(navigator.userAgent.toLowerCase().indexOf("opera")!=-1);if((!f)||(b)){this.rendererType="svg"}else{this.rendererType="vml";function c(g){document.body.scrollLeft;document.body.scrollTop}document.onmousemove=c}}else{this.rendererType=e}var a=JXG.rendererFiles[this.rendererType].split(",");for(var d=0;d<a.length;d++){(function(g){JXG.require(JXG.requirePath+g+".js")})(a[d])}this.initBoard=function(j,h){var m;if(typeof h=="undefined"){h={}}var u=((typeof h.originX)=="undefined"?150:h.originX);var t=((typeof h.originY)=="undefined"?150:h.originY);var s=((typeof h.zoom)=="undefined"?1:h.zoom);var r=s*((typeof h.zoomX)=="undefined"?1:h.zoomX);var q=s*((typeof h.zoomY)=="undefined"?1:h.zoomY);var o=((typeof h.unitX)=="undefined"?50:h.unitX);var n=((typeof h.unitY)=="undefined"?50:h.unitY);var g=JXG.getDimensions(j);if(this.rendererType=="svg"){m=new JXG.SVGRenderer(document.getElementById(j))}else{if(this.rendererType=="vml"){m=new JXG.VMLRenderer(document.getElementById(j))}else{m=new JXG.SilverlightRenderer(document.getElementById(j),g.width,g.height)}}var k=new JXG.Board(j,m,"",[u,t],1,1,o,n,g.width,g.height);this.boards[k.id]=k;k.initGeonextBoard();if((typeof h.axis!="undefined")&&h.axis){k.createElement("axis",[[0,0],[1,0]],{});k.createElement("axis",[[0,0],[0,1]],{})}if((typeof h.grid!="undefined")&&h.grid){k.renderer.drawGrid(k)}if(true){k.renderer.drawZoomBar(k)}return k};this.loadBoardFromFile=function(k,g,n){var m;if(this.rendererType=="svg"){m=new JXG.SVGRenderer(document.getElementById(k))}else{m=new JXG.VMLRenderer(document.getElementById(k))}var j=JXG.getDimensions(k);var h=new JXG.Board(k,m,"",[150,150],1,1,50,50,j.width,j.height);h.beforeLoad();JXG.FileReader.parseFileContent(g,h,n);if(true){h.renderer.drawZoomBar(h)}this.boards[h.id]=h;return h};this.loadBoardFromString=function(k,g,n){var m;if(this.rendererType=="svg"){m=new JXG.SVGRenderer(document.getElementById(k))}else{m=new JXG.VMLRenderer(document.getElementById(k))}var j=JXG.getDimensions(k);var h=new JXG.Board(k,m,"",[150,150],1,1,50,50,j.width,j.height);h.beforeLoad();JXG.FileReader.parseString(g,h,n);if(true){h.renderer.drawZoomBar(h)}this.boards[h.id]=h;return h};this.freeBoard=function(h){if(typeof(h)=="string"){h=this.boards[h]}JXG.removeEvent(document,"mousedown",h.mouseDownListener);JXG.removeEvent(document,"mouseup",h.mouseUpListener);JXG.removeEvent(h.containerObj,"mousemove",h.mouseMoveListener);for(var g in h.objects){h.removeObject(h.objects[g])}h.containerObj.innerHTML="";for(var g in h.objects){delete (h.objects[g])}delete (h.renderer);delete (h.algebra);delete (this.boards[h.id])};this.registerElement=function(g,h){g=g.toLowerCase();this.elements[g]=h};this.unregisterElement=function(g){delete (this.elements[g])}};JXG.GetReferenceFromParameter=function(b,a){if(typeof(a)=="string"){if(b.objects[a]!=null){a=b.objects[a]}else{if(b.elementsByName[a]!=null){a=b.elementsByName[a]}}}return a};JXG.IsString=function(a){return typeof a=="string"};JXG.IsNumber=function(a){return typeof a=="number"};JXG.IsFunction=function(a){return typeof a=="function"};JXG.IsArray=function(a){return a!=null&&typeof a=="object"&&"splice" in a&&"join" in a};JXG.IsPoint=function(a){if(typeof a=="object"){return(a.elementClass==JXG.OBJECT_CLASS_POINT)}return false};JXG.createEvalFunction=function(b,e,g){var c=[];for(var a=0;a<g;a++){if(typeof e[a]=="string"){var d=b.algebra.geonext2JS(e[a]);d=d.replace(/this\.board\./g,"board.");c[a]=new Function("","return "+(d)+";")}}return function(h){var f=e[h];if(typeof f=="string"){return c[h]()}else{if(typeof f=="function"){return f()}else{if(typeof f=="number"){return f}}}return 0}};JXG.getDimensions=function(f){var e=document.getElementById(f);var h=e.style.display;if(h!="none"&&h!=null){return{width:e.offsetWidth,height:e.offsetHeight}}var c=e.style;var j=c.visibility;var g=c.position;var b=c.display;c.visibility="hidden";c.position="absolute";c.display="block";var a=e.clientWidth;var d=e.clientHeight;c.display=b;c.position=g;c.visibility=j;return{width:a,height:d}};JXG.addEvent=function(e,c,b,a){var d=function(){return b.apply(a,arguments)};if(typeof Prototype!="undefined"&&typeof Prototype.Browser!="undefined"){Event.observe(e,c,d)}else{$(e).bind(c,d)}};JXG.bind=function(b,a){return function(){return b.apply(a,arguments)}};JXG.removeEvent=function(c,b,a){if(typeof Prototype!="undefined"&&typeof Prototype.Browser!="undefined"){Event.stopObserving(c,b,a)}else{$(c).unbind(b,a)}};JXG.getPosition=function(b){var a=0;var c=0;if(!b){var b=window.event}if(b.pageX||b.pageY){a=b.pageX;c=b.pageY}else{if(b.clientX||b.clientY){a=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}return[a,c]};JXG.getOffset=function(a){if(typeof Prototype!="undefined"&&typeof Prototype.Browser!="undefined"){return Element.cumulativeOffset(a)}else{var b=$(a).offset();return[b.left,b.top]}};JXG.getStyle=function(b,a){if(typeof Prototype!="undefined"&&typeof Prototype.Browser!="undefined"){return $(b).getStyle(a)}else{if(typeof $(b).attr(a)!="undefined"){return $(b).attr(a)}else{return $(b).css(a)}}};JXG.keys=function(a){var b=[];for(var c in a){b.push(c)}return b};JXG.escapeHTML=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};JXG.unescapeHTML=function(a){return a.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")};JXG.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()};JXG.OBJECT_TYPE_ARC=1330921795;JXG.OBJECT_TYPE_ARROW=1330921815;JXG.OBJECT_TYPE_AXIS=1330921816;JXG.OBJECT_TYPE_TICKS=1330926680;JXG.OBJECT_TYPE_CIRCLE=1330922316;JXG.OBJECT_TYPE_CURVE=1330923344;JXG.OBJECT_TYPE_IMAGE=1330926157;JXG.OBJECT_TYPE_LINE=1330924622;JXG.OBJECT_TYPE_POINT=1330925652;JXG.OBJECT_TYPE_SLIDER=1330926404;JXG.OBJECT_TYPE_CAS=1330922320;JXG.OBJECT_TYPE_POLYGON=1330925657;JXG.OBJECT_TYPE_SECTOR=1330926403;JXG.OBJECT_TYPE_TEXT=1330926661;JXG.OBJECT_TYPE_ANGLE=1330921799;JXG.OBJECT_TYPE_INTERSECTION=1330926158;JXG.OBJECT_CLASS_POINT=1;JXG.OBJECT_CLASS_LINE=2;JXG.OBJECT_CLASS_CIRCLE=3;JXG.OBJECT_CLASS_CURVE=4;JXG.OBJECT_CLASS_AREA=5;JXG.OBJECT_CLASS_OTHER=6;JXG.GeometryElement=function(){this.board=null;this.id="";this.needsUpdate=true;this.name="";this.visProp={};this.isReal=true;this.visProp.dash=0;this.childElements={};this.notExistingParents={};this.traced=false;this.traces={};this.numTraces=0;this.transformations=[];this.baseElement=null;this.descendants={};this.ancestors={};this.stdform=[1,0,0,0,1,1,0,0];this.afterFirstUpdate=false;this.needsRegularUpdate=true};JXG.GeometryElement.prototype.init=function(b,c,a){if(typeof(b)=="string"){b=JXG.JSXGraph.boards[b]}this.board=b;this.id=c;if((a!=null)&&(typeof a!="undefined")){a=a}else{a=this.board.generateName(this)}this.board.elementsByName[a]=this;this.name=a;this.visProp.strokeColor=this.board.options.elements.color.strokeColor;this.visProp.highlightStrokeColor=this.board.options.elements.color.highlightStrokeColor;this.visProp.fillColor=this.board.options.elements.color.fillColor;this.visProp.highlightFillColor=this.board.options.elements.color.highlightFillColor;this.visProp.strokeWidth=this.board.options.elements.strokeWidth;this.visProp.strokeOpacity=this.board.options.elements.color.strokeOpacity;this.visProp.highlightStrokeOpacity=this.board.options.elements.color.highlightStrokeOpacity;this.visProp.fillOpacity=this.board.options.elements.color.fillOpacity;this.visProp.highlightFillOpacity=this.board.options.elements.color.highlightFillOpacity;this.visProp.draft=this.board.options.elements.draft.draft};JXG.GeometryElement.prototype.addChild=function(c){this.childElements[c.id]=c;this.addDescendants(c);c.ancestors[this.id]=this;for(var b in this.descendants){this.descendants[b].ancestors[this.id]=this;for(var a in this.ancestors){this.descendants[b].ancestors[this.ancestors[a].id]=this.ancestors[a]}}for(var b in this.ancestors){for(var a in this.descendants){this.ancestors[b].descendants[this.descendants[a].id]=this.descendants[a]}}};JXG.GeometryElement.prototype.addDescendants=function(a){this.descendants[a.id]=a;for(el in a.childElements){this.addDescendants(a.childElements[el])}};JXG.GeometryElement.prototype.update=function(){if(this.traced){this.cloneToBackground(true)}};JXG.GeometryElement.prototype.updateRenderer=function(){};JXG.GeometryElement.prototype.hideElement=function(){this.visProp.visible=false;this.board.renderer.hide(this);if(this.label!=null){this.label.hiddenByParent=true;if(this.label.show){this.board.renderer.hide(this.label);this.label.show=true}}};JXG.GeometryElement.prototype.showElement=function(){this.visProp.visible=true;this.board.renderer.show(this);if(this.label!=null&&this.label.hiddenByParent){this.label.hiddenByParent=false;if(this.label.show){this.board.renderer.show(this.label)}}};JXG.GeometryElement.prototype.setProperty=function(){var c;var d;var g;for(var f=0;f<arguments.length;f++){var b=arguments[f];if(typeof b=="string"){g=b.split(":")}else{if(!JXG.IsArray(b)){for(var e in b){this.setProperty([e,b[e]])}return}else{g=b}}switch(g[0].replace(/\s+/g).toLowerCase()){case"strokewidth":this.visProp.strokeWidth=g[1];this.board.renderer.setObjectStrokeWidth(this,this.visProp.strokeWidth);break;case"strokecolor":c=g[1];if(c.length=="9"&&c.substr(0,1)=="#"){d=c.substr(7,2);c=c.substr(0,7)}else{d="FF"}this.visProp.strokeColor=c;this.visProp.strokeOpacity=parseInt(d.toUpperCase(),16)/255;this.board.renderer.setObjectStrokeColor(this,this.visProp.strokeColor,this.visProp.strokeOpacity);break;case"fillcolor":c=g[1];if(c.length=="9"&&c.substr(0,1)=="#"){d=c.substr(7,2);c=c.substr(0,7)}else{d="FF"}this.visProp.fillColor=c;this.visProp.fillOpacity=parseInt(d.toUpperCase(),16)/255;this.board.renderer.setObjectFillColor(this,this.visProp.fillColor,this.visProp.fillOpacity);break;case"highlightstrokecolor":c=g[1];if(c.length=="9"&&c.substr(0,1)=="#"){d=c.substr(7,2);c=c.substr(0,7)}else{d="FF"}this.visProp.highlightStrokeColor=c;this.visProp.highlightStrokeOpacity=parseInt(d.toUpperCase(),16)/255;break;case"highlightfillcolor":c=g[1];if(c.length=="9"&&c.substr(0,1)=="#"){d=c.substr(7,2);c=c.substr(0,7)}else{d="FF"}this.visProp.highlightFillColor=c;this.visProp.highlightFillOpacity=parseInt(d.toUpperCase(),16)/255;break;case"fillopacity":this.visProp.fillOpacity=g[1];this.board.renderer.setObjectFillColor(this,this.visProp.fillColor,this.visProp.fillOpacity);break;case"strokeopacity":this.visProp.strokeOpacity=g[1];this.board.renderer.setObjectStrokeColor(this,this.visProp.strokeColor,this.visProp.strokeOpacity);break;case"highlightfillopacity":this.visProp.highlightFillOpacity=g[1];break;case"strokeopacity":this.visProp.highlightStrokeOpacity=g[1];break;case"labelcolor":c=g[1];if(c.length=="9"&&c.substr(0,1)=="#"){d=c.substr(7,2);c=c.substr(0,7)}else{d="FF"}if(d=="00"){if(this.label!=null){this.label.hideElement()}}if(this.label!=null){this.label.color=c;this.board.renderer.setLabelColor(this.label)}if(this.type==JXG.OBJECT_TYPE_TEXT){this.visProp.strokeColor=c;this.board.renderer.setObjectStrokeColor(this,this.visProp.strokeColor,1)}break;case"visible":if(g[1]=="false"||g[1]==false){this.visProp.visible=false;this.hideElement()}else{if(g[1]=="true"||g[1]==true){this.visProp.visible=true;this.showElement()}}break;case"dash":this.setDash(g[1]);break;case"trace":if(g[1]=="false"||g[1]==false){this.traced=false}else{if(g[1]=="true"||g[1]==true){this.traced=true}}break;case"style":this.setStyle(1*g[1]);break;case"fixed":this.fixed=(g[1]=="false")?false:true;break;case"draft":if(g[1]=="false"||g[1]==false){if(this.visProp.draft==true){this.visProp.draft=false;this.board.renderer.removeDraft(this)}}else{if(g[1]=="true"||g[1]==true){this.visProp.draft=true;this.board.renderer.setDraft(this)}}break;case"straightfirst":if(g[1]=="false"||g[1]==false){this.visProp.straightFirst=false}else{if(g[1]=="true"||g[1]==true){this.visProp.straightFirst=true}}this.setStraight(this.visProp.straightFirst,this.visProp.straightLast);break;case"straightlast":if(g[1]=="false"||g[1]==false){this.visProp.straightLast=false}else{if(g[1]=="true"||g[1]==true){this.visProp.straightLast=true}}this.setStraight(this.visProp.straightFirst,this.visProp.straightLast);break;case"firstarrow":if(g[1]=="false"||g[1]==false){this.visProp.firstArrow=false}else{if(g[1]=="true"||g[1]==true){this.visProp.firstArrow=true}}this.setArrow(this.visProp.firstArrow,this.visProp.lastArrow);break;case"lastarrow":if(g[1]=="false"||g[1]==false){this.visProp.lastArrow=false}else{if(g[1]=="true"||g[1]==true){this.visProp.lastArrow=true}}this.setArrow(this.visProp.firstArrow,this.visProp.lastArrow);break;case"curvetype":this.curveType=g[1];break;case"fontsize":this.visProp.fontSize=g[1];break;case"insertticks":if(this.type==JXG.OBJECT_TYPE_TICKS){var a=this.insertTicks;this.insertTicks=true;if(g[1]=="false"||g[1]==false){this.insertTicks=false}if(a!=this.insertTicks){this.calculateTicksCoordinates()}}break;case"drawlabels":if(this.type==JXG.OBJECT_TYPE_TICKS){var a=this.drawLabels;this.drawLabels=true;if(g[1]=="false"||g[1]==false){this.drawLabels=false}if(a!=this.drawLabels){this.calculateTicksCoordinates()}}break;case"drawzero":if(this.type==JXG.OBJECT_TYPE_TICKS){var a=this.drawZero;this.drawZero=true;if(g[1]=="false"||g[1]==false){this.drawZero=false}if(a!=this.drawZero){this.calculateTicksCoordinates()}}break;case"minorticks":if(this.type==JXG.OBJECT_TYPE_TICKS){var a=this.minorTicks;if((g[1]!=null)&&(g[1]>0)){this.minorTicks=g[1]}if(a!=this.minorTicks){this.calculateTicksCoordinates()}}break;case"majortickheight":if(this.type==JXG.OBJECT_TYPE_TICKS){var a=this.majorHeight;if((g[1]!=null)&&(g[1]>0)){this.majorHeight=g[1]}if(a!=this.majorHeight){this.calculateTicksCoordinates()}}break;case"minortickheight":if(this.type==JXG.OBJECT_TYPE_TICKS){var a=this.minorHeight;if((g[1]!=null)&&(g[1]>0)){this.minorHeight=g[1]}if(a!=this.minorHeight){this.calculateTicksCoordinates()}}break}}};JXG.GeometryElement.prototype.setDash=function(a){this.visProp.dash=a;this.board.renderer.setObjectDash(this)};JXG.GeometryElement.prototype.prepareUpdate=function(){this.needsUpdate=true;return;for(var a in this.childElements){if(this.board.objects[a]!=undefined){this.childElements[a].prepareUpdate()}else{delete (this.childElements[a])}}};JXG.GeometryElement.prototype.remove=function(){this.board.renderer.remove(document.getElementById(this.id))};JXG.GeometryElement.prototype.getTextAnchor=function(){return new JXG.Coords(JXG.COORDS_BY_USER,[0,0],this.board)};JXG.GeometryElement.prototype.setStyle=function(a){};JXG.GeometryElement.prototype.setStraight=function(a,b){};JXG.GeometryElement.prototype.setArrow=function(b,a){};JXG.GeometryElement.prototype.clearTrace=function(){for(var a in this.traces){this.board.renderer.remove(this.traces[a])}this.numTraces=0};JXG.GeometryElement.prototype.cloneToBackground=function(a){return};JXG.GeometryElement.prototype.normalize=function(){this.stdform=this.board.algebra.normalize(this.stdform)};JXG.GeometryElement.prototype.toJSON=function(){var b='{"name":'+this.name;b+=', "id":'+this.id;var c=[];for(var a in this.visProp){if(this.visProp[a]!=null){c.push('"'+a+'":'+this.visProp[a])}}b+=', "visProp":{'+c.toString()+"}";b+="}";return b};JXG.COORDS_BY_USER=1;JXG.COORDS_BY_SCREEN=2;JXG.Coords=function(c,b,a){this.board=a;this.usrCoords=[1,0,0];this.scrCoords=[1,0,0];if(c==JXG.COORDS_BY_USER){if(b.length<=2){this.usrCoords[1]=b[0];this.usrCoords[2]=b[1]}else{this.usrCoords[0]=b[0];this.usrCoords[1]=b[1];this.usrCoords[2]=b[2];this.normalizeUsrCoords()}this.usr2screen()}else{this.scrCoords[1]=b[0];this.scrCoords[2]=b[1];this.screen2usr()}};JXG.Coords.prototype.normalizeUsrCoords=function(){var a=0.000001;if(Math.abs(this.usrCoords[0])>a){this.usrCoords[1]/=this.usrCoords[0];this.usrCoords[2]/=this.usrCoords[0];this.usrCoords[0]=1}};JXG.Coords.prototype.usr2screen=function(){this.scrCoords[0]=Math.round(this.usrCoords[0]);this.scrCoords[1]=Math.round(this.usrCoords[0]*this.board.origin.scrCoords[1]+this.usrCoords[1]*this.board.unitX*this.board.zoomX);this.scrCoords[2]=Math.round(this.usrCoords[0]*this.board.origin.scrCoords[2]-this.usrCoords[2]*this.board.unitY*this.board.zoomY)};JXG.Coords.prototype.screen2usr=function(){this.usrCoords[0]=1;this.usrCoords[1]=(this.scrCoords[1]-this.board.origin.scrCoords[1])/(this.board.unitX*this.board.zoomX);this.usrCoords[2]=(this.board.origin.scrCoords[2]-this.scrCoords[2])/(this.board.unitY*this.board.zoomY)};JXG.Coords.prototype.distance=function(d,c){var b=0;if(d==JXG.COORDS_BY_USER){for(var a=0;a<=this.board.dimension;a++){b+=(this.usrCoords[a]-c.usrCoords[a])*(this.usrCoords[a]-c.usrCoords[a])}}else{for(var a=0;a<=this.board.dimension;a++){b+=(this.scrCoords[a]-c.scrCoords[a])*(this.scrCoords[a]-c.scrCoords[a])}}return Math.sqrt(b)};JXG.Coords.prototype.setCoordinates=function(b,a){if(b==JXG.COORDS_BY_USER){if(a.length==2){this.usrCoords[0]=1;this.usrCoords[1]=a[0];this.usrCoords[2]=a[1]}else{this.usrCoords[0]=a[0];this.usrCoords[1]=a[1];this.usrCoords[2]=a[2];this.normalizeUsrCoords()}this.usr2screen()}else{this.scrCoords[1]=a[0];this.scrCoords[2]=a[1];this.screen2usr()}};JXG.Point=function(c,d,e,b,a){this.constructor();this.type=JXG.OBJECT_TYPE_POINT;this.elementClass=JXG.OBJECT_CLASS_POINT;this.init(c,e,b);if(d==null){d=[0,0]}this.coords=new JXG.Coords(JXG.COORDS_BY_USER,d,this.board);this.initialCoords=new JXG.Coords(JXG.COORDS_BY_USER,d,this.board);this.label=new JXG.Label(this.board,this.name,this.coords,this.id+"Label");this.label.show=a;if(!a){this.label.hiddenByParent=true}this.fixed=false;this.position=null;this.onPolygon=false;this.visProp.style=this.board.options.point.style;this.r=this.board.options.precision.hasPoint;this.visProp.fillColor=this.board.options.point.fillColor;this.visProp.highlightFillColor=this.board.options.point.highlightFillColor;this.visProp.strokeColor=this.board.options.point.strokeColor;this.visProp.highlightStrokeColor=this.board.options.point.highlightStrokeColor;this.visProp.visible=a;this.slideObject=null;this.group=[];this.id=this.board.addPoint(this)};JXG.Point.prototype=new JXG.GeometryElement();JXG.Point.prototype.hasPoint=function(b,c){var a=this.coords.scrCoords;return((Math.abs(a[1]-b)<this.r+2)&&(Math.abs(a[2]-c))<this.r+2)};JXG.Point.prototype.updateConstraint=function(){};JXG.Point.prototype.update=function(e){if(!this.needsUpdate){return}if(typeof e=="undefined"){e=false}if(this.traced){this.cloneToBackground(true)}if(this.type==JXG.OBJECT_TYPE_GLIDER){if(this.slideObject.type==JXG.OBJECT_TYPE_CIRCLE){if(e){this.coords.setCoordinates(JXG.COORDS_BY_USER,[this.slideObject.midpoint.X()+Math.cos(this.position),this.slideObject.midpoint.Y()+Math.sin(this.position)]);this.coords=this.board.algebra.projectPointToCircle(this,this.slideObject)}else{this.coords=this.board.algebra.projectPointToCircle(this,this.slideObject);this.position=this.board.algebra.rad([this.slideObject.midpoint.X()+1,this.slideObject.midpoint.Y()],this.slideObject.midpoint,this)}}else{if(this.slideObject.type==JXG.OBJECT_TYPE_LINE){this.coords=this.board.algebra.projectPointToLine(this,this.slideObject);var d=this.slideObject.point1.coords;var h=this.slideObject.point2.coords;if(e){this.coords.setCoordinates(JXG.COORDS_BY_USER,[d.usrCoords[1]+this.position*(h.usrCoords[1]-d.usrCoords[1]),d.usrCoords[2]+this.position*(h.usrCoords[2]-d.usrCoords[2])])}else{var j=1;var o=d.distance(JXG.COORDS_BY_USER,this.coords);var b=d.distance(JXG.COORDS_BY_USER,h);var g=h.distance(JXG.COORDS_BY_USER,this.coords);if(((o>b)||(g>b))&&(o<g)){j=-1}this.position=j*o/b}var c=this.slideObject.point1.coords.scrCoords;var n=this.slideObject.point2.coords.scrCoords;var f;if(this.slideObject.getSlope()==0){f=1}else{f=2}var k=this.coords.scrCoords[f];if(!this.slideObject.visProp.straightFirst){if(c[f]<n[f]){if(k<c[f]){this.coords=this.slideObject.point1.coords}}else{if(c[f]>n[f]){if(k>c[f]){this.coords=this.slideObject.point1.coords}}}}if(!this.slideObject.visProp.straightLast){if(c[f]<n[f]){if(k>n[f]){this.coords=this.slideObject.point2.coords}}else{if(c[f]>n[f]){if(k<n[f]){this.coords=this.slideObject.point2.coords}}}}if(this.onPolygon){var q=this.slideObject.point1.coords;var m=this.slideObject.point2.coords;if(Math.abs(this.coords.scrCoords[1]-q.scrCoords[1])<this.r&&Math.abs(this.coords.scrCoords[2]-q.scrCoords[2])<this.r){var a=this.slideObject.parentPolygon;for(var f=0;f<a.borders.length;f++){if(this.slideObject==a.borders[f]){this.slideObject=a.borders[(f-1+a.borders.length)%a.borders.length];break}}}else{if(Math.abs(this.coords.scrCoords[1]-m.scrCoords[1])<this.r&&Math.abs(this.coords.scrCoords[2]-m.scrCoords[2])<this.r){var a=this.slideObject.parentPolygon;for(var f=0;f<a.borders.length;f++){if(this.slideObject==a.borders[f]){this.slideObject=a.borders[(f+1+a.borders.length)%a.borders.length];break}}}}}}else{if(this.slideObject.type==JXG.OBJECT_TYPE_CURVE){this.updateConstraint();this.coords=this.board.algebra.projectPointToCurve(this,this.slideObject)}}}}if(this.type==JXG.OBJECT_TYPE_CAS){this.updateConstraint()}this.updateTransform();this.needsUpdate=false};JXG.Point.prototype.updateRenderer=function(){if(this.visProp.visible){var a=this.isReal;this.isReal=(isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]))?false:true;this.isReal=(Math.abs(this.coords.usrCoords[0])>this.board.algebra.eps)?this.isReal:false;if(this.isReal){if(a!=this.isReal){this.board.renderer.show(this);if(this.label.show){this.board.renderer.show(this.label)}}this.board.renderer.updatePoint(this)}else{if(a!=this.isReal){this.board.renderer.hide(this);if(this.label.show){this.board.renderer.hide(this.label)}}}}if(this.label.show&&this.isReal){this.label.setCoordinates(this.coords);this.board.renderer.updateLabel(this.label)}};JXG.Point.prototype.X=function(){return this.coords.usrCoords[1]};JXG.Point.prototype.Y=function(){return this.coords.usrCoords[2]};JXG.Point.prototype.Z=function(){return this.coords.usrCoords[0]};JXG.Point.prototype.XEval=function(){return this.coords.usrCoords[1]};JXG.Point.prototype.YEval=function(){return this.coords.usrCoords[2]};JXG.Point.prototype.ZEval=function(){return this.coords.usrCoords[0]};JXG.Point.prototype.Dist=function(a){return this.coords.distance(JXG.COORDS_BY_USER,a.coords)};JXG.Point.prototype.setPositionDirectly=function(d,a,c){var b=this.coords;this.coords=new JXG.Coords(d,[a,c],this.board);if(this.group.length!=0){this.group[this.group.length-1].dX=this.coords.scrCoords[1]-b.scrCoords[1];this.group[this.group.length-1].dY=this.coords.scrCoords[2]-b.scrCoords[2];this.group[this.group.length-1].update(this)}else{this.update()}};JXG.Point.prototype.setPositionByTransform=function(e,a,d){var c=this.coords;var b=this.board.createElement("transform",[a,d],{type:"translate"});if(this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix){this.transformations[this.transformations.length-1].melt(b)}else{this.addTransform(this,b)}if(this.group.length!=0){}else{this.update()}};JXG.Point.prototype.setPosition=function(c,a,b){this.setPositionByTransform(c,a,b)};JXG.Point.prototype.makeGlider=function(a){this.slideObject=JXG.GetReferenceFromParameter(this.board,a);this.type=JXG.OBJECT_TYPE_GLIDER;this.slideObject.addChild(this);this.needsUpdate=true;this.update()};JXG.Point.prototype.addConstraint=function(e){this.type=JXG.OBJECT_TYPE_CAS;var f=this.board.elementsByName;var g=[];var a;for(var d=0;d<e.length;d++){var b=e[d];if(typeof b=="string"){var c=this.board.algebra.geonext2JS(b);g[d]=new Function("","return "+c+";")}else{if(typeof b=="function"){g[d]=b}else{if(typeof b=="number"){g[d]=function(h){return function(){return h}}(b)}}}}if(e.length==1){this.updateConstraint=function(){this.coords=g[0]()};if(!this.board.isSuspendedUpdate){this.update()}return}else{if(e.length==2){this.XEval=g[0];this.YEval=g[1];a="this.coords.setCoordinates(JXG.COORDS_BY_USER,[this.XEval(),this.YEval()]);";this.updateConstraint=new Function("",a)}else{this.ZEval=g[0];this.XEval=g[1];this.YEval=g[2];a="this.coords.setCoordinates(JXG.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]);";this.updateConstraint=new Function("",a)}}if(!this.board.isSuspendedUpdate){this.update()}return};JXG.Point.prototype.addConstraintOld=function(e,c){this.type=JXG.OBJECT_TYPE_CAS;var d=this.board.elementsByName;if(c==null){this.updateConstraint=function(){this.coords=e()};if(!this.board.isSuspendedUpdate){this.update()}return}if(typeof e=="string"){var b=this.board.algebra.geonext2JS(e);this.XEval=new Function("","return "+b+";")}else{if(typeof e=="function"){this.XEval=e}else{if(typeof e=="number"){this.XEval=function(){return e}}}}if(typeof c=="string"){var f=this.board.algebra.geonext2JS(c);this.YEval=new Function("","return "+f+";")}else{if(typeof c=="function"){this.YEval=c}else{if(typeof c=="number"){this.YEval=function(){return c}}}}var a="this.coords.setCoordinates(JXG.COORDS_BY_USER,[this.XEval(),this.YEval()]);";this.updateConstraint=new Function("",a);if(!this.board.isSuspendedUpdate){this.update()}return};JXG.Point.prototype.updateTransform=function(){if(this.transformations.length==0||this.baseElement==null){return}if(this===this.baseElement){var b=this.transformations[0].apply(this.baseElement,"self")}else{var b=this.transformations[0].apply(this.baseElement)}this.coords.setCoordinates(JXG.COORDS_BY_USER,[b[1],b[2]]);for(var a=1;a<this.transformations.length;a++){b=this.transformations[a].apply(this);this.coords.setCoordinates(JXG.COORDS_BY_USER,[b[1],b[2]])}};JXG.Point.prototype.addTransform=function(c,a){if(this.transformations.length==0){this.baseElement=c}var d;if(JXG.IsArray(a)){d=a}else{d=[a]}for(var b=0;b<d.length;b++){this.transformations.push(d[b])}};JXG.Point.prototype.startAnimation=function(a,b){if((this.type==JXG.OBJECT_TYPE_GLIDER)&&(typeof this.intervalCode=="undefined")){this.intervalCode=window.setInterval("JXG.JSXGraph.boards['"+this.board.id+"'].objects['"+this.id+"'].animate("+a+", "+b+")",250);if(typeof this.intervalCount=="undefined"){this.intervalCount=0}}};JXG.Point.prototype.stopAnimation=function(){if(typeof this.intervalCode!="undefined"){window.clearInterval(this.intervalCode);delete (this.intervalCode)}};JXG.Point.prototype.animate=function(m,f){this.intervalCount++;if(this.intervalCount>f){this.intervalCount=0}if(this.slideObject.type==JXG.OBJECT_TYPE_LINE){var b=this.slideObject.point1.coords.distance(JXG.COORDS_BY_SCREEN,this.slideObject.point2.coords);var j=this.slideObject.getSlope();var g;var e;if(j!="INF"){var d=Math.atan(j);g=Math.round((this.intervalCount/f)*b*Math.cos(d));e=Math.round((this.intervalCount/f)*b*Math.sin(d))}else{g=0;e=Math.round((this.intervalCount/f)*b)}var c;var k=1;if(m<0){c=this.slideObject.point2;if(this.slideObject.point2.coords.scrCoords[1]-this.slideObject.point1.coords.scrCoords[1]>0){k=-1}else{if(this.slideObject.point2.coords.scrCoords[1]-this.slideObject.point1.coords.scrCoords[1]==0){if(this.slideObject.point2.coords.scrCoords[2]-this.slideObject.point1.coords.scrCoords[2]>0){k=-1}}}}else{c=this.slideObject.point1;if(this.slideObject.point1.coords.scrCoords[1]-this.slideObject.point2.coords.scrCoords[1]>0){k=-1}else{if(this.slideObject.point1.coords.scrCoords[1]-this.slideObject.point2.coords.scrCoords[1]==0){if(this.slideObject.point1.coords.scrCoords[2]-this.slideObject.point2.coords.scrCoords[2]>0){k=-1}}}}this.coords.setCoordinates(JXG.COORDS_BY_SCREEN,[c.coords.scrCoords[1]+k*g,c.coords.scrCoords[2]+k*e])}else{if(this.slideObject.type==JXG.OBJECT_TYPE_CURVE){var a;if(m>0){a=Math.round(this.intervalCount/f*this.board.canvasWidth)}else{a=Math.round((f-this.intervalCount)/f*this.board.canvasWidth)}this.coords.setCoordinates(JXG.COORDS_BY_SCREEN,[a,0]);this.coords=this.board.algebra.projectPointToCurve(this,this.slideObject)}else{if(this.slideObject.type==JXG.OBJECT_TYPE_CIRCLE){var d;if(m<0){d=this.intervalCount/f*2*Math.PI}else{d=(f-this.intervalCount)/f*2*Math.PI}var h=this.slideObject.getRadius();this.coords.setCoordinates(JXG.COORDS_BY_USER,[this.slideObject.midpoint.coords.usrCoords[1]+h*Math.cos(d),this.slideObject.midpoint.coords.usrCoords[2]+h*Math.sin(d)])}}}this.board.update(this)};JXG.Point.prototype.setStyle=function(a){this.visProp.style=a;this.board.renderer.changePointStyle(this)};JXG.Point.prototype.remove=function(){this.board.renderer.remove(document.getElementById(this.label.id));if(this.visProp.style>=3&&this.visProp.style<=9){this.board.renderer.remove(document.getElementById(this.id))}else{this.board.renderer.remove(document.getElementById(this.id+"_x1"));this.board.renderer.remove(document.getElementById(this.id+"_x2"))}};JXG.Point.prototype.getTextAnchor=function(){return this.coords};JXG.Point.prototype.cloneToBackground=function(a){var b={};b.id=this.id+"T"+this.numTraces;this.numTraces++;b.coords=this.coords;b.visProp=this.visProp;b.elementClass=JXG.OBJECT_CLASS_POINT;this.board.renderer.drawPoint(b);if((this.visProp.style>=3)&&(this.visProp.style<=9)){this.traces[b.id]=document.getElementById(b.id)}else{this.traces[b.id+"_x1"]=document.getElementById(b.id+"_x1");this.traces[b.id+"_x2"]=document.getElementById(b.id+"_x2")}delete b};JXG.createPoint=function(e,b,f){var d;var a=false;for(var c=0;c<b.length;c++){if(typeof b[c]=="function"||typeof b[c]=="string"){a=true}}if(!a){if((JXG.IsNumber(b[0]))&&(JXG.IsNumber(b[1]))){d=new JXG.Point(e,b,f.id,f.name,(f.visible==undefined)||e.algebra.str2Bool(f.visible));if(f.slideObject!=null){d.makeGlider(f.slideObject)}else{d.baseElement=d}}else{if((typeof b[0]=="object")&&(typeof b[1]=="object")){d=new JXG.Point(e,[0,0],f.id,f.name,(f.visible==undefined)||e.algebra.str2Bool(f.visible));d.addTransform(b[0],b[1])}else{throw ("JSXGraph error: Can't create point with parent types '"+(typeof b[0])+"' and '"+(typeof b[1])+"'.")}}}else{d=new JXG.Point(e,[0,0],f.id,f.name,(f.visible==undefined)||e.algebra.str2Bool(f.visible));d.addConstraint(b)}return d};JXG.createGlider=function(c,a,d){var b;if(a.length==1){b=new JXG.Point(c,[0,0],d.id,d.name,(d.visible==undefined)||c.algebra.str2Bool(d.visible))}else{b=c.createElement("point",a.slice(0,-1),d)}b.makeGlider(a[a.length-1]);return b};JXG.JSXGraph.registerElement("point",JXG.createPoint);JXG.JSXGraph.registerElement("glider",JXG.createGlider);JXG.Line=function(b,d,c,e,a){this.constructor();this.init(b,e,a);this.type=JXG.OBJECT_TYPE_LINE;this.elementClass=JXG.OBJECT_CLASS_LINE;this.point1=JXG.GetReferenceFromParameter(this.board,d);this.point2=JXG.GetReferenceFromParameter(this.board,c);this.image=null;this.imageTransformMatrix=[[1,0,0],[0,1,0],[0,0,1]];this.r=this.board.options.precision.hasPoint;this.visProp.fillColor=this.board.options.line.fillColor;this.visProp.highlightFillColor=this.board.options.line.highlightFillColor;this.visProp.strokeColor=this.board.options.line.strokeColor;this.visProp.highlightStrokeColor=this.board.options.line.highlightStrokeColor;this.visProp.straightFirst=this.board.options.line.straightFirst;this.visProp.straightLast=this.board.options.line.straightLast;this.visProp.visible=true;this.visProp.firstArrow=this.board.options.line.firstArrow;this.visProp.lastArrow=this.board.options.line.lastArrow;this.ticks=[];this.defaultTicks=null;this.parentPolygon=null;this.id=this.board.addLine(this);this.point1.addChild(this);this.point2.addChild(this);this.update()};JXG.Line.prototype=new JXG.GeometryElement;JXG.Line.prototype.hasPoint=function(m,j){var k=new JXG.Coords(JXG.COORDS_BY_SCREEN,[m,j],this.board);var o=false;var d;var e=this.getSlope();var h=this.getRise();if(this.visProp.straightFirst&&this.visProp.straightLast){var g=[];g[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/(this.board.unitX*this.board.zoomX)+this.stdform[2]*this.board.origin.scrCoords[2]/(this.board.unitY*this.board.zoomY);g[1]=this.stdform[1]/(this.board.unitX*this.board.zoomX);g[2]=this.stdform[2]/(-this.board.unitY*this.board.zoomY);var r=this.board.algebra.innerProduct(g,k.scrCoords,3);return(Math.abs(r)<0.5)?true:false}else{var b=this.point1.coords.scrCoords;var n=this.point2.coords.scrCoords;if(e!="INF"){for(d=-this.r;d<this.r;d++){o=o|(Math.abs(j-(e*(m+d)+h))<this.r)}if(o){var q=k.distance(JXG.COORDS_BY_SCREEN,this.point1.coords);var f=k.distance(JXG.COORDS_BY_SCREEN,this.point2.coords);var a=this.point1.coords.distance(JXG.COORDS_BY_SCREEN,this.point2.coords);if((q>a)||(f>a)){if(q<f){if(!this.visProp.straightFirst){o=false}}else{if(!this.visProp.straightLast){o=false}}}}}else{o=(Math.abs(m-b[1])<this.r);if(o){if(!this.visProp.straightFirst){if(b[2]<n[2]){if(j<b[2]){o=false}}else{if(b[2]>n[2]){if(j>b[2]){o=false}}}}if(!this.visProp.straightLast){if(b[2]<n[2]){if(j>n[2]){o=false}}else{if(b[2]>n[2]){if(j<n[2]){o=false}}}}}}}return o};JXG.Line.prototype.hasPointOld=function(j,g){var b=this.point1.coords.scrCoords;var k=this.point2.coords.scrCoords;var h=new JXG.Coords(JXG.COORDS_BY_SCREEN,[j,g],this.board);var m=false;var c;var d=this.getSlope();var f=this.getRise();if(this.visProp.straightFirst&&this.visProp.straightLast){if(d!="INF"){for(c=-this.r;c<this.r;c++){m=m|(Math.abs(g-(d*(j+c)+f))<this.r)}}else{m=(Math.abs(j-b[1])<this.r)}}else{if(d!="INF"){for(c=-this.r;c<this.r;c++){m=m|(Math.abs(g-(d*(j+c)+f))<this.r)}if(m){var n=h.distance(JXG.COORDS_BY_SCREEN,this.point1.coords);var e=h.distance(JXG.COORDS_BY_SCREEN,this.point2.coords);var a=this.point1.coords.distance(JXG.COORDS_BY_SCREEN,this.point2.coords);if((n>a)||(e>a)){if(n<e){if(!this.visProp.straightFirst){m=false}}else{if(!this.visProp.straightLast){m=false}}}}}else{m=(Math.abs(j-b[1])<this.r);if(m){if(!this.visProp.straightFirst){if(b[2]<k[2]){if(g<b[2]){m=false}}else{if(b[2]>k[2]){if(g>b[2]){m=false}}}}if(!this.visProp.straightLast){if(b[2]<k[2]){if(g>k[2]){m=false}}else{if(b[2]>k[2]){if(g<k[2]){m=false}}}}}}}return m};JXG.Line.prototype.update=function(){if(this.needsUpdate){if(true||!this.board.geonextCompatibilityMode){this.updateStdform()}for(var a=0;a<this.ticks.length;a++){if(typeof this.ticks[a]!="undefined"){this.ticks[a].calculateTicksCoordinates()}}}if(this.traced){this.cloneToBackground(true)}};JXG.Line.prototype.updateStdform=function(){var a=[];a=this.board.algebra.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=a[0];this.stdform[1]=a[1];this.stdform[2]=a[2];this.stdform[3]=0;this.normalize()};JXG.Line.prototype.updateRenderer=function(){if(this.needsUpdate&&this.visProp.visible){var a=this.isReal;this.isReal=(isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2]))?false:true;if(this.isReal){if(a!=this.isReal){this.board.renderer.show(this)}this.board.renderer.updateLine(this)}else{if(a!=this.isReal){this.board.renderer.hide(this)}}this.needsUpdate=false}};JXG.Line.prototype.getRise=function(){var a=this.point1.coords.scrCoords;var b=this.point2.coords.scrCoords;return Math.round((a[2]-(a[1]*(b[2]-a[2]))/(b[1]-a[1])))};JXG.Line.prototype.getSlope=function(){var c=this.point1.coords.scrCoords;var a=this.point2.coords.scrCoords;var d=this.point1.coords.usrCoords;var b=this.point2.coords.usrCoords;if(Math.abs(a[1]-c[1])<=Math.abs(b[1]-d[1])){a=b;c=d}if(Math.abs(a[1]-c[1])>=JXG.Math.eps){return((a[2]-c[2])/(a[1]-c[1]))}else{return"INF"}};JXG.Line.prototype.setStraight=function(a,b){this.visProp.straightFirst=a;this.visProp.straightLast=b;this.board.renderer.updateLine(this)};JXG.Line.prototype.setArrow=function(b,a){this.visProp.firstArrow=b;this.visProp.lastArrow=a;this.board.renderer.updateLine(this)};JXG.Line.prototype.getTextAnchor=function(){return new JXG.Coords(JXG.COORDS_BY_USER,[0.5*(this.point2.X()-this.point1.X()),0.5*(this.point2.Y()-this.point1.Y())],this.board)};JXG.Line.prototype.cloneToBackground=function(b){var d={};d.id=this.id+"T"+this.numTraces;this.numTraces++;d.point1=this.point1;d.point2=this.point2;d.stdform=this.stdform;d.board={};d.board.unitX=this.board.unitX;d.board.unitY=this.board.unitY;d.board.zoomX=this.board.zoomX;d.board.zoomY=this.board.zoomY;d.board.origin=this.board.origin;d.board.canvasHeight=this.board.canvasHeight;d.board.canvasWidth=this.board.canvasWidth;d.board.dimension=this.board.dimension;d.board.algebra=this.board.algebra;d.visProp=this.visProp;var a=this.getSlope();var c=this.getRise();d.getSlope=function(){return a};d.getRise=function(){return c};this.board.renderer.enhancedRendering=true;this.board.renderer.drawLine(d);this.board.renderer.enhancedRendering=false;this.traces[d.id]=document.getElementById(d.id);delete d};JXG.Line.prototype.addTransform=function(a){var c;if(JXG.IsArray(a)){c=a}else{c=[a]}for(var b=0;b<c.length;b++){this.point1.transformations.push(c[b]);this.point2.transformations.push(c[b])}};JXG.Line.prototype.setPosition=function(d,a,c){var b=this.board.createElement("transform",[a,c],{type:"translate"});if(this.point1.transformations.length>0&&this.point1.transformations[this.point1.transformations.length-1].isNumericMatrix){this.point1.transformations[this.point1.transformations.length-1].melt(b)}else{this.point1.addTransform(this.point1,b)}if(this.point2.transformations.length>0&&this.point2.transformations[this.point2.transformations.length-1].isNumericMatrix){this.point2.transformations[this.point2.transformations.length-1].melt(b)}else{this.point2.addTransform(this.point2,b)}};JXG.Line.prototype.X=function(j){j*=Math.PI;var n=this.stdform[1];var m=this.stdform[2];var k=this.stdform[0];var g=n*Math.cos(j)+m*Math.sin(j);var f=k;var d=Math.sqrt(g*g+f*f);var e=-f/d;var h=g/d;if(Math.abs(h)<this.board.algebra.eps){h=1}return e*Math.cos(j)/h};JXG.Line.prototype.Y=function(j){j*=Math.PI;var n=this.stdform[1];var m=this.stdform[2];var k=this.stdform[0];var g=n*Math.cos(j)+m*Math.sin(j);var f=k;var d=Math.sqrt(g*g+f*f);var e=-f/d;var h=g/d;if(Math.abs(h)<this.board.algebra.eps){h=1}return e*Math.sin(j)/h};JXG.Line.prototype.Z=function(h){h*=Math.PI;var f=this.stdform[1];var e=this.stdform[2];var m=this.stdform[0];var d=f*Math.cos(h)+e*Math.sin(h);var k=m;var g=Math.sqrt(d*d+k*k);var j=d/g;if(Math.abs(j)>=this.board.algebra.eps){return 1}else{return 0}};JXG.Line.prototype.minX=function(){return 0};JXG.Line.prototype.maxX=function(){return 1};JXG.Line.prototype.addTicks=function(a){if(a.id==""||typeof a.id=="undefined"){a.id=this.id+"_ticks_"+(this.ticks.length+1)}this.board.renderer.drawTicks(a);this.ticks.push(a);this.ticks[this.ticks.length-1].updateRenderer();return a.id};JXG.Line.prototype.removeAllTicks=function(){for(var a=this.ticks.length;a>0;a--){this.board.renderer.remove(this.ticks[a-1].rendNode)}this.ticks=new Array()};JXG.Line.prototype.removeTicks=function(c){if(this.defaultTicks!=null&&this.defaultTicks==c){this.defaultTicks=null}for(var b=this.ticks.length;b>0;b--){if(this.ticks[b-1]==c){this.board.renderer.remove(this.ticks[b-1].rendNode);for(var a=0;a<this.ticks[b-1].ticks.length;a++){if(this.ticks[b-1].labels[a]!=null){if(this.ticks[b-1].labels[a].show){this.board.renderer.remove(this.ticks[b-1].labels[a].rendNode)}}}delete (this.ticks[b-1])}}};JXG.createLine=function(e,j,d){var a;if((j[0].elementClass==JXG.OBJECT_CLASS_POINT)&&(j[1].elementClass==JXG.OBJECT_CLASS_POINT)){var m=JXG.GetReferenceFromParameter(e,j[0]);var k=JXG.GetReferenceFromParameter(e,j[1]);a=new JXG.Line(e,m.id,k.id,d.id,d.name)}else{if(j.length==3){var g=[];for(var b=0;b<3;b++){if(typeof j[b]=="number"){g[b]=function(c){return function(){return c}}(j[b])}else{if(typeof j[b]=="function"){g[b]=j[b]}else{throw ("Can't create line with parent types '"+(typeof j[0])+"' and '"+(typeof j[1])+"' and '"+(typeof j[2])+"'.");return}}}var m=e.createElement("point",[function(){return 0},function(){return g[2]()},function(){return -g[1]()}],{visible:false,name:" "});var k=e.createElement("point",[function(){return g[2]()*g[2]()+g[1]()*g[1]()},function(){return -g[1]()*g[0]()+g[2]()},function(){return -g[2]()*g[0]()-g[1]()}],{visible:false,name:" "});a=new JXG.Line(e,m.id,k.id,d.id,d.name)}else{if((j.length==2)&&(j[0].length>1&&j[1].length>1)){var h=new JXG.Point(e,j[0],"","",false);var f=new JXG.Point(e,j[1],"","",false);h.fixed=true;f.fixed=true;a=new JXG.Line(e,h.id,f.id,d.id,d.name)}else{throw ("Can't create line with parent types '"+(typeof j[0])+"' and '"+(typeof j[1])+"'.")}}}return a};JXG.JSXGraph.registerElement("line",JXG.createLine);JXG.createSegment=function(c,a,d){var b;if(d==null){d=new Object()}d.straightFirst=false;d.straightLast=false;b=c.createElement("line",a,d);return b};JXG.JSXGraph.registerElement("segment",JXG.createSegment);JXG.createArrow=function(d,b,a){var c;if((JXG.IsPoint(b[0]))&&(JXG.IsPoint(b[1]))){c=new JXG.Line(d,b[0],b[1],a.id,a.name);c.setStraight(false,false);c.setArrow(false,true)}else{throw ("Can't create arrow with parent types '"+(typeof b[0])+"' and '"+(typeof b[1])+"'.")}return c};JXG.JSXGraph.registerElement("arrow",JXG.createArrow);JXG.createAxis=function(e,k,b){if((JXG.IsArray(k[0])||JXG.IsPoint(k[0]))&&(JXG.IsArray(k[1])||JXG.IsPoint(k[1]))){var h;if(JXG.IsPoint(k[0])){h=k[0]}else{h=new JXG.Point(e,k[0],"","",false)}var g;if(JXG.IsPoint(k[1])){g=k[1]}else{g=new JXG.Point(e,k[1],"","",false)}h.fixed=true;g.fixed=true;if(b==null){b=new Object()}b.lastArrow=true;b.straightFirst=true;b.straightLast=true;if(b.strokeWidth==null){b.strokeWidth=1}var m=e.createElement("line",[h,g],b);m.needsRegularUpdate=false;if(b.minorTicks=="undefined"||b.minorTicks==null){b.minorTicks=4}if((b.insertTicks=="undefined")||(b.insertTicks==null)){b.insertTicks="true"}var f;if(b.ticksDistance!="undefined"&&b.ticksDistance!=null){f=b.ticksDistance}else{var c=new JXG.Coords(JXG.COORDS_BY_USER,[m.point1.coords.usrCoords.slice(1)],e);var a=new JXG.Coords(JXG.COORDS_BY_USER,[m.point2.coords.usrCoords.slice(1)],e);e.renderer.calcStraight(m,c,a);var d=c.distance(JXG.COORDS_BY_USER,a);f=1}var j=e.createElement("ticks",[m,f],b);j.needsRegularUpdate=false;m.defaultTicks=j}else{throw ("Can't create point with parent types '"+(typeof k[0])+"' and '"+(typeof k[1])+"'.")}return m};JXG.JSXGraph.registerElement("axis",JXG.createAxis);JXG.createTangent=function(h,k,b){var a=k[0];var j=a.slideObject;if(j.elementClass==JXG.OBJECT_CLASS_LINE){return h.createElement("line",[j.point1,j.point2],b)}else{if(j.elementClass==JXG.OBJECT_CLASS_CURVE){var d=j.X;var e=j.Y;return h.createElement("line",[function(){return -a.X()*h.D(e)(a.position)+a.Y()*h.D(d)(a.position)},function(){return h.D(e)(a.position)},function(){return -h.D(d)(a.position)}],b)}else{if(j.elementClass==JXG.OBJECT_CLASS_CIRCLE){var m=function(c){return -j.getRadius()*Math.sin(c)};var n=function(c){return j.getRadius()*Math.cos(c)};return h.createElement("line",[function(){return -a.X()*n(a.position)+a.Y()*m(a.position)},function(){return n(a.position)},function(){return -m(a.position)}],b)}}}};JXG.JSXGraph.registerElement("tangent",JXG.createTangent);JXG.Group=function(e,h,a){this.board=e;this.objects={};var f=this.board.numObjects;this.board.numObjects++;if((h=="")||(h==null)||(typeof h=="undefined")){this.id=this.board.id+"Group"+f}else{this.id=h}this.type=JXG.OBJECT_TYPE_POINT;this.elementClass=JXG.OBJECT_CLASS_POINT;if((a=="")||(a==null)||(typeof a=="undefined")){this.name="group_"+this.board.generateName(this)}else{this.name=a}delete (this.type);var d;if((arguments.length==4)&&(JXG.IsArray(arguments[3]))){d=arguments[3]}else{d=[];for(var b=3;b<arguments.length;b++){d.push(arguments[b])}}for(var b=0;b<d.length;b++){var g=JXG.GetReferenceFromParameter(this.board,d[b]);if((!g.fixed)&&((g.type==JXG.OBJECT_TYPE_POINT)||(g.type==JXG.OBJECT_TYPE_GLIDER))){if(g.group.length!=0){this.addGroup(g.group[g.group.length-1])}else{this.addPoint(g)}}}for(var c in this.objects){this.objects[c].group.push(this)}this.dX=0;this.dY=0};JXG.Group.prototype.ungroup=function(){for(var a in this.objects){if(this.objects[a].group[this.objects[a].group.length-1]==this){this.objects[a].group.pop()}delete (this.objects[a])}};JXG.Group.prototype.update=function(a){var b=null;for(var c in this.objects){b=this.objects[c];if(b.id!=a.id){b.coords=new JXG.Coords(JXG.COORDS_BY_SCREEN,[b.coords.scrCoords[1]+this.dX,b.coords.scrCoords[2]+this.dY],b.board)}}for(var c in this.objects){if(this.board.objects[c]!=undefined){this.objects[c].update(false)}else{delete (this.objects[c])}}};JXG.Group.prototype.addPoint=function(a){this.objects[a.id]=a};JXG.Group.prototype.addPoints=function(a){for(var b in a){this.objects[b.id]=b}};JXG.Group.prototype.addGroup=function(b){for(var a in b.objects){this.addPoint(b.objects[a])}};JXG.createGroup=function(c,b,a){var d=new JXG.Group(c,a.id,a.name,b);return d};JXG.JSXGraph.registerElement("group",JXG.createGroup);JXG.Circle=function(d,f,c,b,e,a){this.constructor();this.init(d,e,a);this.type=JXG.OBJECT_TYPE_CIRCLE;this.elementClass=JXG.OBJECT_CLASS_CIRCLE;this.method=f;this.midpoint=JXG.GetReferenceFromParameter(this.board,c);this.midpoint.addChild(this);this.visProp.visible=true;this.visProp.fillColor=this.board.options.circle.fillColor;this.visProp.highlightFillColor=this.board.options.circle.highlightFillColor;this.visProp.strokeColor=this.board.options.circle.strokeColor;this.visProp.highlightStrokeColor=this.board.options.circle.highlightStrokeColor;this.point2=null;this.radius=0;this.line=null;this.circle=null;if(f=="twoPoints"){this.point2=JXG.GetReferenceFromParameter(d,b);this.point2.addChild(this);this.radius=this.getRadius();this.id=this.board.addCircle(this)}else{if(f=="pointRadius"){this.generateTerm(b);this.updateRadius();this.id=this.board.addCircle(this);this.notifyParents(b)}else{if(f=="pointLine"){this.line=JXG.GetReferenceFromParameter(d,b);this.radius=this.line.point1.coords.distance(JXG.COORDS_BY_USER,this.line.point2.coords);this.line.addChild(this);this.id=this.board.addCircle(this)}else{if(f=="pointCircle"){this.circle=JXG.GetReferenceFromParameter(d,b);this.radius=this.circle.getRadius();this.circle.addChild(this);this.id=this.board.addCircle(this)}}}}};JXG.Circle.prototype=new JXG.GeometryElement;JXG.Circle.prototype.hasPoint=function(a,f){var e=this.board.options.precision.hasPoint;e=e/(this.board.unitX*this.board.zoomX);var d=new JXG.Coords(JXG.COORDS_BY_SCREEN,[a,f],this.board);var b=this.getRadius();var c=Math.sqrt(Math.pow(this.midpoint.coords.usrCoords[1]-d.usrCoords[1],2)+Math.pow(this.midpoint.coords.usrCoords[2]-d.usrCoords[2],2));return(Math.abs(c-b)<e)};JXG.Circle.prototype.update=function(){if(this.traced){this.cloneToBackground(true)}if(this.needsUpdate){if(this.method=="pointLine"){this.radius=this.line.point1.coords.distance(JXG.COORDS_BY_USER,this.line.point2.coords)}else{if(this.method=="pointCircle"){this.radius=this.circle.getRadius()}else{if(this.method=="pointRadius"){this.radius=this.updateRadius()}}}if(!this.board.geonextCompatibilityMode){this.updateStdform()}}};JXG.Circle.prototype.updateStdform=function(){this.stdform[3]=0.5;this.stdform[4]=this.getRadius();this.stdform[1]=-this.midpoint.coords.usrCoords[1];this.stdform[2]=-this.midpoint.coords.usrCoords[2];this.normalize()};JXG.Circle.prototype.updateRenderer=function(){if(this.needsUpdate&&this.visProp.visible){var a=this.isReal;this.isReal=(isNaN(this.midpoint.coords.usrCoords[1]+this.midpoint.coords.usrCoords[2]+this.getRadius()))?false:true;if(this.isReal){if(a!=this.isReal){this.board.renderer.show(this)}this.board.renderer.updateCircle(this)}else{if(a!=this.isReal){this.board.renderer.hide(this)}}this.needsUpdate=false}};JXG.Circle.prototype.generateTerm=function(b){if(typeof b=="string"){var c=this.board.elementsByName;var a=this.board.algebra.geonext2JS(b+"");this.updateRadius=new Function("return "+a+";")}else{if(typeof b=="number"){this.updateRadius=function(){return b}}else{this.updateRadius=b}}};JXG.Circle.prototype.notifyParents=function(b){var a=null;var c=this.board.elementsByName;this.board.algebra.findDependencies(this,b+"")};JXG.Circle.prototype.getRadius=function(){if(this.method=="twoPoints"){return(Math.sqrt(Math.pow(this.midpoint.coords.usrCoords[1]-this.point2.coords.usrCoords[1],2)+Math.pow(this.midpoint.coords.usrCoords[2]-this.point2.coords.usrCoords[2],2)))}else{if(this.method=="pointLine"||this.method=="pointCircle"){return this.radius}else{if(this.method=="pointRadius"){return this.updateRadius()}}}};JXG.Circle.prototype.getTextAnchor=function(){return this.midpoint.coords};JXG.Circle.prototype.cloneToBackground=function(a){var c={};c.id=this.id+"T"+this.numTraces;this.numTraces++;c.midpoint={};c.midpoint.coords=this.midpoint.coords;var b=this.getRadius();c.getRadius=function(){return b};c.board={};c.board.unitX=this.board.unitX;c.board.unitY=this.board.unitY;c.board.zoomX=this.board.zoomX;c.board.zoomY=this.board.zoomY;c.visProp=this.visProp;this.board.renderer.drawCircle(c);this.traces[c.id]=document.getElementById(c.id);delete c};JXG.Circle.prototype.addTransform=function(a){var c;if(JXG.IsArray(a)){c=a}else{c=[a]}for(var b=0;b<c.length;b++){this.midpoint.transformations.push(c[b]);if(this.method=="twoPoints"){this.point2.transformations.push(c[b])}}};JXG.Circle.prototype.setPosition=function(d,a,c){var b=this.board.createElement("transform",[a,c],{type:"translate"});this.addTransform(b)};JXG.Circle.prototype.X=function(a){a*=2*Math.PI;return this.getRadius()*Math.cos(a)+this.midpoint.coords.usrCoords[1]};JXG.Circle.prototype.Y=function(a){a*=2*Math.PI;return this.getRadius()*Math.sin(a)+this.midpoint.coords.usrCoords[2]};JXG.Circle.prototype.minX=function(){return 0};JXG.Circle.prototype.maxX=function(){return 1};JXG.createCircle=function(c,e,d){var b;if(e.length==2&&JXG.IsPoint(e[0])&&JXG.IsPoint(e[1])){b=new JXG.Circle(c,"twoPoints",e[0],e[1],d.id,d.name)}else{if((JXG.IsNumber(e[0])||JXG.IsFunction(e[0])||JXG.IsString(e[0]))&&(e[1].elementClass==JXG.OBJECT_CLASS_POINT)){b=new JXG.Circle(c,"pointRadius",e[1],e[0],d.id,d.name)}else{if((JXG.IsNumber(e[1])||JXG.IsFunction(e[1])||JXG.IsString(e[1]))&&(e[0].elementClass==JXG.OBJECT_CLASS_POINT)){b=new JXG.Circle(c,"pointRadius",e[0],e[1],d.id,d.name)}else{if((e[0].type==JXG.OBJECT_TYPE_CIRCLE)&&(e[1].elementClass==JXG.OBJECT_CLASS_POINT)){b=new JXG.Circle(c,"pointCircle",e[1],e[0],d.id,d.name)}else{if((e[1].type==JXG.OBJECT_TYPE_CIRCLE)&&(e[0].elementClass==JXG.OBJECT_CLASS_POINT)){b=new JXG.Circle(c,"pointCircle",e[0],e[1],d.id,d.name)}else{if((e[0].type==JXG.OBJECT_TYPE_LINE)&&(e[1].elementClass==JXG.OBJECT_CLASS_POINT)){b=new JXG.Circle(c,"pointLine",e[1],e[0],d.id,d.name)}else{if((e[1].type==JXG.OBJECT_TYPE_LINE)&&(e[0].elementClass==JXG.OBJECT_CLASS_POINT)){b=new JXG.Circle(c,"pointLine",e[0],e[1],d.id,d.name)}else{if(e.length==3&&JXG.IsPoint(e[0])&&JXG.IsPoint(e[1])&&JXG.IsPoint(e[2])){var a=JXG.createCircumcircle(c,e,d);a[0].setProperty({visible:false});return a[1]}else{throw ("Can't create circle with parent types '"+(typeof e[0])+"' and '"+(typeof e[1])+"'.")}}}}}}}}return b};JXG.JSXGraph.registerElement("circle",JXG.createCircle);JXG.Polygon=function(g,h,j,b,a,c){this.constructor();this.type=JXG.OBJECT_TYPE_POLYGON;this.elementClass=JXG.OBJECT_CLASS_AREA;this.init(g,b,a);if((typeof c=="undefined")||(c==null)){c=true}this.withLines=c;this.vertices=[];for(var e=0;e<h.length;e++){var f=JXG.GetReferenceFromParameter(this.board,h[e]);this.vertices[e]=f}if((typeof j=="undefined")||(j==null)){j=[];for(var e=0;e<h.length-1;e++){j[e]={}}}if(this.vertices[this.vertices.length-1]!=this.vertices[0]){this.vertices.push(this.vertices[0]);j.push({})}this.visProp.fillColor=this.board.options.polygon.fillColor;this.visProp.highlightFillColor=this.board.options.polygon.highlightFillColor;this.visProp.fillOpacity=this.board.options.polygon.fillOpacity;this.visProp.highlightFillOpacity=this.board.options.polygon.highlightFillOpacity;var d;this.borders=[];if(c){for(var e=0;e<this.vertices.length-1;e++){d=new JXG.Line(g,this.vertices[e],this.vertices[e+1],j[e].id,j[e].name);d.setStraight(false,false);this.borders[e]=d;d.parentPolygon=this}}for(var e=0;e<this.vertices.length-1;e++){var f=JXG.GetReferenceFromParameter(this.board,this.vertices[e]);f.addChild(this)}this.id=this.board.addPolygon(this)};JXG.Polygon.prototype=new JXG.GeometryElement;JXG.Polygon.prototype.hasPoint=function(a,b){return false};JXG.Polygon.prototype.updateRenderer=function(){if(this.needsUpdate){this.board.renderer.updatePolygon(this);this.needsUpdate=false}};JXG.Polygon.prototype.getTextAnchor=function(){var e=0;var d=0;var c=0;var g=0;e=c=this.vertices[0].X();d=g=this.vertices[0].Y();for(var f=0;f<this.vertices.length;f++){if(this.vertices[f].X()<e){e=this.vertices[f].X()}if(this.vertices[f].X()>c){c=this.vertices[f].X()}if(this.vertices[f].Y()>d){d=this.vertices[f].Y()}if(this.vertices[f].Y()<g){g=this.vertices[f].Y()}}return new JXG.Coords(JXG.COORDS_BY_USER,[(e+c)*0.5,(d+g)*0.5],this.board)};JXG.Polygon.prototype.cloneToBackground=function(a){var b={};b.id=this.id+"T"+this.numTraces;this.numTraces++;b.vertices=this.vertices;b.visProp=this.visProp;this.board.renderer.drawPolygon(b);this.traces[b.id]=$(b.id);delete b};JXG.createPolygon=function(d,a,e){var c;for(var b=0;b<a.length;b++){if(!JXG.IsPoint(a[b])){throw ("Can't create polygon with parent types other than 'point'.")}}c=new JXG.Polygon(d,a,e.borders,e.id,e.name,e.withLines);return c};JXG.JSXGraph.registerElement("polygon",JXG.createPolygon);JXG.Curve=function(c,b,d,a){this.constructor();this.points=[];this.numberPoints=0;this.type=JXG.OBJECT_TYPE_CURVE;this.elementClass=JXG.OBJECT_CLASS_CURVE;this.init(c,d,a);this.init(c,d,a);this.visProp.strokeWidth=this.board.options.curve.strokeWidth;this.visProp.visible=true;this.dataX=null;this.dataY=null;this.curveType=null;if(b[0]!=null){this.varname=b[0]}else{this.varname="x"}this.xterm=b[1];this.yterm=b[2];this.generateTerm(this.varname,this.xterm,this.yterm,b[3],b[4]);this.updateCurve();this.id=this.board.addCurve(this);if(typeof this.xterm=="string"){this.notifyParents(this.xterm)}if(typeof this.yterm=="string"){this.notifyParents(this.yterm)}};JXG.Curve.prototype=new JXG.GeometryElement;JXG.Curve.prototype.minX=function(){if(this.curveType=="polar"){return 0}else{var a=new JXG.Coords(JXG.COORDS_BY_SCREEN,[0,0],this.board);return a.usrCoords[1]}};JXG.Curve.prototype.maxX=function(){if(this.curveType=="polar"){return 2*Math.PI}else{var a=new JXG.Coords(JXG.COORDS_BY_SCREEN,[this.board.canvasWidth,0],this.board);return a.usrCoords[1]}};JXG.Curve.prototype.hasPoint=function(q,n){var s,k,h,u,e,b,r,o;var a=5/(this.board.unitX*this.board.zoomX);var f=new JXG.Coords(JXG.COORDS_BY_SCREEN,[q,n],this.board);q=f.usrCoords[1];n=f.usrCoords[2];if(this.curveType=="parameter"||this.curveType=="polar"){var m=300;var g=(this.maxX()-this.minX())/m;for(e=0,s=this.minX();e<m;e++){r=this.X(s);o=this.Y(s);for(b=0;b<this.transformations.length;b++){u=this.transformations[b];u.update();h=u.matVecMult(u.matrix,[1,r,o]);r=h[1];o=h[2]}k=Math.sqrt((q-r)*(q-r)+(n-o)*(n-o));if(k<a){return true}s+=g}}else{var m=300;var g=(this.maxX()-this.minX())/m;for(e=0,s=this.minX();e<m;e++){r=this.X(s);o=this.Y(s);for(b=0;b<this.transformations.length;b++){u=this.transformations[b];u.update();h=u.matVecMult(u.matrix,[1,r,o]);r=h[1];o=h[2]}k=Math.sqrt((q-r)*(q-r)+(n-o)*(n-o));if(k<a){return true}s+=g}}return(k<a)};JXG.Curve.prototype.allocatePoints=function(){if(this.points.length<this.numberPoints){for(var a=this.points.length;a<this.numberPoints;a++){this.points[a]=new JXG.Coords(JXG.COORDS_BY_USER,[0,0],this.board)}}};JXG.Curve.prototype.update=function(){if(this.needsUpdate){this.updateCurve()}};JXG.Curve.prototype.updateRenderer=function(){if(this.needsUpdate){this.board.renderer.updateCurve(this);this.needsUpdate=false}};JXG.Curve.prototype.updateDataArray=function(){};JXG.Curve.prototype.updateCurve=function(){this.updateDataArray();if(this.curveType=="plot"&&this.dataX!=null){this.numberPoints=this.dataX.length}else{if(this.board.updateQuality==this.board.BOARD_QUALITY_HIGH){this.numberPoints=this.board.canvasWidth*1.3}else{this.numberPoints=this.board.canvasWidth*0.25}}this.allocatePoints();var c=this.numberPoints;var d=this.minX();var g=this.maxX();var b,f;var a=(g-d)/c;for(var e=0;e<c;e++){if(this.dataX!=null){b=e;if(this.dataY!=null){f=e}else{f=this.X(b)}}else{b=d+e*a;f=b}this.points[e].setCoordinates(JXG.COORDS_BY_USER,[this.X(b),this.Y(f)]);this.updateTransform(this.points[e])}};JXG.Curve.prototype.updateTransform=function(d){if(this.transformations.length==0){return d}for(var b=0;b<this.transformations.length;b++){var a=this.transformations[b];a.update();var e=a.matVecMult(a.matrix,d.usrCoords);d.setCoordinates(JXG.COORDS_BY_USER,[e[1],e[2]])}return d};JXG.Curve.prototype.addTransform=function(a){var c;if(JXG.IsArray(a)){c=a}else{c=[a]}for(var b=0;b<c.length;b++){this.transformations.push(c[b])}};JXG.Curve.prototype.setPosition=function(d,a,c){var b=this.board.createElement("transform",[a,c],{type:"translate"});if(this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix){this.transformations[this.transformations.length-1].melt(b)}else{this.addTransform(b)}};JXG.Curve.prototype.generateTerm=function(a,j,g,e,h){this.numberPoints=this.board.canvasWidth*1;if(typeof j=="string"){var d=this.board.algebra.geonext2JS(j);this.X=new Function(a,"return "+d+";");this.curveType="functiongraph"}else{if(typeof j=="function"){this.X=j;this.curveType="parameter"}else{if(typeof j=="number"){this.X=function(){return j};this.curveType="parameter"}else{if(typeof j=="object"){this.curveType="plot";this.dataX=j;this.X=function(k){return this.dataX[k]};this.numberPoints=this.dataX.length}}}}if(typeof g=="string"){var b=this.board.algebra.geonext2JS(g);this.Y=new Function(a,"return "+b+";")}else{if(typeof g=="function"){this.Y=g}else{if(typeof g=="number"){this.Y=function(){return g}}else{if(typeof g=="object"){this.dataY=g;this.Y=function(k){return this.dataY[k]}}}}}if(typeof j=="function"&&typeof g=="object"){this.X=function(k){return(j)(k)*Math.cos(k)+g[0]};this.Y=function(k){return(j)(k)*Math.sin(k)+g[1]};this.curveType="parameter"}if(e!=null){if(typeof e=="string"){var c=this.board.algebra.geonext2JS(e);this.minX=new Function("","return "+c+";")}else{if(typeof e=="function"){this.minX=e}else{if(typeof e=="number"){this.minX=function(){return e}}}}}if(h!=null){if(typeof h=="string"){var f=this.board.algebra.geonext2JS(h);this.maxX=new Function("","return "+f+";")}else{if(typeof h=="function"){this.maxX=h}else{if(typeof h=="number"){this.maxX=function(){return h}}}}}};JXG.Curve.prototype.notifyParents=function(b){var a=null;var c=this.board.elementsByName;this.board.algebra.findDependencies(this,b)};JXG.createCurve=function(c,b,a){return new JXG.Curve(c,["x"].concat(b),a.id,a.name)};JXG.JSXGraph.registerElement("curve",JXG.createCurve);JXG.createFunctiongraph=function(d,b,a){var c=["x","x"].concat(b);if(a==null){a={}}a.curveType="functiongraph";return new JXG.Curve(d,c,a.id,a.name)};JXG.JSXGraph.registerElement("functiongraph",JXG.createFunctiongraph);JXG.createSpline=function(c,b,a){var d=function(g){var e=new Array();var j=new Array();for(var f=0;f<b.length;f++){if(!JXG.IsPoint(b[f])){throw"JXG.createSpline: Parents has to be an array of JXG.Point."}e.push(b[f].X());j.push(b[f].Y())}var h=JXG.Math.Numerics.splineDef(e,j);return JXG.Math.Numerics.splineEval(g,e,j,h)};return new JXG.Curve(c,["x","x",d],a)};JXG.JSXGraph.registerElement("spline",JXG.createSpline);JXG.Arc=function(b,e,d,c,f,a){this.constructor();this.type=JXG.OBJECT_TYPE_ARC;this.elementClass=JXG.OBJECT_CLASS_CIRCLE;this.init(b,f,a);this.midpoint=JXG.GetReferenceFromParameter(this.board,e);this.point2=JXG.GetReferenceFromParameter(this.board,d);this.point3=JXG.GetReferenceFromParameter(this.board,c);this.r=this.board.options.precision.hasPoint;this.visProp.visible=true;this.visProp.firstArrow=this.board.options.arc.firstArrow;this.visProp.lastArrow=this.board.options.arc.lastArrow;this.visProp.fillColor=this.board.options.arc.fillColor;this.visProp.highlightFillColor=this.board.options.arc.highlightFillColor;this.visProp.strokeColor=this.board.options.arc.strokeColor;this.visProp.highlightStrokeColor=this.board.options.arc.highlightStrokeColor;this.id=this.board.addArc(this);this.midpoint.addChild(this);this.point2.addChild(this);this.point3.addChild(this)};JXG.Arc.prototype=new JXG.GeometryElement;JXG.Arc.prototype.hasPoint=function(j,h){var m=this.r/(this.board.unitX*this.board.zoomX);var f=new JXG.Coords(JXG.COORDS_BY_SCREEN,[j,h],this.board);var a=this.getRadius();var g=Math.sqrt(Math.pow(this.midpoint.coords.usrCoords[1]-f.usrCoords[1],2)+Math.pow(this.midpoint.coords.usrCoords[2]-f.usrCoords[2],2));var k=(Math.abs(g-a)<m);if(k){var b={};b.coords=new JXG.Coords(JXG.COORDS_BY_USER,[this.midpoint.coords.usrCoords[1],this.board.origin.usrCoords[2]/(this.board.unitY*this.board.zoomY)],this.board);var e=this.board.algebra.trueAngle(this.point2,this.midpoint,b);var d=this.board.algebra.trueAngle(this.point3,this.midpoint,b);var n={};n.coords=f;var c=this.board.algebra.trueAngle(n,this.midpoint,b);if(e>=d){if(e<c||c<d){k=false}}else{if(c>e){if(c<d){k=false}}}}return k};JXG.Arc.prototype.getRadius=function(){return(Math.sqrt(Math.pow(this.midpoint.coords.usrCoords[1]-this.point2.coords.usrCoords[1],2)+Math.pow(this.midpoint.coords.usrCoords[2]-this.point2.coords.usrCoords[2],2)))};JXG.Arc.prototype.updateRenderer=function(){if(this.needsUpdate){this.board.renderer.updateArc(this);this.needsUpdate=false}};JXG.Arc.prototype.setArrow=function(b,a){this.visProp.firstArrow=b;this.visProp.lastArrow=a;this.board.renderer.updateArc(this)};JXG.createArc=function(d,b,a){var c;if((JXG.IsPoint(b[0]))&&(JXG.IsPoint(b[1]))&&(JXG.IsPoint(b[2]))){c=new JXG.Arc(d,b[0],b[1],b[2],a.id,a.name)}else{throw ("Can't create Arc with parent types '"+(typeof b[0])+"' and '"+(typeof b[1])+"' and '"+(typeof b[2])+"'.")}return c};JXG.JSXGraph.registerElement("arc",JXG.createArc);JXG.Sector=function(j,r,q,o,b,k,e){this.constructor();this.type=JXG.OBJECT_TYPE_SECTOR;this.elementClass=JXG.OBJECT_CLASS_AREA;this.init(j,e,"");if(!JXG.IsArray(b)){b=[null,null,null,null]}if(!JXG.IsArray(k)){k=[null,null,null,null]}this.point1=JXG.GetReferenceFromParameter(this.board,r);this.point2=JXG.GetReferenceFromParameter(this.board,q);this.point3=JXG.GetReferenceFromParameter(this.board,o);this.r=this.board.options.precision.hasPoint;this.visProp.visible=true;var c={};c.midpoint=this.point1;var h=this.getRadius();c.getRadius=function(){return h};var n=this.board.algebra.projectPointToCircle(this.point3,c);var d=new JXG.Point(j,[n.usrCoords[1],n.usrCoords[2]],b[1],k[1],true);d.fixed=true;this.addChild(d);d.update=function(){var s={};s.midpoint=JXG.GetReferenceFromParameter(this.board,r);var a=(Math.sqrt(Math.pow(JXG.GetReferenceFromParameter(this.board,r).coords.usrCoords[1]-JXG.GetReferenceFromParameter(this.board,q).coords.usrCoords[1],2)+Math.pow(JXG.GetReferenceFromParameter(this.board,r).coords.usrCoords[2]-JXG.GetReferenceFromParameter(this.board,q).coords.usrCoords[2],2)));s.getRadius=function(){return a};n=this.board.algebra.projectPointToCircle(JXG.GetReferenceFromParameter(this.board,o),s);this.coords=n;this.board.renderer.updatePoint(this);if(this.label.show){this.label.setCoordinates(this.coords);this.board.renderer.updateLabel(this.label)}};var g=new JXG.Line(j,r,q,b[2],k[2]);var f=new JXG.Line(j,r,d.id,b[3],k[3]);g.setStraight(false,false);f.setStraight(false,false);var m=new JXG.Arc(j,r,q,o,b[0],k[0]);m.visProp.fillColor=this.board.options.sector.fillColor;m.visProp.highlightFillColor=this.board.options.sector.highlightFillColor;m.visProp.fillOpacity=this.board.options.sector.fillOpacity;m.visProp.highlightFillOpacity=this.board.options.sector.highlightFillOpacity;this.point4=d;this.lines=[g,f];this.arc=m;this.id=this.board.addSector(this);this.point1.addChild(this);this.point2.addChild(this);this.point3.addChild(this)};JXG.Sector.prototype=new JXG.GeometryElement;JXG.Sector.prototype.hasPoint=function(a,b){return false};JXG.Sector.prototype.getRadius=function(){return(Math.sqrt(Math.pow(this.point1.coords.usrCoords[1]-this.point2.coords.usrCoords[1],2)+Math.pow(this.point1.coords.usrCoords[2]-this.point2.coords.usrCoords[2],2)))};JXG.Sector.prototype.updateRenderer=function(){};JXG.createSector=function(b,d,c){var a;if((JXG.IsPoint(d[0]))&&(JXG.IsPoint(d[1]))&&(JXG.IsPoint(d[2]))){a=new JXG.Sector(b,d[0],d[1],d[2],c.ids,c.names,c.id)}else{throw ("Can't create sector with parent types '"+(typeof d[0])+"' and '"+(typeof d[1])+"' and '"+(typeof d[2])+"'.")}return a};JXG.JSXGraph.registerElement("sector",JXG.createSector);JXG.Angle=function(c,g,e,d,a,f,h,b){this.constructor();this.type=JXG.OBJECT_TYPE_ANGLE;this.elementClass=JXG.OBJECT_CLASS_AREA;this.init(c,h,b);this.point1=JXG.GetReferenceFromParameter(this.board,g);this.point2=JXG.GetReferenceFromParameter(this.board,e);this.point3=JXG.GetReferenceFromParameter(this.board,d);this.radius=this.board.options.angle.radius;if(a!=undefined&&a!=null){this.radius=a}this.visProp.fillColor=this.board.options.angle.fillColor;this.visProp.highlightFillColor=this.board.options.angle.highlightFillColor;this.visProp.fillOpacity=this.board.options.angle.fillOpacity;this.visProp.highlightFillOpacity=this.board.options.angle.highlightFillOpacity;this.visProp.strokeColor=this.board.options.angle.strokeColor;this.text=f;this.id=this.board.addAngle(this);this.point1.addChild(this);this.point2.addChild(this);this.point3.addChild(this)};JXG.Angle.prototype=new JXG.GeometryElement;JXG.Angle.prototype.hasPoint=function(a,b){return false};JXG.Angle.prototype.updateRenderer=function(){if(this.needsUpdate){this.board.renderer.updateAngle(this);this.needsUpdate=false}};JXG.createAngle=function(d,b,a){var c;if((JXG.IsPoint(b[0]))&&(JXG.IsPoint(b[1]))&&(JXG.IsPoint(b[2]))){c=new JXG.Angle(d,b[0],b[1],b[2],a.id,a.name)}else{throw ("Can't create angle with parent types '"+(typeof b[0])+"' and '"+(typeof b[1])+"' and '"+(typeof b[2])+"'.")}return c};JXG.JSXGraph.registerElement("angle",JXG.createAngle);JXG.Label=function(b,a,c,d){if(typeof(b)=="string"){b=JXG.Geonext.boards[b]}this.board=b;this.id=d;this.name=a+"Label";this.nameHTML=this.board.algebra.replaceSup(this.board.algebra.replaceSub(a));this.distanceX=10;this.distanceY=10;this.coords=new JXG.Coords(JXG.COORDS_BY_USER,[c.usrCoords[1]*1+this.distanceX/(this.board.unitX*this.board.zoomX),c.usrCoords[2]*1+this.distanceY/(this.board.unitY*this.board.zoomY)],this.board);this.show=true;this.color="#000000";this.hiddenByParent=false};JXG.Label.prototype.hideElement=function(){this.show=false;this.board.renderer.hide(this)};JXG.Label.prototype.showElement=function(){this.show=true;this.board.renderer.show(this)};JXG.Label.prototype.setCoordinates=function(a){this.coords=new JXG.Coords(JXG.COORDS_BY_USER,[a.usrCoords[1]*1+this.distanceX/(this.board.unitX*this.board.zoomX),a.usrCoords[2]*1+this.distanceY/(this.board.unitY*this.board.zoomY)],this.board)};JXG.Algebra=function(a){this.board=a;this.eps=0.00001};JXG.Algebra.prototype.angle=function(g,e,d){var k=[];var j=[];var h=[];if(g.coords==null){k[0]=g[0];k[1]=g[1]}else{k[0]=g.coords.usrCoords[1];k[1]=g.coords.usrCoords[2]}if(e.coords==null){j[0]=e[0];j[1]=e[1]}else{j[0]=e.coords.usrCoords[1];j[1]=e.coords.usrCoords[2]}if(d.coords==null){h[0]=d[0];h[1]=d[1]}else{h[0]=d.coords.usrCoords[1];h[1]=d.coords.usrCoords[2]}var n=k[0]-j[0];var m=k[1]-j[1];var q=h[0]-j[0];var o=h[1]-j[1];var f=Math.atan((n*o-m*q)/(n*q+m*o));return f};JXG.Algebra.prototype.trueAngle=function(f,e,c){var a;var s;var q;var n;var k;var j;if(f.coords==null){a=f[0];s=f[1]}else{a=f.coords.usrCoords[1];s=f.coords.usrCoords[2]}if(e.coords==null){q=e[0];n=e[1]}else{q=e.coords.usrCoords[1];n=e.coords.usrCoords[2]}if(c.coords==null){k=c[0];j=c[1]}else{k=c.coords.usrCoords[1];j=c.coords.usrCoords[2]}var d=(k-q)*(a-q)+(j-n)*(s-n);var o=(a-q)*(j-n)-(s-n)*(k-q);var h=Math.sqrt((a-q)*(a-q)+(s-n)*(s-n));var g=Math.sqrt((k-q)*(k-q)+(j-n)*(j-n));var b=d/(h*g);if(b>1){b=1}else{if(b<-1){b=-1}}var r=Math.acos(b);var m=0;if((Math.sin(r)*o)<0){m=2*Math.PI-r}else{m=r}m=(m/Math.PI)*180;return m};JXG.Algebra.prototype.angleBisector=function(e,c,b){var j=e.coords.usrCoords[1]-c.coords.usrCoords[1];var h=e.coords.usrCoords[2]-c.coords.usrCoords[2];var g=Math.sqrt(j*j+h*h);j/=g;h/=g;var a=Math.acos(j);if(h<0){a*=-1}if(a<0){a+=2*Math.PI}j=b.coords.usrCoords[1]-c.coords.usrCoords[1];h=b.coords.usrCoords[2]-c.coords.usrCoords[2];g=Math.sqrt(j*j+h*h);j/=g;h/=g;var k=Math.acos(j);if(h<0){k*=-1}if(k<0){k+=2*Math.PI}var f=(a+k)*0.5;if(a>k){f+=Math.PI}j=Math.cos(f)+c.coords.usrCoords[1];h=Math.sin(f)+c.coords.usrCoords[2];return new JXG.Coords(JXG.COORDS_BY_USER,[j,h],this.board)};JXG.Algebra.prototype.midpoint=function(a,b){return new JXG.Coords(JXG.COORDS_BY_USER,[(a.coords.usrCoords[1]+b.coords.usrCoords[1])/2,(a.coords.usrCoords[2]+b.coords.usrCoords[2])/2],this.board)};JXG.Algebra.prototype.parallel=function(e,d,b){var c=1;var a=b.coords.usrCoords[1]+c*(d.coords.usrCoords[1]-e.coords.usrCoords[1]);var f=b.coords.usrCoords[2]+c*(d.coords.usrCoords[2]-e.coords.usrCoords[2]);return new JXG.Coords(JXG.COORDS_BY_USER,[a,f],this.board)};JXG.Algebra.prototype.reflection=function(h,f){var g=h.point2.coords.usrCoords[1]-h.point1.coords.usrCoords[1];var e=h.point2.coords.usrCoords[2]-h.point1.coords.usrCoords[2];var b=f.coords.usrCoords[1]-h.point1.coords.usrCoords[1];var d=f.coords.usrCoords[2]-h.point1.coords.usrCoords[2];var j=(g*d-e*b)/(g*g+e*e);var a=f.coords.usrCoords[1]+2*j*e;var c=f.coords.usrCoords[2]-2*j*g;return new JXG.Coords(JXG.COORDS_BY_USER,[a,c],this.board)};JXG.Algebra.prototype.rotation=function(a,j,e){var d=j.coords.usrCoords[1]-a.coords.usrCoords[1];var h=j.coords.usrCoords[2]-a.coords.usrCoords[2];var b,g;var f=Math.cos(e);var k=Math.sin(e);b=d*f-h*k+a.coords.usrCoords[1];g=d*k+h*f+a.coords.usrCoords[2];return new JXG.Coords(JXG.COORDS_BY_USER,[b,g],this.board)};JXG.Algebra.prototype.perpendicular=function(o,m){var j;var g;var h;var e=o.point1.coords;var d=o.point2.coords;var b=m.coords;if(m==o.point1){j=e.usrCoords[1]+d.usrCoords[2]-e.usrCoords[2];g=e.usrCoords[2]-d.usrCoords[1]+e.usrCoords[1];h=true}else{if(m==o.point2){j=d.usrCoords[1]+e.usrCoords[2]-d.usrCoords[2];g=d.usrCoords[2]-e.usrCoords[1]+d.usrCoords[1];h=false}else{if(((Math.abs(e.usrCoords[1]-d.usrCoords[1])>this.eps)&&(Math.abs(b.usrCoords[2]-(e.usrCoords[2]-d.usrCoords[2])*(b.usrCoords[1]-e.usrCoords[1])/(e.usrCoords[1]-d.usrCoords[1])-e.usrCoords[2])<this.eps))||((Math.abs(e.usrCoords[1]-d.usrCoords[1])<=this.eps)&&(Math.abs(e.usrCoords[1]-b.usrCoords[1])<this.eps))){j=b.usrCoords[1]+d.usrCoords[2]-b.usrCoords[2];g=b.usrCoords[2]-d.usrCoords[1]+b.usrCoords[1];h=true;if(Math.abs(j-b.usrCoords[1])<this.eps&&Math.abs(g-b.usrCoords[2])<this.eps){j=b.usrCoords[1]+e.usrCoords[2]-b.usrCoords[2];g=b.usrCoords[2]-e.usrCoords[1]+b.usrCoords[1];h=false}}else{var n=o.point1.coords.usrCoords[2]-o.point2.coords.usrCoords[2];var f=o.point1.coords.usrCoords[1]-o.point2.coords.usrCoords[1];var c=o.point2.coords.usrCoords[1]*n-o.point2.coords.usrCoords[2]*f;var a=m.coords.usrCoords[1]*f+m.coords.usrCoords[2]*n;var k=n*n+f*f;if(Math.abs(k)<this.eps){k=this.eps}j=(c*n+a*f)/k;g=(a*n-c*f)/k;h=true}}}return[new JXG.Coords(JXG.COORDS_BY_USER,[j,g],this.board),h]};JXG.Algebra.prototype.circumcenterMidpoint=function(f,e,d){var c=((f.coords.usrCoords[1]-e.coords.usrCoords[1])*(f.coords.usrCoords[1]+e.coords.usrCoords[1])+(f.coords.usrCoords[2]-e.coords.usrCoords[2])*(f.coords.usrCoords[2]+e.coords.usrCoords[2]))/2;var b=((e.coords.usrCoords[1]-d.coords.usrCoords[1])*(e.coords.usrCoords[1]+d.coords.usrCoords[1])+(e.coords.usrCoords[2]-d.coords.usrCoords[2])*(e.coords.usrCoords[2]+d.coords.usrCoords[2]))/2;var h=(f.coords.usrCoords[1]-e.coords.usrCoords[1])*(e.coords.usrCoords[2]-d.coords.usrCoords[2])-(e.coords.usrCoords[1]-d.coords.usrCoords[1])*(f.coords.usrCoords[2]-e.coords.usrCoords[2]);if(Math.abs(h)<this.eps){h=this.eps}var a=(c*(e.coords.usrCoords[2]-d.coords.usrCoords[2])-b*(f.coords.usrCoords[2]-e.coords.usrCoords[2]))/h;var g=(b*(f.coords.usrCoords[1]-e.coords.usrCoords[1])-c*(e.coords.usrCoords[1]-d.coords.usrCoords[1]))/h;return new JXG.Coords(JXG.COORDS_BY_USER,[a,g],this.board)};JXG.Algebra.prototype.intersectLineLine=function(c,b){var e=c.point1.coords.usrCoords[1]*c.point2.coords.usrCoords[2]-c.point1.coords.usrCoords[2]*c.point2.coords.usrCoords[1];var d=b.point1.coords.usrCoords[1]*b.point2.coords.usrCoords[2]-b.point1.coords.usrCoords[2]*b.point2.coords.usrCoords[1];var g=(c.point2.coords.usrCoords[2]-c.point1.coords.usrCoords[2])*(b.point1.coords.usrCoords[1]-b.point2.coords.usrCoords[1])-(c.point1.coords.usrCoords[1]-c.point2.coords.usrCoords[1])*(b.point2.coords.usrCoords[2]-b.point1.coords.usrCoords[2]);if(Math.abs(g)<this.eps){g=this.eps}var a=(e*(b.point1.coords.usrCoords[1]-b.point2.coords.usrCoords[1])-d*(c.point1.coords.usrCoords[1]-c.point2.coords.usrCoords[1]))/g;var f=(d*(c.point2.coords.usrCoords[2]-c.point1.coords.usrCoords[2])-e*(b.point2.coords.usrCoords[2]-b.point1.coords.usrCoords[2]))/g;return new JXG.Coords(JXG.COORDS_BY_USER,[a,f],this.board)};JXG.Algebra.prototype.intersectCircleLine=function(j,t){var I=t.point1;var G=t.point2;var e=j.midpoint;var A=I.Dist(G);if(A>0){var a=e.Dist(I);var H=e.Dist(G);var F=((a*a)+(A*A)-(H*H))/(2*A);var v=(a*a)-(F*F);v=(v<0)?0:v;var D=Math.sqrt(v);var B=j.getRadius();var k=Math.sqrt((B*B)-D*D);var z=G.coords.usrCoords[1]-I.coords.usrCoords[1];var u=G.coords.usrCoords[2]-I.coords.usrCoords[2];var g=e.coords.usrCoords[1]+(D/A)*u;var f=e.coords.usrCoords[2]-(D/A)*z;a=(G.coords.usrCoords[1]*u)-(G.coords.usrCoords[2]*z);H=(g*z)+(f*u);var C=(u*u)+(z*z);if(Math.abs(C)<this.eps){C=this.eps}var o=((a*u)+(H*z))/C;var m=((H*u)-(a*z))/C;var c=k/A;var q=new JXG.Coords(JXG.COORDS_BY_USER,[o+c*z,m+c*u],this.board);var n=new JXG.Coords(JXG.COORDS_BY_USER,[o-c*z,m-c*u],this.board);var E=e.coords.distance(JXG.COORDS_BY_USER,q);if((B<(E-1))||isNaN(E)){return[0]}else{return[2,q,n]}}};JXG.Algebra.prototype.intersectCircleLineOrg=function(e,n){var g={};var G=n.point1;var E=n.point2;var c=e.midpoint;var v=G.Dist(E);if(v>0){var a=c.Dist(G);var F=c.Dist(E);var D=((a*a)+(v*v)-(F*F))/(2*v);var q=(a*a)-(D*D);q=(q<0)?0:q;var B=Math.sqrt(q);var z=e.getRadius();var f=Math.sqrt((z*z)-(B*B));var u=E.X()-G.X();var o=E.Y()-G.Y();var t=new JXG.Coords(JXG.COORDS_BY_USER,[c.X()+(B/v)*o,c.Y()-(B/v)*u],this.board);a=(E.X()*o)-(E.Y()*u);F=(t.usrCoords[1]*u)+(t.usrCoords[2]*o);var A=(o*o)+(u*u);if(Math.abs(A)<this.eps){A=this.eps}var m=((a*o)+(F*u))/A;var j=((F*o)-(a*u))/A;t=new JXG.Coords(JXG.COORDS_BY_USER,[m+(f/v)*u,j+(f/v)*o],this.board);var k=new JXG.Coords(JXG.COORDS_BY_USER,[m-(f/v)*u,j-(f/v)*o],this.board);var C=c.coords.distance(JXG.COORDS_BY_USER,t);if((z<(C-1))||isNaN(C)){g[0]=0}else{g[0]=2}g[1]=t;g[2]=k;return g}};JXG.Algebra.prototype.intersectCircleCircleOrg=function(m,k){var c={};var f=m.getRadius();var e=k.getRadius();var r=f+e;var g=Math.abs(f-e);var j=m.midpoint.coords.distance(JXG.COORDS_BY_USER,k.midpoint.coords);if(j>r){return[0]}else{if(j<g){return[0]}else{c[0]=1;var q=(f*f-e*e+j*j)/(2*j);var n=Math.sqrt(f*f-q*q);var t=(k.midpoint.coords.usrCoords[1]-m.midpoint.coords.usrCoords[1]);var s=(k.midpoint.coords.usrCoords[2]-m.midpoint.coords.usrCoords[2]);var d=new JXG.Coords(JXG.COORDS_BY_USER,[m.midpoint.coords.usrCoords[1]+t*q/j,m.midpoint.coords.usrCoords[2]+s*q/j],this.board);var o=n/j;c[1]=new JXG.Coords(JXG.COORDS_BY_USER,[d.usrCoords[1]-o*s,d.usrCoords[2]+o*t],this.board);c[2]=new JXG.Coords(JXG.COORDS_BY_USER,[d.usrCoords[1]+o*s,d.usrCoords[2]-o*t],this.board);return c}}};JXG.Algebra.prototype.intersectCircleCircle=function(j,g){var b={};var d=j.getRadius();var c=g.getRadius();var n=d+c;var e=Math.abs(d-c);var f=j.midpoint.coords.distance(JXG.COORDS_BY_USER,g.midpoint.coords);if(f>n){return[0]}else{if(f<e){return[0]}else{var r=f;if(r!=0){b[0]=1;var q=g.midpoint.coords.usrCoords[1]-j.midpoint.coords.usrCoords[1];var o=g.midpoint.coords.usrCoords[2]-j.midpoint.coords.usrCoords[2];var m=(r*r-c*c+d*d)/(2*r);var k=Math.sqrt(d*d-m*m);b[1]=new JXG.Coords(JXG.COORDS_BY_USER,[j.midpoint.coords.usrCoords[1]+(m/r)*q+(k/r)*o,j.midpoint.coords.usrCoords[2]+(m/r)*o-(k/r)*q],this.board);b[2]=new JXG.Coords(JXG.COORDS_BY_USER,[j.midpoint.coords.usrCoords[1]+(m/r)*q-(k/r)*o,j.midpoint.coords.usrCoords[2]+(m/r)*o+(k/r)*q],this.board)}else{return[0]}return b}}};JXG.Algebra.prototype.projectPointToCircle=function(b,d){var e=b.coords.distance(JXG.COORDS_BY_USER,d.midpoint.coords);if(Math.abs(e)<this.eps){e=this.eps}var c=d.getRadius()/e;var a=d.midpoint.coords.usrCoords[1]+c*(b.coords.usrCoords[1]-d.midpoint.coords.usrCoords[1]);var f=d.midpoint.coords.usrCoords[2]+c*(b.coords.usrCoords[2]-d.midpoint.coords.usrCoords[2]);return new JXG.Coords(JXG.COORDS_BY_USER,[a,f],this.board)};JXG.Algebra.prototype.projectPointToLine=function(g,j){var h=j.point1.coords.usrCoords[2]-j.point2.coords.usrCoords[2];var d=j.point1.coords.usrCoords[1]-j.point2.coords.usrCoords[1];var b=j.point2.coords.usrCoords[1]*h-j.point2.coords.usrCoords[2]*d;var a=g.coords.usrCoords[1]*d+g.coords.usrCoords[2]*h;var f=h*h+d*d;if(Math.abs(f)<this.eps){f=this.eps}var e=(b*h+a*d)/f;var c=(a*h-b*d)/f;return new JXG.Coords(JXG.COORDS_BY_USER,[e,c],this.board)};JXG.Algebra.prototype.projectPointToCurve=function(b,e){var d,a,f,c;if(e.curveType=="parameter"||e.curveType=="polar"){a=b.X();f=b.Y();c=b.position||0;c=JXG.Math.Numerics.root(JXG.Math.Numerics.D(function(g){return(a-e.X(g))*(a-e.X(g))+(f-e.Y(g))*(f-e.Y(g))}),c);if(c<e.minX()){c=e.minX()}if(c>e.maxX()){c=e.maxX()}d=new JXG.Coords(JXG.COORDS_BY_USER,[e.X(c),e.Y(c)],this.board)}else{c=b.X();a=c;f=e.Y(c);d=new JXG.Coords(JXG.COORDS_BY_USER,[a,f],this.board)}b.position=c;return e.updateTransform(d)};JXG.Algebra.prototype.replacePow=function(d){var h,m,j;var q="";var g,k;var f=d.indexOf("^");while(f>=0){var b=d.slice(0,f);if(b.charAt(b.length-1)==")"){h=1;m=b.length-2;while(m>=0&&h>0){j=b.charAt(m);if(j==")"){h++}else{if(j=="("){h--}}m--}if(h==0){g="";var e=b.substring(0,m+1);var a=m;while(a>=0&&e.substr(a,1).match(/(\w+)/)){g=RegExp.$1+g;a--}g+=b.substring(m+1,b.length);g=g.replace(/([\(\)\+\*\%\^\-\/\]\[])/g,"\\$1")}}else{g="\\w+"}var o=d.slice(f+1);if(o.match(/^([\w\.]*\()/)){h=1;m=RegExp.$1.length;while(m<o.length&&h>0){j=o.charAt(m);if(j==")"){h--}else{if(j=="("){h++}}m++}if(h==0){k=o.substring(0,m);k=k.replace(/([\(\)\+\*\%\^\-\/\[\]])/g,"\\$1")}}else{k="[\\w\\.]+"}var n=new RegExp("("+g+")\\^("+k+")");d=d.replace(n,"this.board.algebra.pow($1,$2)");f=d.indexOf("^")}return d};JXG.Algebra.prototype.replaceIf=function(b){var r="";var d,q;var f=null;var a=null;var j=null;var e=b.indexOf("If(");if(e<0){return b}b=b.replace(/""/g,"0");while(e>=0){d=b.slice(0,e);q=b.slice(e+3);var g=1;var o=0;var k=-1;var h=-1;while(o<q.length&&g>0){var m=q.charAt(o);if(m==")"){g--}else{if(m=="("){g++}else{if(m==","&&g==1){if(k<0){k=o}else{h=o}}}}o++}var n=q.slice(0,o-1);q=q.slice(o);if(k<0){return""}if(h<0){return""}f=n.slice(0,k);a=n.slice(k+1,h);j=n.slice(h+1);f=this.replaceIf(f);a=this.replaceIf(a);j=this.replaceIf(j);r+=d+"(("+f+")?("+a+"):("+j+"))";b=q;f=null;a=null;e=b.indexOf("If(")}r+=q;return r};JXG.Algebra.prototype.replaceSub=function(c){var b=c.indexOf("_{");while(b>=0){c=c.substr(0,b)+c.substr(b).replace(/_\{/,"<sub>");var a=c.substr(b).indexOf("}");if(a>=0){c=c.substr(0,a)+c.substr(a).replace(/\}/,"</sub>")}b=c.indexOf("_{")}b=c.indexOf("_");while(b>=0){c=c.substr(0,b)+c.substr(b).replace(/_(.?)/,"<sub>$1</sub>");b=c.indexOf("_")}return c};JXG.Algebra.prototype.replaceSup=function(c){var b=c.indexOf("^{");while(b>=0){c=c.substr(0,b)+c.substr(b).replace(/\^\{/,"<sup>");var a=c.substr(b).indexOf("}");if(a>=0){c=c.substr(0,a)+c.substr(a).replace(/\}/,"</sup>")}b=c.indexOf("^{")}b=c.indexOf("^");while(b>=0){c=c.substr(0,b)+c.substr(b).replace(/\^(.?)/,"<sup>$1</sup>");b=c.indexOf("^")}return c};JXG.Algebra.prototype.replaceNameById=function(c){var f=0;var a;var e;var b;var d;f=c.indexOf("X(");while(f>=0){if(f>=0){a=c.indexOf(")",f+2);if(a>=0){e=c.slice(f+2,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+2)+d.id+c.slice(a)}}a=c.indexOf(")",f+2);f=c.indexOf("X(",a)}f=c.indexOf("Y(");while(f>=0){if(f>=0){a=c.indexOf(")",f+2);if(a>=0){e=c.slice(f+2,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+2)+d.id+c.slice(a)}}a=c.indexOf(")",f+2);f=c.indexOf("Y(",a)}f=c.indexOf("L(");while(f>=0){if(f>=0){a=c.indexOf(")",f+2);if(a>=0){e=c.slice(f+2,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+2)+d.id+c.slice(a)}}a=c.indexOf(")",f+2);f=c.indexOf("L(",a)}f=c.indexOf("Dist(");while(f>=0){if(f>=0){a=c.indexOf(",",f+5);if(a>=0){e=c.slice(f+5,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+5)+d.id+c.slice(a)}}a=c.indexOf(",",f+5);f=c.indexOf(",",a);a=c.indexOf(")",f+1);if(a>=0){e=c.slice(f+1,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+1)+d.id+c.slice(a)}a=c.indexOf(")",f+1);f=c.indexOf("Dist(",a)}f=c.indexOf("Deg(");while(f>=0){if(f>=0){a=c.indexOf(",",f+4);if(a>=0){e=c.slice(f+4,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+4)+d.id+c.slice(a)}}a=c.indexOf(",",f+4);f=c.indexOf(",",a);a=c.indexOf(",",f+1);if(a>=0){e=c.slice(f+1,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+1)+d.id+c.slice(a)}a=c.indexOf(",",f+1);f=c.indexOf(",",a);a=c.indexOf(")",f+1);if(a>=0){e=c.slice(f+1,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+1)+d.id+c.slice(a)}a=c.indexOf(")",f+1);f=c.indexOf("Deg(",a)}f=c.indexOf("Rad(");while(f>=0){if(f>=0){a=c.indexOf(",",f+4);if(a>=0){e=c.slice(f+4,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+4)+d.id+c.slice(a)}}a=c.indexOf(",",f+4);f=c.indexOf(",",a);a=c.indexOf(",",f+1);if(a>=0){e=c.slice(f+1,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+1)+d.id+c.slice(a)}a=c.indexOf(",",f+1);f=c.indexOf(",",a);a=c.indexOf(")",f+1);if(a>=0){e=c.slice(f+1,a);e=e.replace(/\\(['"])?/g,"$1");d=this.board.elementsByName[e];c=c.slice(0,f+1)+d.id+c.slice(a)}a=c.indexOf(")",f+1);f=c.indexOf("Rad(",a)}return c};JXG.Algebra.prototype.replaceIdByObj=function(a){var b=/(X|Y|L)\(([\w_]+)\)/g;a=a.replace(b,'this.board.objects["$2"].$1()');b=/(Dist)\(([\w_]+),([\w_]+)\)/g;a=a.replace(b,'this.board.objects["$2"].Dist(this.board.objects["$3"])');b=/(Deg)\(([\w_]+),([ \w\[\w_]+),([\w_]+)\)/g;a=a.replace(b,'this.board.algebra.trueAngle(this.board.objects["$2"],this.board.objects["$3"],this.board.objects["$4"])');b=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g;a=a.replace(b,'this.board.algebra.rad(this.board.objects["$1"],this.board.objects["$2"],this.board.objects["$3"])');return a};JXG.Algebra.prototype.geonext2JS=function(b){b=b.replace(/&lt;/g,"<");b=b.replace(/&gt;/g,">");b=b.replace(/&amp;/g,"&");var d=this.board.elementsByName;var e;var c=b;c=this.replaceNameById(c);c=this.replaceIf(c);c=this.replacePow(c);c=this.replaceIdByObj(c);var g=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Floor","Log","Max","Min","Pow","Random","Round","Sin","Sqrt","Tan","Trunc"];var f=["Math.abs","Math.acos","Math.asin","Math.atan","Math.ceil","Math.cos","Math.exp","Math.floor","Math.log","Math.max","Math.min","Math.pow","Math.random","this.board.round","Math.sin","Math.sqrt","Math.tan","Math.ceil"];for(var a=0;a<g.length;a++){e=new RegExp(g[a],"g");c=c.replace(e,f[a])}c=c.replace(/True/g,"true");c=c.replace(/False/g,"false");c=c.replace(/fasle/g,"false");c=c.replace(/Pi/g,"Math.PI");return c};JXG.Algebra.prototype.findDependencies=function(d,b){var c;var f;var e=this.board.elementsByName;for(c in e){if(c!=d.name){var a=c.replace(/\[/g,"\\[");a=a.replace(/\]/g,"\\]");f=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+a+")(,[\\w\\[\\]'_ ]+)*\\)","g");if(b.search(f)>=0){e[c].addChild(d)}}}};JXG.Algebra.prototype.distance=function(d,c){var b=0;if(d.length!=c.length){return}for(var a=0;a<d.length;a++){b+=(d[a]-c[a])*(d[a]-c[a])}return Math.sqrt(b)};JXG.Algebra.prototype.affineDistance=function(b,a){if(b.length!=a.length){return}var c=this.distance(b,a);if(c>this.eps&&(Math.abs(b[0])<this.eps||Math.abs(a[0])<this.eps)){return Infinity}else{return c}};JXG.Algebra.prototype.rad=function(a,d,c){var b=this.trueAngle(a,d,c);return b*Math.PI/180};JXG.Algebra.prototype.matVecMult=function(g,e){var a=g.length;var h=e.length;var d=[];for(var c=0;c<a;c++){var f=0;for(var b=0;b<h;b++){f+=g[c][b]*e[b]}d[c]=f}return d};JXG.Algebra.prototype.matMatMult=function(b,a){var d=b.length;var c=a[0].length;var o=a.length;var h=[];for(var g=0;g<b.length;g++){h[g]=[]}for(g=0;g<d;g++){for(var f=0;f<c;f++){var q=0;for(var e=0;e<o;e++){q+=b[g][e]*a[e][f]}h[g][f]=q}}return h};JXG.Algebra.prototype.str2Bool=function(a){if(a==undefined||a==null){return true}if(typeof a=="boolean"){return a}if(a.toLowerCase()!="true"){return false}else{return true}};JXG.Algebra.prototype.pow=function(d,c){if(d==null||c==null){return 1}if(Math.floor(c)==c){return Math.pow(d,c)}else{if(d>0){return Math.exp(c*Math.log(Math.abs(d)))}else{return null}}};JXG.Algebra.prototype.crossProduct=function(c,b){var a=c[1]*b[2]-c[2]*b[1];var e=c[2]*b[0]-c[0]*b[2];var d=c[0]*b[1]-c[1]*b[0];return[a,e,d]};JXG.Algebra.prototype.innerProduct=function(d,c,g){var e;var f=0;for(e=0;e<g;e++){f+=d[e]*c[e]}return f};JXG.Algebra.prototype.meet=function(d,b,c){var a=0.000001;if(Math.abs(d[3])<a&&Math.abs(b[3])<a){return this.meetLineLine(d,b,c)}else{if(Math.abs(d[3])>=a&&Math.abs(b[3])<a){return this.meetLineCircle(b,d,c)}else{if(Math.abs(d[3])<a&&Math.abs(b[3])>=a){return this.meetLineCircle(d,b,c)}else{return this.meetCircleCircle(d,b,c)}}}};JXG.Algebra.prototype.meetLineLine=function(b,a,c){var d=this.crossProduct(b,a);if(Math.abs(d[0])>this.eps){d[1]/=d[0];d[2]/=d[0];d[0]=1}return new JXG.Coords(JXG.COORDS_BY_USER,d,this.board)};JXG.Algebra.prototype.meetLineCircle=function(j,e,q){if(e[4]<this.eps){return new JXG.Coords(JXG.COORDS_BY_USER,e.slice(1,3),this.board)}var v,u,s,r,m,h,g,f,o,w;s=e[0];u=e.slice(1,3);v=e[3];r=j[0];m=j.slice(1,3);h=v;g=(u[0]*m[1]-u[1]*m[0]);f=v*r*r-(u[0]*m[0]+u[1]*m[1])*r+s;o=g*g-4*h*f;if(o>=0){o=Math.sqrt(o);w=[(-g+o)/(2*h),(-g-o)/(2*h)];return((q==0)?new JXG.Coords(JXG.COORDS_BY_USER,[-w[0]*(-m[1])-r*m[0],-w[0]*m[0]-r*m[1]],this.board):new JXG.Coords(JXG.COORDS_BY_USER,[-w[1]*(-m[1])-r*m[0],-w[1]*m[0]-r*m[1]],this.board))}else{return new JXG.Coords(JXG.COORDS_BY_USER,[NaN,NaN],this.board)}};JXG.Algebra.prototype.meetCircleCircle=function(c,a,b){var d;if(c[4]<this.eps){if(this.distance(c.slice(1,3),a.slice(1,3))==a[4]){return new JXG.Coords(JXG.COORDS_BY_USER,c.slice(1,3),this.board)}else{return new JXG.Coords(JXG.COORDS_BY_USER,[NaN,NaN],this.board)}}if(a[4]<this.eps){if(this.distance(a.slice(1,3),c.slice(1,3))==c[4]){return new JXG.Coords(JXG.COORDS_BY_USER,a.slice(1,3),this.board)}else{return new JXG.Coords(JXG.COORDS_BY_USER,[NaN,NaN],this.board)}}d=[a[3]*c[0]-c[3]*a[0],a[3]*c[1]-c[3]*a[1],a[3]*c[2]-c[3]*a[2],0,1,Infinity,Infinity,Infinity];d=this.normalize(d);return this.meetLineCircle(d,c,b)};JXG.Algebra.prototype.normalize=function(c){var a=2*c[3];var d=c[4]/(a);c[5]=d;c[6]=-c[1]/a;c[7]=-c[2]/a;if(d==Infinity||isNaN(d)){var e=Math.sqrt(c[1]*c[1]+c[2]*c[2]);c[0]/=e;c[1]/=e;c[2]/=e;c[3]=0;c[4]=1}else{if(Math.abs(d)>=1){c[0]=(c[6]*c[6]+c[7]*c[7]-d*d)/(2*d);c[1]=-c[6]/d;c[2]=-c[7]/d;c[3]=1/(2*d);c[4]=1}else{var b=(d<=0)?(-1):(1);c[0]=b*(c[6]*c[6]+c[7]*c[7]-d*d)*0.5;c[1]=-b*c[6];c[2]=-b*c[7];c[3]=b/2;c[4]=b*d}}return c};JXG.Algebra.prototype.meetCurveCurve=function(k,h,g,w){var q=0;var n,m;var v,u,t,s,j;var r,o;if(arguments.callee.t1memo){n=arguments.callee.t1memo;m=arguments.callee.t2memo}else{n=g;m=w}if(n>k.maxX()){n=k.maxX()}if(n<k.minX()){n=k.minX()}if(m>h.maxX()){m=h.maxX()}if(m<h.minX()){m=h.minX()}r=k.X(n)-h.X(m);o=k.Y(n)-h.Y(m);var x=r*r+o*o;while(x>JXG.Math.eps&&q<1000){v=k.board.D(k.X,k)(n);u=-h.board.D(h.X,h)(m);t=k.board.D(k.Y,k)(n);s=-h.board.D(h.Y,h)(m);j=v*s-u*t;n-=(s*r-u*o)/j;m-=(v*o-t*r)/j;r=k.X(n)-h.X(m);o=k.Y(n)-h.Y(m);x=r*r+o*o;q++}arguments.callee.t1memo=n;arguments.callee.t2memo=m;if(Math.abs(n)<Math.abs(m)){return(new JXG.Coords(JXG.COORDS_BY_USER,[k.X(n),k.Y(n)],this.board))}else{return(new JXG.Coords(JXG.COORDS_BY_USER,[h.X(m),h.Y(m)],this.board))}};JXG.Intersection=function(e,b,d,c,g,f,m,k){this.constructor();this.board=e;this.id=b;this.name=this.id;this.visProp={};this.visProp.visible=true;this.show=true;this.real=true;this.notExistingParents={};this.intersect1=JXG.GetReferenceFromParameter(this.board,d);this.intersect2=JXG.GetReferenceFromParameter(this.board,c);this.type=JXG.OBJECT_TYPE_INTERSECTION;if(((this.intersect1=="")||(this.intersect1==undefined))&&((this.intersect2=="")||(this.intersect2==undefined))){return}if(((this.intersect1.type==this.intersect2.type)&&(this.intersect1.type==JXG.OBJECT_TYPE_LINE||this.intersect1.type==JXG.OBJECT_TYPE_ARROW))||((this.intersect1.type==JXG.OBJECT_TYPE_LINE)&&(this.intersect2.type==JXG.OBJECT_TYPE_ARROW))||((this.intersect2.type==JXG.OBJECT_TYPE_LINE)&&(this.intersect1.type==JXG.OBJECT_TYPE_ARROW))){var h=this.board.algebra.intersectLineLine(this.intersect1,this.intersect2).usrCoords.slice(1);this.p=new JXG.Point(this.board,h,g,m,true);this.p.fixed=true;this.addChild(this.p);this.real=true;this.update=function(){if(this.needsUpdate){this.p.coords=this.board.algebra.intersectLineLine(this.intersect1,this.intersect2);this.needsUpdate=false}};this.hideElement=function(){this.visProp.visible=false;this.p.hideElement()};this.showElement=function(){this.visProp.visible=true;this.p.showElement()};this.hideChild=function(o){this.notExistingParents[o]=this.board.objects[o];for(var n in this.descendants){if(this.descendants[n].visProp.visible&&this.descendants[n].type!=JXG.OBJECT_TYPE_INTERSECTION){this.descendants[n].hideElement();this.descendants[n].visProp.visible=true}this.descendants[n].notExistingParents[o]=this.board.objects[o]}};this.showChild=function(o){for(var n in this.board.objects){delete (this.board.objects[n].notExistingParents[o]);if(this.board.objects[n].visProp.visible&&JXG.keys(this.board.objects[n].notExistingParents).length==0){if(this.board.objects[n].type!=JXG.OBJECT_TYPE_INTERSECTION){this.board.objects[n].showElement()}}}}}else{if(((d.type==c.type)&&(d.type==JXG.OBJECT_TYPE_CIRCLE||d.type==JXG.OBJECT_TYPE_ARC))||(d.type==JXG.OBJECT_TYPE_CIRCLE&&c.type==JXG.OBJECT_TYPE_ARC)||(c.type==JXG.OBJECT_TYPE_CIRCLE&&d.type==JXG.OBJECT_TYPE_ARC)){this.p1=new JXG.Point(this.board,[0,0],g,m,false);this.p1.fixed=true;this.p1.label.show=true;this.p2=new JXG.Point(this.board,[0,0],f,k,false);this.p2.fixed=true;this.p2.label.show=true;this.addChild(this.p1);this.addChild(this.p2);var j=this.board.algebra.intersectCircleCircle(this.intersect1,this.intersect2);if(j[0]==1){this.p1.coords=j[1];this.p1.showElement();this.p1.updateRenderer();this.p2.coords=j[2];this.p2.showElement();this.p2.updateRenderer();this.real=true}else{this.real=false}this.update=function(){if(!this.needsUpdate){return}var q=this.board.algebra.intersectCircleCircle(this.intersect1,this.intersect2);var o=this.p1.visProp.visible;var n=this.p2.visProp.visible;if(q[0]==0){if(this.real){this.hideChild(this.id);this.p1.visProp.visible=o;this.p2.visProp.visible=n;this.real=false}}else{this.p1.coords=q[1];this.p2.coords=q[2];if(!this.real){this.showChild(this.id);this.real=true}}this.needsUpdate=false};this.hideElement=function(){this.visProp.visible=false;this.p1.hideElement();this.p2.hideElement()};this.showElement=function(){this.visProp.visible=true;this.p1.showElement();this.p2.showElement()};this.hideChild=function(o){this.notExistingParents[o]=this.board.objects[o];for(var n in this.descendants){if(this.descendants[n].visProp.visible&&this.descendants[n].type!=JXG.OBJECT_TYPE_INTERSECTION){this.descendants[n].hideElement();this.descendants[n].visProp.visible=true}this.descendants[n].notExistingParents[o]=this.board.objects[o]}};this.showChild=function(n){for(el in this.board.objects){delete (this.board.objects[el].notExistingParents[n]);if(this.board.objects[el].visProp.visible&&JXG.keys(this.board.objects[el].notExistingParents).length==0){if(this.board.objects[el].type!=JXG.OBJECT_TYPE_INTERSECTION){this.board.objects[el].showElement()}}}}}else{this.p1=new JXG.Point(this.board,[0,0],g,m,false);this.p1.fixed=true;this.p1.label.show=true;this.p2=new JXG.Point(this.board,[0,0],f,k,false);this.p2.fixed=true;this.p2.label.show=true;this.addChild(this.p1);this.addChild(this.p2);if(this.intersect1.type==JXG.OBJECT_TYPE_LINE||this.intersect1.type==JXG.OBJECT_TYPE_ARROW){var a=this.intersect1;this.intersect1=this.intersect2;this.intersect2=a}var j=this.board.algebra.intersectCircleLine(this.intersect1,this.intersect2);if(j[0]==1){this.p1.coords=j[1];this.p1.showElement();this.p1.update()}else{if(j[0]==2){this.p1.coords=j[1];this.p1.showElement();this.p2.coords=j[2];this.p2.showElement();this.p1.updateRenderer();this.p2.updateRenderer();this.real=true}else{this.real=false}}this.update=function(){if(!this.needsUpdate){return}var q=this.board.algebra.intersectCircleLine(this.intersect1,this.intersect2);var o=this.p1.visProp.visible;var n=this.p2.visProp.visible;if(q[0]==0){if(this.real){this.hideChild(this.id);this.p1.visProp.visible=o;this.p2.visProp.visible=n;this.real=false}}else{if(q[0]==2){this.p1.coords=q[1];this.p2.coords=q[2];if(!this.real){this.showChild(this.id);this.real=true}}}this.needsUpdate=false};this.hideElement=function(){this.visProp.visible=false;this.p1.hideElement();this.p2.hideElement()};this.showElement=function(){this.visProp.visible=true;this.p1.showElement();this.p2.showElement()};this.hideChild=function(o){this.notExistingParents[o]=this.board.objects[o];for(var n in this.descendants){if(this.descendants[n].visProp.visible&&this.descendants[n].type!=JXG.OBJECT_TYPE_INTERSECTION){this.descendants[n].hideElement();this.descendants[n].visProp.visible=true}this.descendants[n].notExistingParents[o]=this.board.objects[o]}};this.showChild=function(n){for(el in this.board.objects){delete (this.board.objects[el].notExistingParents[n]);if(this.board.objects[el].visProp.visible&&JXG.keys(this.board.objects[el].notExistingParents).length==0){if(this.board.objects[el].type!=JXG.OBJECT_TYPE_INTERSECTION){this.board.objects[el].showElement()}}}}}}this.id=this.board.addIntersection(this)};JXG.Intersection.prototype=new JXG.GeometryElement();JXG.Intersection.prototype.update=function(){return};JXG.Intersection.prototype.hasPoint=function(a,b){return false};JXG.Intersection.prototype.hideChild=function(a){};JXG.Intersection.prototype.showChild=function(a){};JXG.Intersection.prototype.remove=function(){if(this.p!=undefined){this.board.removeObject(this.p)}if(this.p1!=undefined){this.board.removeObject(this.p1)}if(this.p2!=undefined){this.board.removeObject(this.p2)}return};JXG.Intersection.prototype.updateRenderer=function(){};JXG.createPerpendicular=function(a,c,b){if(JXG.IsPoint(c[0])&&c[1].type==JXG.OBJECT_TYPE_LINE){if(!JXG.IsArray(b.id)){b.id=["",""]}if(!JXG.IsArray(b.name)){b.name=["",""]}return a.addPerpendicular(c[1],c[0],b.id[0],b.name[0],b.id[1],b.name[1])}else{if(JXG.IsPoint(c[1])&&c[0].type==JXG.OBJECT_TYPE_LINE){if(!JXG.IsArray(b.id)){b.id=["",""]}if(!JXG.IsArray(b.name)){b.name=["",""]}return a.addPerpendicular(c[0],c[1],b.id[0],b.name[0],b.id[1],b.name[1])}else{throw ("Can't create perpendicular with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}}};JXG.createMidpoint=function(a,c,b){if(c.length==2&&JXG.IsPoint(c[0])&&JXG.IsPoint(c[1])){return a.addMidpoint(c[0],c[1],b.id,b.name)}else{if(c.length==1&&c[0].type==JXG.OBJECT_TYPE_LINE){return a.addMidpoint(c[0].point1,c[0].point2,b.id,b.name)}else{throw ("Can't create midpoint.")}}};JXG.createParallel=function(a,c,b){if(JXG.IsPoint(c[0])&&c[1].type==JXG.OBJECT_TYPE_LINE){return a.addParallel(c[1],c[0],b.id,b.name)}else{if(JXG.IsPoint(c[1])&&c[0].type==JXG.OBJECT_TYPE_LINE){return a.addParallel(c[0],c[1],b.id,b.name)}else{throw ("Can't create parallel with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}}};JXG.createNormal=function(h,k,b){var a;var j;if(k.length==1){a=k[0];j=a.slideObject}else{if(k.length==2){if(JXG.IsPoint(k[0])){a=k[0];j=k[1]}else{if(JXG.IsPoint(k[1])){j=k[0];a=k[1]}else{throw ("Can't create normal with parent types '"+(typeof k[0])+"' and '"+(typeof k[1])+"'.")}}}else{throw ("Can't create normal with parent types '"+(typeof k[0])+"' and '"+(typeof k[1])+"'.")}}if(j.elementClass==JXG.OBJECT_CLASS_LINE){return h.createElement("line",[function(){return j.stdform[1]*a.Y()-j.stdform[2]*a.X()},function(){return j.stdform[2]*a.Z()},function(){return -j.stdform[1]*a.Z()}],b)}else{if(j.elementClass==JXG.OBJECT_CLASS_CIRCLE){var m=function(c){return -j.getRadius()*Math.sin(c)};var n=function(c){return j.getRadius()*Math.cos(c)};return h.createElement("line",[function(){return -a.X()*m(a.position)-a.Y()*n(a.position)},function(){return m(a.position)},function(){return n(a.position)}],b)}else{if(j.elementClass==JXG.OBJECT_CLASS_CURVE){var d=j.X;var e=j.Y;return h.createElement("line",[function(){return -a.X()*h.D(d)(a.position)-a.Y()*h.D(e)(a.position)},function(){return h.D(d)(a.position)},function(){return h.D(e)(a.position)}],b)}else{throw ("Can't create normal with parent types '"+(typeof k[0])+"' and '"+(typeof k[1])+"'.")}}}};JXG.createBisector=function(a,c,b){if(JXG.IsPoint(c[0])&&JXG.IsPoint(c[1])&&JXG.IsPoint(c[2])){return a.addAngleBisector(c[0],c[1],c[2],b.id,b.name)}else{throw ("Can't create angle bisector with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}};JXG.createArrowParallel=function(a,c,b){if(JXG.IsPoint(c[0])&&c[1].type==JXG.OBJECT_TYPE_ARROW){if(!JXG.IsArray(b.id)){b.id=["",""]}if(!JXG.IsArray(b.name)){b.name=["",""]}return a.addArrowParallel(c[1],c[0],b.id[0],b.name[0],b.id[1],b.name[1])}else{if(JXG.IsPoint(c[1])&&c[0].type==JXG.OBJECT_TYPE_ARROW){if(!JXG.IsArray(b.id)){b.id=["",""]}if(!JXG.IsArray(b.name)){b.name=["",""]}return a.addArrowParallel(c[0],c[1],b.id[0],b.name[0],b.id[1],b.name[1])}else{throw ("Can't create parallel arrow with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}}};JXG.createCircumcircle=function(a,c,b){if(JXG.IsPoint(c[0])&&JXG.IsPoint(c[1])&&JXG.IsPoint(c[2])){if(!JXG.IsArray(b.id)){b.id=["",""]}if(!JXG.IsArray(b.name)){b.name=["",""]}return a.addCircumcenter(c[0],c[1],c[2],b.id[0],b.name[0],b.id[1],b.name[1])}else{throw ("Can't create circumcircle with parent types '"+(typeof c[0])+"', '"+(typeof c[1])+"' and '"+(typeof c[2])+"'.")}};JXG.createCircumcircleMidpoint=function(a,c,b){if(JXG.IsPoint(c[0])&&JXG.IsPoint(c[1])&&JXG.IsPoint(c[2])){return a.addCircumcenterMidpoint(c[0],c[1],c[2],b.id,b.name)}else{throw ("Can't create circumcircle midpoint with parent types '"+(typeof c[0])+"', '"+(typeof c[1])+"' and '"+(typeof c[2])+"'.")}};JXG.createParallelPoint=function(a,c,b){if(JXG.IsPoint(c[0])&&JXG.IsPoint(c[1])&&JXG.IsPoint(c[2])){return a.addParallelPoint(c[0],c[1],c[2],b.id,b.name)}else{throw ("Can't create parallel point with parent types '"+(typeof c[0])+"', '"+(typeof c[1])+"' and '"+(typeof c[2])+"'.")}};JXG.createReflection=function(a,c,b){if(JXG.IsPoint(c[0])&&c[1].type==JXG.OBJECT_TYPE_LINE){return a.addReflection(c[1],c[0],b.id,b.name)}else{if(JXG.IsPoint(c[1])&&c[0].type==JXG.OBJECT_TYPE_LINE){return a.addReflection(c[0],c[1],b.id,b.name)}else{throw ("Can't create reflection point with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}}};JXG.createPerpendicularPoint=function(a,c,b){if(JXG.IsPoint(c[0])&&c[1].type==JXG.OBJECT_TYPE_LINE){return a.addPerpendicularPoint(c[1],c[0],b.id,b.name)}else{if(JXG.IsPoint(c[1])&&c[0].type==JXG.OBJECT_TYPE_LINE){return a.addPerpendicularPoint(c[0],c[1],b.id,b.name)}else{throw ("Can't create perpendicular point with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}}};JXG.createMirrorPoint=function(a,c,b){if(JXG.IsPoint(c[0])&&JXG.IsPoint(c[1])){return a.addRotation(c[0],c[1],Math.PI,b.id,b.name)}else{throw ("Can't create mirror point with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}};JXG.createIntegral=function(a,c,b){if(!JXG.IsArray(b.id)||(b.id.length!=5)){b.id=["","","","",""]}if(!JXG.IsArray(b.name)||(b.name.length!=5)){b.name=["","","","",""]}if(JXG.IsArray(c[0])&&c[1].type==JXG.OBJECT_TYPE_CURVE){return a.addIntegral(c[0],c[1],b.id,b.name,b)}else{if(JXG.IsArray(c[1])&&c[0].type==JXG.OBJECT_TYPE_CURVE){return a.addIntegral(c[1],c[0],b.id,b.name,b)}else{throw ("Can't create integral with parent types '"+(typeof c[0])+"' and '"+(typeof c[1])+"'.")}}};JXG.JSXGraph.registerElement("arrowparallel",JXG.createArrowParallel);JXG.JSXGraph.registerElement("bisector",JXG.createBisector);JXG.JSXGraph.registerElement("circumcircle",JXG.createCircumcircle);JXG.JSXGraph.registerElement("circumcirclemidpoint",JXG.createCircumcircleMidpoint);JXG.JSXGraph.registerElement("integral",JXG.createIntegral);JXG.JSXGraph.registerElement("midpoint",JXG.createMidpoint);JXG.JSXGraph.registerElement("mirrorpoint",JXG.createMirrorPoint);JXG.JSXGraph.registerElement("normal",JXG.createNormal);JXG.JSXGraph.registerElement("parallel",JXG.createParallel);JXG.JSXGraph.registerElement("parallelpoint",JXG.createParallelPoint);JXG.JSXGraph.registerElement("perpendicular",JXG.createPerpendicular);JXG.JSXGraph.registerElement("perpendicularpoint",JXG.createPerpendicularPoint);JXG.JSXGraph.registerElement("reflection",JXG.createReflection);JXG.Text=function(k,q,g,n,c,a,d){this.constructor();this.type=JXG.OBJECT_TYPE_TEXT;this.elementClass=JXG.OBJECT_CLASS_OTHER;this.init(k,c,a);this.contentStr=q;this.plaintextStr="";this.visProp.strokeColor=this.board.options.text.strokeColor;this.visProp.visible=true;if(d!=null){this.digits=d}else{this.digits=2}if((this.element=this.board.objects[g])){var h=this.element.getTextAnchor();this.element.addChild(this);this.relativeCoords=new JXG.Coords(JXG.COORDS_BY_USER,[parseFloat(n[0]),parseFloat(n[1])],this.board);this.coords=new JXG.Coords(JXG.COORDS_BY_USER,[this.relativeCoords.usrCoords[1]+h.usrCoords[1],this.relativeCoords.usrCoords[2]+h.usrCoords[2]],this.board)}else{var o=n[0];if(typeof o=="string"){var f=this.board.algebra.geonext2JS(o);this.X=new Function("","return "+f+";")}else{if(typeof o=="function"){this.X=o}else{if(typeof o=="number"){this.X=function(){return o}}}}var m=n[1];if(typeof m=="string"){var e=this.board.algebra.geonext2JS(m);this.Y=new Function("","return "+e+";")}else{if(typeof m=="function"){this.Y=m}else{if(typeof m=="number"){this.Y=function(){return m}}}}this.coords=new JXG.Coords(JXG.COORDS_BY_USER,[this.X(),this.Y()],this.board);var j="this.coords.setCoordinates(JXG.COORDS_BY_USER,[this.X(),this.Y()]);";this.updateCoords=new Function("",j)}if(typeof this.contentStr=="function"){this.updateText=function(){this.plaintextStr=this.contentStr()}}else{var b;if(typeof this.contentStr=="number"){b=(this.contentStr).toFixed(this.digits)}else{b=this.generateTerm(this.contentStr)}this.updateText=new Function("this.plaintextStr = "+b+";")}this.updateText();this.id=this.board.addText(this);this.notifyParents(this.contentStr)};JXG.Text.prototype=new JXG.GeometryElement();JXG.Text.prototype.hasPoint=function(a,b){return false};JXG.Text.prototype.update=function(){if(this.needsUpdate){if(this.relativeCoords){var a=this.element.getTextAnchor();this.coords.setCoordinates(JXG.COORDS_BY_USER,[this.relativeCoords.usrCoords[1]+a.usrCoords[1],this.relativeCoords.usrCoords[2]+a.usrCoords[2]])}else{this.updateCoords()}this.updateText()}};JXG.Text.prototype.updateRenderer=function(){if(this.needsUpdate){this.board.renderer.updateText(this);this.needsUpdate=false}};JXG.Text.prototype.generateTerm=function(e){var d=null;var g=this.board.elementsByName;var f='""';e=e.replace(/\"/g,'\\"');e=e.replace(/\'/g,"\\'");e=e.replace(/&amp;arc;/g,"&ang;");e=e.replace(/<arc\s*\/>/g,"&ang;");e=e.replace(/<sqrt\s*\/>/g,"&radic;");var c;c=e.indexOf("<value>");var a=e.indexOf("</value>");if(c>=0){while(c>=0){f+=' + "'+this.board.algebra.replaceSub(this.board.algebra.replaceSup(e.slice(0,c)))+'"';var b=e.slice(c+7,a);var d=this.board.algebra.geonext2JS(b);d=d.replace(/\\"/g,'"');d=d.replace(/\\'/g,"'");if(d.indexOf("toFixed")<0){f+="+("+d+").toFixed("+(this.digits)+")"}else{f+="+("+d+")"}e=e.slice(a+8);c=e.indexOf("<value>");a=e.indexOf("</value>")}}f+=' + "'+this.board.algebra.replaceSub(this.board.algebra.replaceSup(e))+'"';f=f.replace(/<overline>/g,"<span style=text-decoration:overline>");f=f.replace(/<\/overline>/g,"</span>");f=f.replace(/<arrow>/g,"<span style=text-decoration:overline>");f=f.replace(/<\/arrow>/g,"</span>");f=f.replace(/&amp;/g,"&");return f};JXG.Text.prototype.notifyParents=function(c){var b=null;var d=this.board.elementsByName;do{var a=/<value>([\w\s\*\/\^\-\+\(\)\[\],<>=!]+)<\/value>/;b=a.exec(c);if(b!=null){this.board.algebra.findDependencies(this,b[1]);c=c.substr(b.index);c=c.replace(a,"")}}while(b!=null)};JXG.createText=function(a,c,b){return new JXG.Text(a,c[c.length-1],null,c,b.id,b.name,b.digits)};JXG.JSXGraph.registerElement("text",JXG.createText);JXG.Image=function(e,d,g,b,f,h,a,c){this.type=JXG.OBJECT_TYPE_IMAGE;this.elementClass=JXG.OBJECT_CLASS_OTHER;this.transformations=[];this.init(e,h,a);this.coords=new JXG.Coords(JXG.COORDS_BY_USER,g,this.board);this.initialCoords=new JXG.Coords(JXG.COORDS_BY_USER,g,this.board);this.size=[b[0]*e.zoomX*e.unitX,b[1]*e.zoomY*e.unitY];this.imageBase64String=d;this.displayLevel=f;this.parent=c;this.visProp.visible=true;this.id=this.board.addImage(this)};JXG.Image.prototype=new JXG.GeometryElement;JXG.Image.prototype.hasPoint=function(a,b){return false};JXG.Image.prototype.updateRenderer=function(){this.updateTransform();this.board.renderer.updateImage(this)};JXG.Image.prototype.updateTransform=function(){if(this.transformations.length==0){return}for(var a=0;a<this.transformations.length;a++){this.transformations[a].update()}};JXG.Image.prototype.addTransform=function(a){if(JXG.IsArray(a)){for(var b=0;b<a.length;b++){this.transformations.push(a[b])}}else{this.transformations.push(a)}};JXG.createImage=function(a,c,b){return new JXG.Image(a,b.imageString,c[0],c[1],"images",false,false,undefined)};JXG.JSXGraph.registerElement("image",JXG.createImage);JXG.createSlider=function(m,v,r){var h,g,w,j,x,d,c,u,y,k,f,e,b,s,a,q,o;h=v[0];g=v[1];w=v[2][0];j=v[2][1];x=v[2][2];d=m.createElement("point",h,{visible:false,fixed:true,name:""});c=m.createElement("point",g,{visible:false,fixed:true,name:""});u=m.createElement("line",[d,c],{straightFirst:false,straightLast:false,strokewidth:1,name:""});y=1;k=m.createElement("ticks",[u,c.Dist(d)/y],{insertTicks:true});k.drawLabels=false;k.drawZero=true;d.needsRegularUpdate=false;c.needsRegularUpdate=false;u.needsRegularUpdate=false;f=h[0]+(g[0]-h[0])*(j-w)/(x-w);e=h[1]+(g[1]-h[1])*(j-w)/(x-w);b=m.createElement("point",[f,e],{slideObject:u,style:6,strokeColor:"#0080c0",fillColor:"#0080c0",name:""});s=m.createElement("line",[d,b],{straightFirst:false,straightLast:false,strokewidth:3,strokeColor:"#0080c0",name:""});a=m.createElement("point",[function(){return b.Dist(d)/c.Dist(d)*(x-w)+w},function(){return b.Dist(d)/c.Dist(d)*(x-w)+w}],{visible:false,name:""});a.Value=a.X;if(r.name&&r.name!=""){q=r.name+" = "}else{q=""}o=m.createElement("text",[((g[0]-h[0])*0.05+g[0]),((g[1]-h[1])*0.05+g[1]),function(){return q+(a.X()).toFixed(2)}],{name:""});return a};JXG.JSXGraph.registerElement("slider",JXG.createSlider);JXG.Chart=function(h,m,e){this.constructor();if(m.length==0){return}this.elements=[];var d=e.id||"";var b=e.name||"";this.init(h,d,b);var n,k,f;if(m.length>0&&(typeof m[0]=="number")){k=m;n=[];for(f=0;f<k.length;f++){n[f]=f+1}}else{if(m.length==1){k=m[0];n=[];var g;if(typeof k=="function"){g=k().length}else{g=k.length}for(f=0;f<g;f++){n[f]=f+1}}if(m.length==2){n=m[0];k=m[1]}}if(e==undefined){e={}}var a=e.chartStyle||"line";a=a.replace(/ /g,"");a=a.split(",");var j;for(f=0;f<a.length;f++){switch(a[f]){case"bar":j=this.drawBar(h,[n,k],e);break;case"line":j=this.drawLine(h,[n,k],e);break;case"spline":j=this.drawSpline(h,[n,k],e);break;case"pie":j=this.drawPie(h,[k],e);break;case"point":j=this.drawPoints(h,[n,k],e);break}}this.id=this.board.addChart(this)};JXG.Chart.prototype=new JXG.GeometryElement;JXG.Chart.prototype.drawLine=function(d,b,a){var e=d.createElement("curve",b,a);this.rendNode=e.rendNode;return e};JXG.Chart.prototype.drawSpline=function(d,h,a){var j=h[0];var f=h[1];var n=JXG.Math.Numerics.splineDef(j,f);var k=new Array();var b=0;var m=(j[j.length-1]-j[0])/d.canvasWidth*1;while(j[0]+b*m<j[j.length-1]){k[b]=j[0]+b*m;b++}var g=JXG.Math.Numerics.splineEval(k,j,f,n);var e=d.createElement("curve",[k,g],a);this.rendNode=e.rendNode;return e};JXG.Chart.prototype.drawBar=function(h,k,f){var g;var e=[];if(f.fillOpacity==undefined){f.fillOpacity=0.6}var m=k[0];var j=k[1];var n;if(f&&f.width){n=f.width}else{if(m.length<=1){n=1}else{n=m[1]-m[0];for(g=1;g<m.length-1;g++){n=(m[g+1]-m[g]<n)?(m[g+1]-m[g]):n}}n*=0.8}for(g=0;g<m.length;g++){var c,q,o,b,a;if(typeof m[g]=="function"){c=function(){return m[g]()-n*0.5};q=function(){return m[g]()};o=function(){return m[g]()+n*0.5}}else{c=m[g]-n*0.5;q=m[g];o=m[g]+n*0.5}if(typeof j[g]=="function"){a=b}else{a=j[g]+0.2}b=j[g];var d=[];if(f.dir=="horizontal"){d[0]=h.createElement("point",[0,c],{name:"",fixed:true,visible:false});d[1]=h.createElement("point",[b,c],{name:"",fixed:true,visible:false});d[2]=h.createElement("point",[b,o],{name:"",fixed:true,visible:false});d[3]=h.createElement("point",[0,o],{name:"",fixed:true,visible:false});if(f.labels&&f.labels[g]){h.createElement("text",[b,o,f.labels[g]],f)}}else{d[0]=h.createElement("point",[c,0],{name:"",fixed:true,visible:false});d[1]=h.createElement("point",[c,b],{name:"",fixed:true,visible:false});d[2]=h.createElement("point",[o,b],{name:"",fixed:true,visible:false});d[3]=h.createElement("point",[o,0],{name:"",fixed:true,visible:false});if(f.labels&&f.labels[g]){h.createElement("text",[o,b,f.labels[g]],f)}}f.withLines=false;e[g]=h.createElement("polygon",d,f)}this.rendNode=e[0].rendNode;return e};JXG.Chart.prototype.drawPoints=function(f,c,b){var d;var e=[];b.fixed=true;b.name="";var a=c[0];var g=c[1];for(d=0;d<a.length;d++){e[d]=f.createElement("point",[a[d],g[d]],b)}this.rendNode=e[0].rendNode;return e};JXG.Chart.prototype.drawPie=function(d,t,f){var g=t[0];if(g.length<=0){return}if(typeof g[0]=="function"){return}var r;var o=[];var j=[];var e=[];var k=d.mathStatistics.sum(g);var c=f.colorArray||["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#C3D9FF","#4096EE","#008C00"];var b=f.radius||4;var u={};u.name=f.name;u.id=f.id;u.strokeWidth=f.strokeWidth||1;u.strokeColor=f.strokeColor||"none";u.straightFirst=false;u.straightLast=false;u.fillColor=f.fillColor||"#FFFF88";u.fillOpacity=f.fillOpacity||0.6;u.highlightFillColor=f.highlightFillColor||"#FF7400";u.highlightStrokeColor=f.highlightStrokeColor||"#FF7400";var n=f.center||[0,0];var q=n[0];var a=n[1];var v=d.createElement("point",[q,a],{name:"",fixed:true,visible:false});o[0]=d.createElement("point",[b+q,0+a],{name:"",fixed:true,visible:false});var w=0;for(r=0;r<g.length;r++){w+=(k!=0)?(2*Math.PI*g[r]/k):0;var h=b*Math.cos(w)+q;var m=b*Math.sin(w)+a;o[r+1]=d.createElement("point",[h,m],{name:"",fixed:true,visible:false});j[r]=d.createElement("line",[v,o[r]],{strokeColor:"#ffffff",straightFirst:false,straightLast:false,strokeWidth:6,strokeOpacity:1});u.fillColor=c[r%c.length];e[r]=d.createElement("arc",[v,o[r],o[r+1]],u)}this.rendNode=e[0].rendNode;return e};JXG.Chart.prototype.updateRenderer=function(){};JXG.Chart.prototype.update=function(){if(this.needsUpdate){this.updateDataArray()}};JXG.Chart.prototype.updateDataArray=function(){};JXG.createChart=function(c,b,a){return new JXG.Chart(c,b,a)};JXG.JSXGraph.registerElement("chart",JXG.createChart);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(d,c){var a="";var m,j,g;var k,h,f,e;var b=0;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<d.length){k=this._keyStr.indexOf(d.charAt(b++));h=this._keyStr.indexOf(d.charAt(b++));f=this._keyStr.indexOf(d.charAt(b++));e=this._keyStr.indexOf(d.charAt(b++));m=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;a=a+String.fromCharCode(m);if(f!=64){a=a+String.fromCharCode(j)}if(e!=64){a=a+String.fromCharCode(g)}}if(c){a=Base64._utf8_decode(a)}return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var d="";var f=0;var g,e,b;g=e=b=0;while(f<a.length){g=a.charCodeAt(f);if(g<128){d+=String.fromCharCode(g);f++}else{if((g>191)&&(g<224)){e=a.charCodeAt(f+1);d+=String.fromCharCode(((g&31)<<6)|(e&63));f+=2}else{e=a.charCodeAt(f+1);b=a.charCodeAt(f+2);d+=String.fromCharCode(((g&15)<<12)|((e&63)<<6)|(b&63));f+=3}}}return d},_destrip:function(d){d.replace(/ /g,"");lines=[];var c=d.length/76;for(var b=0;b<c;b++){lines[b]=d.substr(b*76,76)}if(c!=d.length/76){lines[lines.length]=d.substr(c*76,d.length-(c*76))}var a="";for(var b=0;b<lines.length;b++){a+=lines[b]+"\n"}return a},decodeAsArray:function(b){var c=this.decode(b);var a=[];for(i=0;i<c.length;i++){a[i]=c.charCodeAt(i)}return a},decodeGEONExT:function(a){return decodeAsArray(destrip(a),false)}};JXG.Gunzip=function(J){var m=[];var A="";var N=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255];var Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99];var E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var n=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var s=J;var b=0;var f=0;var R=1;var a=0;function d(){a+=8;if(b<s.length){return s[++b]}else{return -1}}function o(){R=1}function M(){a++;var T=(R&1);R>>=1;if(R==0){R=d();T=(R&1);R=(R>>1)|128}return T}function K(T){var V=0;var U=T;while(U--){V=(V<<1)|M()}if(T){V=N[V]>>(8-T)}return V}var g=new Array(32768);var O=0;var L,B;function c(){O=0}function u(T){B++;g[O++]=T;m.push(String.fromCharCode(T));if(O==32768){O=0}}function k(){this.b0=0;this.b1=0;this.jump=null;this.jumppos=-1}var e=288;var t=new Array(e);var G=new Array(32);var C=0;var P=null;var q=null;var F=new Array(64);var D=new Array(64);var v=0;var y=new Array(17);y[0]=0;var H;var r;function h(){while(1){if(y[v]>=r){return -1}if(H[y[v]]==v){return y[v]++}y[v]++}}function z(){var U=P[C];var T;if(v==17){return -1}C++;v++;T=h();if(T>=0){U.b0=T}else{U.b0=32768;if(z()){return -1}}T=h();if(T>=0){U.b1=T;U.jump=null}else{U.b1=32768;U.jump=P[C];U.jumppos=C;if(z()){return -1}}v--;return 0}function j(W,U,X,T){var V;P=W;C=0;H=X;r=U;for(V=0;V<17;V++){y[V]=0}v=0;if(z()){return -1}return 0}function x(V){var Y=0;var W=V[Y];while(1){var T;if(T=M()){if(!(W.b1&32768)){return W.b1}W=W.jump;for(var U=0;U<V.length;U++){if(V[U]===W){Y=U;break}}}else{if(!(W.b0&32768)){return W.b0}Y++;W=V[Y]}}return -1}function S(){var ah,ab,ad,X;do{var ah=M();var ad=K(2);switch(ad){case 0:break;case 1:break;case 2:break;case 3:break;default:break}if(ad==0){}else{if(ad==1){var W;while(1){W=(N[K(7)]>>1);if(W>23){W=(W<<1)|M();if(W>199){W-=128;W=(W<<1)|M()}else{W-=48;if(W>143){W=W+136}}}else{W+=256}if(W<256){u(W)}else{if(W==256){break}else{var Y,ac;W-=256+1;Y=K(I[W])+Q[W];W=N[K(5)]>>3;if(w[W]>8){ac=K(8);ac|=(K(w[W]-8)<<8)}else{ac=K(w[W])}ac+=E[W];for(W=0;W<Y;W++){var ab=g[(O-ac)&32767];u(ab)}}}}}else{if(ad==2){var W,T,aa,V,ag;var af=new Array(288+32);aa=257+K(5);V=1+K(5);ag=4+K(4);for(W=0;W<19;W++){af[W]=0}for(W=0;W<ag;W++){af[n[W]]=K(3)}for(X=0;X<G.length;X++){G[X]=new k()}if(j(G,19,af,0)){c();return 1}T=aa+V;X=0;var Z=-1;while(X<T){Z++;W=x(G);if(W<16){af[X++]=W}else{if(W==16){var U;W=3+K(2);if(X+W>T){c();return 1}U=X?af[X-1]:0;while(W--){af[X++]=U}}else{if(W==17){W=3+K(3)}else{W=11+K(7)}if(X+W>T){c();return 1}while(W--){af[X++]=0}}}}for(X=0;X<t.length;X++){t[X]=new k()}if(j(t,aa,af,0)){c();return 1}for(X=0;X<G.length;X++){G[X]=new k()}var ae=new Array();for(X=aa;X<af.length;X++){ae[X-aa]=af[X]}if(j(G,V,ae,0)){c();return 1}while(1){W=x(t);if(W>=256){var Y,ac;W-=256;if(W==0){break}W--;Y=K(I[W])+Q[W];W=x(G);if(w[W]>8){ac=K(8);ac|=(K(w[W]-8)<<8)}else{ac=K(w[W])}ac+=E[W];while(Y--){var ab=g[(O-ac)&32767];u(ab)}}else{u(W)}}}}}}while(!ah);c();o();return 0}JXG.Gunzip.prototype.unzip=function(){d(2);S();return(m.join(""))}};JXG.Transformation=function(b,a,c){this.elementClass=JXG.OBJECT_CLASS_OTHER;this.matrix=[[1,0,0],[0,1,0],[0,0,1]];this.board=b;this.isNumericMatrix=false;this.setMatrix(b,a,c)};JXG.Transformation.prototype={};JXG.Transformation.prototype.update=function(){};JXG.Transformation.prototype.setMatrix=function(c,b,d){var a;this.isNumericMatrix=true;for(a=0;a<d.length;a++){if(typeof d[a]!="number"){this.isNumericMatrix=false;break}}if(b=="translate"){this.evalParam=JXG.createEvalFunction(c,d,2);this.update=function(){this.matrix[1][0]=this.evalParam(0);this.matrix[2][0]=this.evalParam(1)}}else{if(b=="scale"){this.evalParam=JXG.createEvalFunction(c,d,2);this.update=function(){this.matrix[1][1]=this.evalParam(0);this.matrix[2][2]=this.evalParam(1)}}else{if(b=="reflect"){if(d.length<4){d[0]=JXG.GetReferenceFromParameter(c,d[0])}if(d.length==2){d[1]=JXG.GetReferenceFromParameter(c,d[1])}if(d.length==4){this.evalParam=JXG.createEvalFunction(c,d,4)}this.update=function(){if(d.length==1){var e=d[0].point2.X()-d[0].point1.X();var j=d[0].point2.Y()-d[0].point1.Y();var f=d[0].point1.X();var h=d[0].point1.Y()}else{if(d.length==2){var e=d[1].X()-d[0].X();var j=d[1].Y()-d[0].Y();var f=d[0].X();var h=d[0].Y()}else{if(d.length==4){var e=this.evalParam(2)-this.evalParam(0);var j=this.evalParam(3)-this.evalParam(1);var f=this.evalParam(0);var h=this.evalParam(1)}}}var g=e*e+j*j;this.matrix[1][1]=(e*e-j*j)/g;this.matrix[1][2]=2*e*j/g;this.matrix[2][1]=2*e*j/g;this.matrix[2][2]=(-e*e+j*j)/g;this.matrix[1][0]=f*(1-this.matrix[1][1])-h*this.matrix[1][2];this.matrix[2][0]=h*(1-this.matrix[2][2])-f*this.matrix[2][1]}}else{if(b=="rotate"){if(d.length==3){this.evalParam=JXG.createEvalFunction(c,d,3)}else{if(d.length<=2){this.evalParam=JXG.createEvalFunction(c,d,1);if(d.length==2){d[1]=JXG.GetReferenceFromParameter(c,d[1])}}}this.update=function(){var f=this.evalParam(0);this.matrix[1][1]=Math.cos(f);this.matrix[1][2]=-Math.sin(f);this.matrix[2][1]=Math.sin(f);this.matrix[2][2]=Math.cos(f);if(d.length>1){if(d.length==3){var e=this.evalParam(1);var g=this.evalParam(2)}else{var e=d[1].X();var g=d[1].Y()}this.matrix[1][0]=e*(1-Math.cos(f))+g*Math.sin(f);this.matrix[2][0]=g*(1-Math.cos(f))-e*Math.sin(f)}}}else{if(b=="shear"){this.evalParam=JXG.createEvalFunction(c,d,1);this.update=function(){var e=this.evalParam(0);this.matrix[1][1]=Math.tan(e)}}else{if(b=="generic"){this.evalParam=JXG.createEvalFunction(c,d,9);this.update=function(){this.matrix[0][0]=this.evalParam(0);this.matrix[0][1]=this.evalParam(1);this.matrix[0][2]=this.evalParam(2);this.matrix[1][0]=this.evalParam(3);this.matrix[1][1]=this.evalParam(4);this.matrix[1][2]=this.evalParam(5);this.matrix[2][0]=this.evalParam(6);this.matrix[2][1]=this.evalParam(7);this.matrix[2][2]=this.evalParam(8)}}}}}}}};JXG.Transformation.prototype.apply=function(a){this.update();if(arguments[1]!=null){return this.matVecMult(this.matrix,a.initialCoords.usrCoords)}else{return this.matVecMult(this.matrix,a.coords.usrCoords)}};JXG.Transformation.prototype.applyOnce=function(b){if(!JXG.IsArray(b)){this.update();var d=this.matVecMult(this.matrix,b.coords.usrCoords);b.coords.setCoordinates(JXG.COORDS_BY_USER,[d[1],d[2]])}else{for(var a=0;a<b.length;a++){this.update();var d=this.matVecMult(this.matrix,b[a].coords.usrCoords);b[a].coords.setCoordinates(JXG.COORDS_BY_USER,[d[1],d[2]])}}};JXG.Transformation.prototype.bindTo=function(b){if(JXG.IsArray(b)){for(var a=0;a<b.length;a++){b[a].transformations.push(this)}}else{b.transformations.push(this)}};JXG.Transformation.prototype.matVecMult=function(b,a){return this.board.algebra.matVecMult(b,a)};JXG.Transformation.prototype.setProperty=function(a){};JXG.Transformation.prototype.melt=function(e){var d=[];for(var c=0;c<e.matrix.length;c++){d[c]=[]}this.update();e.update();for(c=0;c<e.matrix.length;c++){for(var b=0;b<this.matrix[0].length;b++){var f=0;for(var a=0;a<this.matrix.length;a++){f+=e.matrix[c][a]*this.matrix[a][b]}d[c][b]=f}}this.update=function(){for(c=0;c<this.matrix.length;c++){for(b=0;b<this.matrix[0].length;b++){this.matrix[c][b]=d[c][b]}}};return true};JXG.createTransform=function(a,c,b){return new JXG.Transformation(a,b.type,c)};JXG.JSXGraph.registerElement("transform",JXG.createTransform);JXG.Turtle=function(c,b,a){this.arrowLen=20;this.turtleIsHidden=false;this.board=c;if(a==null){this.attributes={}}else{this.attributes=a}this.attributes.straightFirst=false;this.attributes.straightLast=false;this.init();if(b.length!=0){if(b.length==3){this.setPos(b[0],b[1]);this.right(90-b[2])}else{if(b.length==2){if(JXG.IsArray(b[0])){this.setPos(b[0][0],b[0][1]);this.right(90-b[1])}else{this.setPos(b[0],b[1])}}else{this.setPos(b[0][0],b[0][1])}}}return this};JXG.Turtle.prototype=new JXG.GeometryElement;JXG.Turtle.prototype.init=function(){this.arrowLen=20/Math.sqrt(this.board.unitX*this.board.unitX+this.board.unitY*this.board.unitY);this.pos=[0,0];this.isPenDown=true;this.dir=90;this.stack=[];this.objects=[];this.attributes.curveType="plot";this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve);this.turtle=this.board.createElement("point",this.pos,{fixed:true,name:" ",visible:false});this.objects.push(this.turtle);this.turtle2=this.board.createElement("point",[this.pos[0],this.pos[1]+this.arrowLen],{fixed:true,name:" ",visible:false});this.objects.push(this.turtle2);var a=this.attributes.strokeWidth||this.attributes.strokewidth||2;this.arrow=this.board.createElement("line",[this.turtle,this.turtle2],{lastArrow:true,strokeColor:"#ff0000",straightFirst:false,straightLast:false,strokeWidth:a});this.objects.push(this.arrow);this.board.update()};JXG.Turtle.prototype.forward=function(a){if(a==0){return}var c=a*Math.cos(this.dir*Math.PI/180);var b=a*Math.sin(this.dir*Math.PI/180);if(!this.turtleIsHidden){var d=this.board.createElement("transform",[c,b],{type:"translate"});d.applyOnce(this.turtle);d.applyOnce(this.turtle2)}if(this.isPenDown){if(this.curve.dataX.length>=8192){this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve)}}this.pos[0]+=c;this.pos[1]+=b;if(this.isPenDown){this.curve.dataX.push(this.pos[0]);this.curve.dataY.push(this.pos[1])}this.board.update();return this};JXG.Turtle.prototype.back=function(a){return this.forward(-a)};JXG.Turtle.prototype.right=function(b){this.dir-=b;this.dir%=360;if(!this.turtleIsHidden){var a=this.board.createElement("transform",[-b*Math.PI/180,this.turtle],{type:"rotate"});a.applyOnce(this.turtle2)}this.board.update();return this};JXG.Turtle.prototype.left=function(a){return this.right(-a)};JXG.Turtle.prototype.penUp=function(){this.isPenDown=false;return this};JXG.Turtle.prototype.penDown=function(){this.isPenDown=true;this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve);return this};JXG.Turtle.prototype.clean=function(){for(var a=0;a<this.objects.length;a++){var b=this.objects[a];if(b.type==JXG.OBJECT_TYPE_CURVE){this.board.removeObject(b.id);this.objects.splice(a,1)}}this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve);this.board.update();return this};JXG.Turtle.prototype.clearScreen=function(){for(var a=0;a<this.objects.length;a++){var b=this.objects[a];this.board.removeObject(b.id)}this.init();return this};JXG.Turtle.prototype.setPos=function(a,c){if(JXG.IsArray(a)){this.pos=a}else{this.pos=[a,c]}if(!this.turtleIsHidden){this.turtle.setPositionDirectly(JXG.COORDS_BY_USER,a,c);this.turtle2.setPositionDirectly(JXG.COORDS_BY_USER,a,c+this.arrowLen);var b=this.board.createElement("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"});b.applyOnce(this.turtle2)}this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve);this.board.update();return this};JXG.Turtle.prototype.setPenSize=function(a){this.attributes.strokeWidth=a;this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve);return this};JXG.Turtle.prototype.setPenColor=function(a){this.attributes.strokeColor=a;this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve);return this};JXG.Turtle.prototype.setProperty=function(){var d;var a;var c;var b;for(c=0;c<arguments.length;c++){a=arguments[c];if(typeof a=="string"){d=a.split(":")}else{if(!JXG.IsArray(a)){for(var b in a){this.setProperty([b,a[b]])}return this}else{d=a}}this.attributes[d[0]]=d[1]}this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve);return this};JXG.Turtle.prototype.showTurtle=function(){this.turtleIsHidden=false;this.arrow.setProperty("visible:true");this.setPos(this.pos[0],this.pos[1]);this.board.update();return this};JXG.Turtle.prototype.hideTurtle=function(){this.turtleIsHidden=true;this.arrow.setProperty("visible:false");this.setPos(this.pos[0],this.pos[1]);this.board.update();return this};JXG.Turtle.prototype.home=function(){this.pos=[0,0];this.setPos(this.pos[0],this.pos[1]);return this};JXG.Turtle.prototype.pushTurtle=function(){this.stack.push([this.pos[0],this.pos[1],this.dir]);return this};JXG.Turtle.prototype.popTurtle=function(){var a=this.stack.pop();this.pos[0]=a[0];this.pos[1]=a[1];this.dir=a[2];this.setPos(this.pos[0],this.pos[1]);return this};JXG.Turtle.prototype.lookTo=function(e){if(JXG.IsArray(e)){var b=this.pos[0];var a=this.pos[1];var g=e[0];var d=e[1];var c;var f=(g-b>0)?1:-1;if(Math.abs(g-b)>1e-7){c=Math.atan((d-a)/(g-b))+((f<0)?Math.PI:0)}else{c=((d-a>0)?0.5:-0.5)*Math.PI}this.right(this.dir-(c*180/Math.PI))}else{if(JXG.IsNumber(e)){this.right(this.dir-(e))}}return this};JXG.Turtle.prototype.moveTo=function(d){if(JXG.IsArray(d)){var b=d[0]-this.pos[0];var a=d[1]-this.pos[1];if(!this.turtleIsHidden){var c=this.board.createElement("transform",[b,a],{type:"translate"});c.applyOnce(this.turtle);c.applyOnce(this.turtle2)}if(this.isPenDown){if(this.curve.dataX.length>=8192){this.curve=this.board.createElement("curve",[[this.pos[0]],[this.pos[1]]],this.attributes);this.objects.push(this.curve)}}this.pos[0]=d[0];this.pos[1]=d[1];if(this.isPenDown){this.curve.dataX.push(this.pos[0]);this.curve.dataY.push(this.pos[1])}this.board.update()}return this};JXG.Turtle.prototype.fd=function(a){return this.forward(a)};JXG.Turtle.prototype.bk=function(a){return this.back(a)};JXG.Turtle.prototype.lt=function(a){return this.left(a)};JXG.Turtle.prototype.rt=function(a){return this.right(a)};JXG.Turtle.prototype.pu=function(){return this.penUp()};JXG.Turtle.prototype.pd=function(){return this.penDown()};JXG.Turtle.prototype.ht=function(){return this.hideTurtle()};JXG.Turtle.prototype.st=function(){return this.showTurtle()};JXG.Turtle.prototype.cs=function(){return this.clearScreen()};JXG.Turtle.prototype.push=function(){return this.pushTurtle()};JXG.Turtle.prototype.pop=function(){return this.popTurtle()};JXG.Turtle.prototype.X=function(a){return this.pos[0]};JXG.Turtle.prototype.Y=function(a){return this.pos[1]};JXG.createTurtle=function(c,b,a){if(b==null){var b=[]}return new JXG.Turtle(c,b,a)};JXG.JSXGraph.registerElement("turtle",JXG.createTurtle);JXG.RGBColor=function(g){this.ok=false;if(g.charAt(0)=="#"){g=g.substr(1,6)}g=g.replace(/ /g,"");g=g.toLowerCase();var a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var c in a){if(g==c){g=a[c]}}var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(j){return[parseInt(j[1]),parseInt(j[2]),parseInt(j[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(j){return[parseInt(j[1],16),parseInt(j[2],16),parseInt(j[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(j){return[parseInt(j[1]+j[1],16),parseInt(j[2]+j[2],16),parseInt(j[3]+j[3],16)]}}];for(var b=0;b<h.length;b++){var e=h[b].re;var d=h[b].process;var f=e.exec(g);if(f){channels=d(f);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b)};JXG.RGBColor.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};JXG.RGBColor.prototype.toHex=function(){var d=this.r.toString(16);var c=this.g.toString(16);var a=this.b.toString(16);if(d.length==1){d="0"+d}if(c.length==1){c="0"+c}if(a.length==1){a="0"+a}return"#"+d+c+a};JXG.Board=function(a,e,b,k,j,h,g,f,c,d){this.BOARD_MODE_NONE=0;this.BOARD_MODE_DRAG=1;this.BOARD_MODE_CONSTRUCT=16;this.BOARD_MODE_MOVE_ORIGIN=2;this.BOARD_QUALITY_LOW=1;this.BOARD_QUALITY_HIGH=2;this.CONSTRUCTION_TYPE_POINT=1129599060;this.CONSTRUCTION_TYPE_CIRCLE=1129595724;this.CONSTRUCTION_TYPE_LINE=1129598030;this.CONSTRUCTION_TYPE_GLIDER=1129596740;this.CONSTRUCTION_TYPE_MIDPOINT=1129598288;this.CONSTRUCTION_TYPE_PERPENDICULAR=1129599044;this.CONSTRUCTION_TYPE_PARALLEL=1129599052;this.CONSTRUCTION_TYPE_INTERSECTION=1129597267;this.container=a;this.containerObj=document.getElementById(this.container);this.containerObj.undoPositioned;this.renderer=e;this.options=new JXG.Options();this.dimension=2;this.origin={};this.origin.usrCoords=[1,0,0];this.origin.scrCoords=[1,k[0],k[1]];this.zoomX=j;this.zoomY=h;this.unitX=g;this.unitY=f;this.canvasWidth=c;this.canvasHeight=d;this.fontSize=this.options.fontSize;this.algebra=new JXG.Algebra(this);this.mathStatistics=new JXG.MathStatistics();if((b!="")&&(b!=null)&&(typeof document.getElementById(b)!="undefined")){this.id=b}else{this.id=this.generateId()}this.hooks=[];this.objects={};this.highlightedObjects={};this.numObjects=0;this.elementsByName={};this.mode=this.BOARD_MODE_NONE;this.updateQuality=this.BOARD_QUALITY_HIGH;this.isSuspendedRedraw=false;this.snapToGrid=this.options.grid.snapToGrid;this.gridX=this.options.grid.gridX;this.gridY=this.options.grid.gridY;this.gridColor=this.options.grid.gridColor;this.gridOpacity=this.options.grid.gridOpacity;this.gridDash=this.options.grid.gridDash;this.snapSizeX=this.options.grid.snapSizeX;this.snapSizeY=this.options.grid.snapSizeY;this.calculateSnapSizes();this.hasGrid=this.options.grid.hasGrid;this.drag_dx=0;this.drag_dy=0;this.drag_obj=null;this.xmlString="";this.renderer.displayCopyright(JXG.JSXGraph.licenseText,this.options.fontSize);this.fullUpdate=false;this.reducedUpdate=false;this.geonextCompatibilityMode=false;JXG.addEvent(document,"mousedown",this.mouseDownListener,this);JXG.addEvent(this.containerObj,"mousemove",this.mouseMoveListener,this)};JXG.Board.prototype.generateName=function(b){var g;if(b.elementClass==JXG.OBJECT_CLASS_POINT){g=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}else{g=["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]}var d=3;var h="";if(b.elementClass==JXG.OBJECT_CLASS_POINT||b.elementClass==JXG.OBJECT_CLASS_LINE){h=""}else{if(b.type==JXG.OBJECT_TYPE_POLYGON){h="P_"}else{if(b.type==JXG.OBJECT_TYPE_CIRCLE){h="k_"}else{h="s_"}}}var k=[];var a="";var e="";var f=0;var c=0;for(f=0;f<d;f++){k[f]=0}while(k[d-1]<g.length){for(k[0]=1;k[0]<g.length;k[0]++){a=h;for(f=d;f>0;f--){a+=g[k[f-1]]}if(this.elementsByName[a]==null){return a}}k[0]=g.length;for(f=1;f<d;f++){if(k[f-1]==g.length){k[f-1]=1;k[f]++}}}return""};JXG.Board.prototype.generateId=function(){var a=1;while(JXG.JSXGraph.boards["gxtBoard"+a]!=null){a=Math.round(Math.random()*33)}return("gxtBoard"+a)};JXG.Board.prototype.getRelativeMouseCoordinates=function(b){var c=this.containerObj;var a=JXG.getOffset(c);a[0]+=parseInt(JXG.getStyle(c,"borderLeftWidth"));a[1]+=parseInt(JXG.getStyle(c,"borderTopWidth"));a[0]+=parseInt(JXG.getStyle(c,"paddingLeft"));a[1]+=parseInt(JXG.getStyle(c,"paddingTop"));return a};JXG.Board.prototype.clickLeftArrow=function(a){this.origin.scrCoords[1]-=this.canvasWidth*0.1;this.fullUpdate=true;this.moveOrigin();this.fullUpdate=false};JXG.Board.prototype.clickRightArrow=function(a){this.origin.scrCoords[1]+=this.canvasWidth*0.1;this.fullUpdate=true;this.moveOrigin();this.fullUpdate=false};JXG.Board.prototype.clickUpArrow=function(a){this.origin.scrCoords[2]+=this.canvasHeight*0.1;this.fullUpdate=true;this.moveOrigin();this.fullUpdate=false};JXG.Board.prototype.clickDownArrow=function(a){this.origin.scrCoords[2]-=this.canvasHeight*0.1;this.fullUpdate=true;this.moveOrigin();this.fullUpdate=false};JXG.Board.prototype.mouseUpListener=function(a){this.updateQuality=this.BOARD_QUALITY_HIGH;JXG.removeEvent(document,"mouseup",this.mouseUpListener);if(this.mode==this.BOARD_MODE_MOVE_ORIGIN){this.fullUpdate=true;this.moveOrigin()}this.mode=this.BOARD_MODE_NONE;var b=this.reducedUpdate;this.reducedUpdate=false;this.update();this.reducedUpdate=b;this.fullUpdate=false;this.drag_obj=null};JXG.Board.prototype.mouseDownListener=function(f){var d;var e=this.getRelativeMouseCoordinates(f);var a=JXG.getPosition(f);var c=a[0]-e[0];var b=a[1]-e[1];if(f.shiftKey){this.drag_dx=c-this.origin.scrCoords[1];this.drag_dy=b-this.origin.scrCoords[2];this.mode=this.BOARD_MODE_MOVE_ORIGIN;JXG.addEvent(document,"mouseup",this.mouseUpListener,this);return}if(this.mode==this.BOARD_MODE_CONSTRUCT){return}this.mode=this.BOARD_MODE_DRAG;if(this.mode==this.BOARD_MODE_DRAG){for(d in this.objects){if((this.objects[d].hasPoint!=undefined)&&(this.objects[d].hasPoint(c,b))&&((this.objects[d].type==JXG.OBJECT_TYPE_POINT)||(this.objects[d].type==JXG.OBJECT_TYPE_GLIDER))&&(this.objects[d].visProp.visible)&&(!this.objects[d].fixed)){this.drag_obj=this.objects[d];if((this.objects[d].type==JXG.OBJECT_TYPE_POINT)||(this.objects[d].type==JXG.OBJECT_TYPE_GLIDER)){break}}}}if(this.drag_obj==null){this.mode=this.BOARD_MODE_NONE;return}this.dragObjCoords=new JXG.Coords(JXG.COORDS_BY_SCREEN,[c,b],this);JXG.addEvent(document,"mouseup",this.mouseUpListener,this)};JXG.Board.prototype.mouseMoveListener=function(c){var e;var g=this.getRelativeMouseCoordinates(c);var b=JXG.getPosition(c);var a=b[0]-g[0];var h=b[1]-g[1];this.updateQuality=this.BOARD_QUALITY_LOW;this.dehighlightAll();if(this.mode==this.BOARD_MODE_MOVE_ORIGIN){this.origin.scrCoords[1]=a-this.drag_dx;this.origin.scrCoords[2]=h-this.drag_dy;this.fullUpdate=true;this.moveOrigin()}else{if(this.mode==this.BOARD_MODE_DRAG){var d=new JXG.Coords(JXG.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(a,h),this);if(this.drag_obj.type==JXG.OBJECT_TYPE_POINT||this.drag_obj.type==JXG.OBJECT_TYPE_LINE||this.drag_obj.type==JXG.OBJECT_TYPE_CIRCLE||this.drag_obj.type==JXG.OBJECT_TYPE_CURVE){if((this.geonextCompatibilityMode&&this.drag_obj.type==JXG.OBJECT_TYPE_POINT)||this.drag_obj.group.length!=0){this.drag_obj.setPositionDirectly(JXG.COORDS_BY_USER,d.usrCoords[1],d.usrCoords[2])}else{this.drag_obj.setPositionByTransform(JXG.COORDS_BY_USER,d.usrCoords[1]-this.dragObjCoords.usrCoords[1],d.usrCoords[2]-this.dragObjCoords.usrCoords[2]);this.dragObjCoords=d}this.update()}else{if(this.drag_obj.type==JXG.OBJECT_TYPE_GLIDER){var f=this.drag_obj.coords;this.drag_obj.setPositionDirectly(JXG.COORDS_BY_USER,d.usrCoords[1],d.usrCoords[2]);if(this.drag_obj.slideObject.type==JXG.OBJECT_TYPE_CIRCLE){this.drag_obj.coords=this.algebra.projectPointToCircle(this.drag_obj,this.drag_obj.slideObject)}else{if(this.drag_obj.slideObject.type==JXG.OBJECT_TYPE_LINE){this.drag_obj.coords=this.algebra.projectPointToLine(this.drag_obj,this.drag_obj.slideObject)}}if(this.drag_obj.group.length!=0){this.drag_obj.group[this.drag_obj.group.length-1].dX=this.drag_obj.coords.scrCoords[1]-f.scrCoords[1];this.drag_obj.group[this.drag_obj.group.length-1].dY=this.drag_obj.coords.scrCoords[2]-f.scrCoords[2];this.drag_obj.group[this.drag_obj.group.length-1].update(this)}else{this.update(this.drag_obj)}}}}else{for(e in this.objects){if((this.objects[e].hasPoint!=undefined)&&(this.objects[e].hasPoint(a,h))&&(this.objects[e].visProp.visible==true)){this.renderer.highlight(this.objects[e]);this.highlightedObjects[e]=this.objects[e]}}}}this.fullUpdate=false};JXG.Board.prototype.dehighlightAll=function(){for(var a in this.highlightedObjects){this.renderer.noHighlight(this.highlightedObjects[a])}this.highlightedObjects={}};JXG.Board.prototype.getScrCoordsOfMouse=function(a,c){if(this.snapToGrid){var b=new JXG.Coords(JXG.COORDS_BY_SCREEN,[a,c],this);b.setCoordinates(JXG.COORDS_BY_USER,[Math.round((b.usrCoords[1])*this.snapSizeX)/this.snapSizeX,Math.round((b.usrCoords[2])*this.snapSizeY)/this.snapSizeY]);return[b.scrCoords[1],b.scrCoords[2]]}else{return[a,c]}};JXG.Board.prototype.getUsrCoordsOfMouse=function(e){var c=this.getRelativeMouseCoordinates(e);var b=JXG.getPosition(e);var a=b[0]-c[0];var f=b[1]-c[1];var d=new JXG.Coords(JXG.COORDS_BY_SCREEN,[a,f],this);if(this.snapToGrid){d.setCoordinates(JXG.COORDS_BY_USER,[Math.round((d.usrCoords[1])*this.snapSizeX)/this.snapSizeX,Math.round((d.usrCoords[2])*this.snapSizeY)/this.snapSizeY])}return[d.usrCoords[1],d.usrCoords[2]]};JXG.Board.prototype.getAllUnderMouse=function(b){var a=this.getAllObjectsUnderMouse(b);a.push(this.getUsrCoordsOfMouse(b));return a};JXG.Board.prototype.getAllObjectsUnderMouse=function(g){var f=this.getRelativeMouseCoordinates(g);var a=JXG.getPosition(g);var c=a[0]-f[0];var b=a[1]-f[1];var d=[];for(var e in this.objects){if(this.objects[e].hasPoint(c,b)){d.push(this.objects[e])}}return d};JXG.Board.prototype.setBoardMode=function(a){this.mode=a};JXG.Board.prototype.moveOrigin=function(){for(var a in this.objects){if((this.objects[a].elementClass==JXG.OBJECT_CLASS_POINT)||(this.objects[a].type==JXG.OBJECT_TYPE_CURVE)||(this.objects[a].type==JXG.OBJECT_TYPE_AXIS)||(this.objects[a].type==JXG.OBJECT_TYPE_TEXT)){if((this.objects[a].type!=JXG.OBJECT_TYPE_CURVE)&&(this.objects[a].type!=JXG.OBJECT_TYPE_AXIS)){this.objects[a].coords.usr2screen()}}}this.clearTraces();this.update();if(this.hasGrid){this.renderer.removeGrid(this);this.renderer.drawGrid(this)}};JXG.Board.prototype.addPoint=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"P"+b}c.label.id=a+"Label";this.objects[a]=c;this.elementsByName[c.name]=c;c.id=a;this.renderer.drawPoint(c);this.renderer.drawLabel(c.label);if(!c.visProp.visible){this.renderer.hide(c)}if(!c.label.show){this.renderer.hide(c.label)}return a};JXG.Board.prototype.addLine=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"L"+b}this.objects[a]=c;c.id=a;this.renderer.drawLine(c);return a};JXG.Board.prototype.addCircle=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"C"+b}this.objects[a]=c;c.id=a;this.renderer.drawCircle(c);return a};JXG.Board.prototype.addPolygon=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"Py"+b}this.objects[a]=c;c.id=a;this.renderer.drawPolygon(c);return a};JXG.Board.prototype.addArc=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"Ac"+b}this.objects[a]=c;c.id=a;this.renderer.drawArc(c);return a};JXG.Board.prototype.addSector=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"Sc"+b}this.objects[a]=c;c.id=a;return a};JXG.Board.prototype.addAngle=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"Ag"+b}this.objects[a]=c;c.id=a;this.renderer.drawAngle(c);return a};JXG.Board.prototype.addCurve=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"G"+b}this.objects[a]=c;c.id=a;this.renderer.drawCurve(c);return a};JXG.Board.prototype.addChart=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"Chart"+b}this.objects[a]=c;c.id=a;return a};JXG.Board.prototype.addMidpoint=function(g,f,h,b){var d=JXG.GetReferenceFromParameter(this,g);var c=JXG.GetReferenceFromParameter(this,f);var a=this.algebra.midpoint(d,c).usrCoords.slice(1);var e=new JXG.Point(this,a,h,b,true);e.fixed=true;d.addChild(e);c.addChild(e);e.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.midpoint(d,c);this.label.setCoordinates(this.coords);if(this.traced){this.cloneToBackground(true)}}};return e};JXG.Board.prototype.addReflection=function(d,c,h,f){var e=JXG.GetReferenceFromParameter(this,c);var b=JXG.GetReferenceFromParameter(this,d);var a=this.algebra.reflection(b,e).usrCoords.slice(1);var g=new JXG.Point(this,a,h,f,true);g.fixed=true;e.addChild(g);b.addChild(g);g.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.reflection(b,e);this.label.setCoordinates(this.coords);if(this.traced){this.cloneToBackground(true)}}};return g};JXG.Board.prototype.addRotation=function(a,j,h,d,b){var e=JXG.GetReferenceFromParameter(this,j);var g=JXG.GetReferenceFromParameter(this,a);var f=this.algebra.rotation(g,e,h).usrCoords.slice(1);var c=new JXG.Point(this,f,d,b,true);c.fixed=true;e.addChild(c);g.addChild(c);c.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.rotation(g,e,h);this.label.setCoordinates(this.coords);this.needsUpdate=false;if(this.traced){this.cloneToBackground(true)}}};return c};JXG.Board.prototype.addParallel=function(d,c,b,a){var j=JXG.GetReferenceFromParameter(this,c);var k=JXG.GetReferenceFromParameter(this,d);var e=this.numObjects;e++;if((b=="")||(b==null)){b=this.id+"L"+e}var g=this.algebra.parallel(k.point1,k.point2,j).usrCoords.slice(1);var h=new JXG.Point(this,g,b+"P2",a,false);h.fixed=true;j.addChild(h);var f=new JXG.Line(this,j.id,h.id,b,b);f.update=function(){if(this.needsUpdate){this.point2.coords=this.board.algebra.parallel(k.point1,k.point2,j);this.updateStdform();if(this.traced){this.cloneToBackground(true)}}};return f};JXG.Board.prototype.addArrowParallel=function(k,b,n,e,f,g){var o=JXG.GetReferenceFromParameter(this,b);var m=JXG.GetReferenceFromParameter(this,k);var c=this.numObjects;c++;if((n=="")||(n==null)){n=this.id+"A"+c}c++;if((e=="")||(e==null)){e=this.id+"P"+c}var h=this.algebra.parallel(m.point1,m.point2,o).usrCoords.slice(1);var j=new JXG.Point(this,h,e,g,true);j.fixed=true;o.addChild(j);m.addChild(j);var d=new JXG.Line(this,o.id,j.id,n,f);d.setStraight(false,false);d.setArrow(false,true);d.update=function(){if(this.needsUpdate){this.point2.coords=this.board.algebra.parallel(m.point1,m.point2,o);this.updateStdform();if(this.traced){this.cloneToBackground(true)}}};j.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.parallel(m.point1,m.point2,o);if(this.label.show){this.label.setCoordinates(this.coords)}if(this.traced){this.cloneToBackground(true)}}};return[d,j]};JXG.Board.prototype.addParallelPoint=function(g,f,e,h,a){var d=this.numObjects;d++;if((h=="")||(h==null)){h=this.id+"P"+d}g=JXG.GetReferenceFromParameter(this,g);f=JXG.GetReferenceFromParameter(this,f);e=JXG.GetReferenceFromParameter(this,e);var c=this.algebra.parallel(g,f,e).usrCoords.slice(1);var b=new JXG.Point(this,c,h,a,true);b.fixed=true;g.addChild(b);e.addChild(b);if(g.type==JXG.OBJECT_TYPE_POINT){f.addChild(b)}b.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.parallel(g,f,e);this.label.setCoordinates(this.coords);if(this.traced){this.cloneToBackground(true)}}};return b};JXG.Board.prototype.addArrow=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"A"+b}this.objects[a]=c;c.id=a;this.renderer.drawArrow(c);return a};JXG.Board.prototype.addNormal=function(e,c,b,a){var k=JXG.GetReferenceFromParameter(this,c);var m=JXG.GetReferenceFromParameter(this,e);var f=this.numObjects;f++;if((b=="")||(b==null)){b=this.id+"L"+f}var j=this.algebra.perpendicular(m,k);var g=j[0].usrCoords.slice(1);var h=new JXG.Point(this,g,b+"P2","",false);h.fixed=true;k.addChild(h);m.addChild(h);var d;if(j[1]){d=new JXG.Line(this,h.id,k.id,b,a)}else{d=new JXG.Line(this,k.id,h.id,b,a)}d.changed=j[1];d.update=function(){if(this.needsUpdate){var o=this.board.algebra.perpendicular(m,k);h.coords=o[0];if(this.changed!=o[1]){var n=this.point1;this.point1=this.point2;this.point2=n}this.updateStdform();if(this.traced){this.cloneToBackground(true)}}};return d};JXG.Board.prototype.addPerpendicular=function(d,a,k,f,g,b){var n=JXG.GetReferenceFromParameter(this,a);var o=JXG.GetReferenceFromParameter(this,d);var e=this.numObjects;e++;if((k=="")||(k==null)){k=this.id+"L"+e}e++;if((g=="")||(g==null)){g=this.id+"P"+e}var m=this.algebra.perpendicular(o,n);var h=m[0].usrCoords.slice(1);var j=new JXG.Point(this,h,g,b,true);j.fixed=true;n.addChild(j);o.addChild(j);var c;if(m[1]){c=new JXG.Line(this,j.id,n.id,k,f)}else{c=new JXG.Line(this,n.id,j.id,k,f)}c.setStraight(false,false);c.changed=m[1];c.update=function(){if(this.needsUpdate){var r=this.board.algebra.perpendicular(o,n);j.coords=r[0];if(this.changed!=r[1]){var q=this.point1;this.point1=this.point2;this.point2=q}this.updateStdform();if(this.traced){this.cloneToBackground(true)}}};return[c,j]};JXG.Board.prototype.addPerpendicularPoint=function(c,a,e,b){var h=JXG.GetReferenceFromParameter(this,a);var j=JXG.GetReferenceFromParameter(this,c);var d=this.numObjects;d++;if((e=="")||(e==null)){e=this.id+"P"+d}var f=this.algebra.perpendicular(j,h)[0].usrCoords.slice(1);var g=new JXG.Point(this,f,e,b,true);g.fixed=true;h.addChild(g);j.addChild(g);g.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.perpendicular(j,h)[0];this.label.setCoordinates(this.coords);if(this.traced){this.cloneToBackground(true)}}};return g};JXG.Board.prototype.addCircumcenter=function(h,e,d,f,g,c,a){var m=JXG.GetReferenceFromParameter(this,h);var k=JXG.GetReferenceFromParameter(this,e);var j=JXG.GetReferenceFromParameter(this,d);var b=this.algebra.circumcenterMidpoint(m,k,j);var o=new JXG.Point(this,b.usrCoords.slice(1),f,g,true);o.fixed=true;m.addChild(o);k.addChild(o);j.addChild(o);var n=new JXG.Circle(this,"pointRadius",o.id,function(){return this.midpoint.coords.distance(JXG.COORDS_BY_USER,m.coords)},c,a);m.addChild(n);k.addChild(n);j.addChild(n);o.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.circumcenterMidpoint(m,k,j);if(this.label.show){this.label.setCoordinates(this.coords)}if(this.traced){this.cloneToBackground(true)}}};n.update=function(){if(this.needsUpdate){this.updateRadius();this.updateStdform();if(this.traced){this.cloneToBackground(true)}}};return[o,n]};JXG.Board.prototype.addCircumcenterMidpoint=function(f,c,b,d,e){var j=JXG.GetReferenceFromParameter(this,f);var h=JXG.GetReferenceFromParameter(this,c);var g=JXG.GetReferenceFromParameter(this,b);var a=this.algebra.circumcenterMidpoint(j,h,g).usrCoords.slice(1);var k=new JXG.Point(this,a,d,e,true);k.fixed=true;j.addChild(k);h.addChild(k);g.addChild(k);k.update=function(){if(this.needsUpdate){this.coords=this.board.algebra.circumcenterMidpoint(j,h,g);if(this.label.show){this.label.setCoordinates(this.coords)}if(this.traced){this.cloneToBackground(true)}}};return k};JXG.Board.prototype.addIntersection=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"I"+b}this.objects[a]=c;c.id=a;c.intersect1.addChild(c);c.intersect2.addChild(c);return a};JXG.Board.prototype.addAngleBisector=function(n,m,k,b,a){var h=JXG.GetReferenceFromParameter(this,n);var f=JXG.GetReferenceFromParameter(this,m);var d=JXG.GetReferenceFromParameter(this,k);var c=this.numObjects;c++;if((b=="")||(b==null)){b=this.id+"L"+c}var g=this.algebra.angleBisector(h,f,d).usrCoords.slice(1);var j=new JXG.Point(this,g,b+"P2","",false);j.fixed=true;h.addChild(j);f.addChild(j);d.addChild(j);var e=new JXG.Line(this,m,j.id,b,a);e.setStraight(false,true);e.update=function(){if(this.needsUpdate){this.point2.coords=this.board.algebra.angleBisector(h,f,d);this.updateStdform();if(this.traced){this.cloneToBackground(true)}}};return e};JXG.Board.prototype.addText=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"T"+b}this.objects[a]=c;c.id=a;this.renderer.drawText(c);return a};JXG.Board.prototype.addConditions=function(n){var k=null;var b="var el,x,y,c;\n";var h=n.indexOf("<data>");var g=n.indexOf("</data>");if(h<0){return}while(h>=0){var f=n.slice(h+6,g);var e=f.indexOf("=");var d=f.slice(0,e);var q=f.slice(e+1);e=d.indexOf(".");var a=d.slice(0,e);var c=this.elementsByName[JXG.unescapeHTML(a)];var o=d.slice(e+1).replace(/\s+/g,"").toLowerCase();q=this.algebra.geonext2JS(q);q=q.replace(/this\.board\./g,"this.");if(typeof this.elementsByName[a]=="undefined"){alert("debug conditions: |"+a+"| undefined")}b+='el = this.objects["'+c.id+'"];\n';switch(o){case"x":b+="y=el.coords.usrCoords[2];\n";b+="el.setPositionDirectly(JXG.COORDS_BY_USER,"+(q)+",y);\n";b+="el.update();\n";break;case"y":b+="x=el.coords.usrCoords[1];\n";b+="el.coords=new JXG.Coords(JXG.COORDS_BY_USER,[x,"+(q)+"],this);\n";break;case"visible":b+="c="+(q)+";\n";b+="if (c) {el.showElement();} else {el.hideElement();}\n";break;case"position":b+="el.position = "+(q)+";\n";b+="el.update();\n";break;case"stroke":b+="el.strokeColor = "+(q)+";\n";break;case"strokewidth":b+="el.strokeWidth = "+(q)+";\n";break;case"label":break;default:alert("property '"+o+"' in conditions not implemented:"+q);break}n=n.slice(g+7);h=n.indexOf("<data>");g=n.indexOf("</data>")}b+="this.prepareUpdate();\n";b+="this.updateElements();\n";b+="return true;\n";this.updateConditions=new Function(b);this.updateConditions()};JXG.Board.prototype.updateConditions=function(){return false};JXG.Board.prototype.addImage=function(c){var b=this.numObjects;this.numObjects++;var a=c.id;if((a=="")||(a==null)){a=this.id+"Im"+b}this.objects[a]=c;this.elementsByName[c.name]=c;c.id=a;this.renderer.drawImage(c);if(!c.visProp.visible){this.renderer.hide(c)}return a};JXG.Board.prototype.addIntegral=function(e,g,a,o,n){if(!JXG.IsArray(a)||(a.length!=5)){a=["","","","",""]}if(!JXG.IsArray(o)||(o.length!=5)){o=["","","","",""]}var s=[];var b={};if((typeof n!="undefined")&&(n!=null)){b=n}b.name=o[0];b.id=a[0];b.slideObject=g;var d=0;if(e[0]>g.points[0].usrCoords[1]){d=e[0]}else{d=g.points[0].usrCoords[1]}var q=board.createElement("point",[d,g.yterm(d)],b);b.name=o[1];b.id=a[1];b.visible=false;b.slideObject=null;var r=board.createElement("point",[function(){return q.X()},0],b);s.push(r);s.push(q);q.addChild(r);var j;for(var k=0;k<g.numberPoints;k++){if((e[0]<=g.points[k].usrCoords[1])&&(g.points[k].usrCoords[1]<=e[1])){j={type:JXG.OBJECT_TYPE_POINT,elementClass:JXG.OBJECT_CLASS_POINT,addChild:function(t){},coords:g.points[k]};s.push(j)}}b.name=o[2];b.id=a[2];b.slideObject=g;b.visible=true;var f=board.createElement("point",[s[s.length-1].coords.usrCoords[1],g.yterm(s[s.length-1].coords.usrCoords[1])],b);b.name=o[3];b.id=a[3];b.slideObject=null;b.visible=false;var h=board.createElement("point",[function(){return f.X()},0],b);s.push(f);s.push(h);f.addChild(h);var m=JXG.Math.Numerics.I([s[0].coords.usrCoords[1],s[s.length-1].coords.usrCoords[1]],g.yterm);var u=board.createElement("text",[function(){return f.X()+0.2},function(){return f.Y()-1},"&int; = "+(m).toFixed(4)]);var b={};if((typeof n!="undefined")&&(n!=null)){b=n}b.withLines=false;b.name=o[4];b.id=a[4];b.visible=true;var c=board.createElement("polygon",s,b);c.update=function(){var v;var x=[r,q];for(var t=0;t<g.numberPoints;t++){if((r.X()<=g.points[t].usrCoords[1])&&(g.points[t].usrCoords[1]<=h.X())){v={type:JXG.OBJECT_TYPE_POINT,elementClass:JXG.OBJECT_CLASS_POINT,addChild:function(y){},coords:g.points[t]};x.push(v)}}x.push(f);x.push(h);x.push(r);var w=JXG.Math.Numerics.I([s[0].coords.usrCoords[1],s[s.length-1].coords.usrCoords[1]],g.yterm);u.plaintextStr="&int; = "+(w).toFixed(4);this.vertices=x};q.addChild(c);f.addChild(c);q.addChild(u);f.addChild(u);return c};JXG.Board.prototype.calculateSnapSizes=function(){var c=new JXG.Coords(JXG.COORDS_BY_USER,[0,0],this);var b=new JXG.Coords(JXG.COORDS_BY_USER,[1/this.gridX,1/this.gridY],this);var a=c.scrCoords[1]-b.scrCoords[1];var d=c.scrCoords[2]-b.scrCoords[2];this.snapSizeX=this.gridX;while(Math.abs(a)>25){this.snapSizeX*=2;a/=2}this.snapSizeY=this.gridY;while(Math.abs(d)>25){this.snapSizeY*=2;d/=2}};JXG.Board.prototype.applyZoom=function(){this.updateQuality=this.BOARD_QUALITY_HIGH;for(var a in this.objects){if((this.objects[a].elementClass==JXG.OBJECT_CLASS_POINT)||(this.objects[a].type==JXG.OBJECT_TYPE_CURVE)||(this.objects[a].type==JXG.OBJECT_TYPE_AXIS)||(this.objects[a].type==JXG.OBJECT_TYPE_TEXT)){if((this.objects[a].type!=JXG.OBJECT_TYPE_CURVE)&&(this.objects[a].type!=JXG.OBJECT_TYPE_AXIS)){this.objects[a].coords.usr2screen()}}}this.calculateSnapSizes();this.fullUpdate=true;this.update();this.fullUpdate=false;if(this.hasGrid){this.renderer.removeGrid(this);this.renderer.drawGrid(this)}};JXG.Board.prototype.zoomIn=function(){this.zoomX*=this.options.zoom.factor;this.zoomY*=this.options.zoom.factor;this.applyZoom()};JXG.Board.prototype.zoomOut=function(){this.zoomX/=this.options.zoom.factor;this.zoomY/=this.options.zoom.factor;this.applyZoom()};JXG.Board.prototype.zoom100=function(){this.zoomX=1;this.zoomY=1;this.applyZoom()};JXG.Board.prototype.zoomAllPoints=function(){var m=this.zoomX/this.zoomY;var h=0;var d=0;var g=0;var b=0;for(var f in this.objects){if((this.objects[f].elementClass==JXG.OBJECT_CLASS_POINT)&&this.objects[f].visProp.visible){if(this.objects[f].coords.usrCoords[1]<h){h=this.objects[f].coords.usrCoords[1]}if(this.objects[f].coords.usrCoords[1]>d){d=this.objects[f].coords.usrCoords[1]}if(this.objects[f].coords.usrCoords[2]>b){b=this.objects[f].coords.usrCoords[2]}if(this.objects[f].coords.usrCoords[2]<g){g=this.objects[f].coords.usrCoords[2]}}}var j=50;var r=j/(this.unitX*this.zoomX);var q=j/(this.unitY*this.zoomY);var o=d-h+2*r;var n=b-g+2*q;var k=Math.min(this.canvasWidth/(this.unitX*o),this.canvasHeight/(this.unitY*n));var c=k;var e=k*m;var a=-(h-r)*this.unitX*e;var s=(b+q)*this.unitY*c;this.origin=new JXG.Coords(JXG.COORDS_BY_SCREEN,[a,s],this);this.zoomX=e;this.zoomY=c;this.applyZoom()};JXG.Board.prototype.removeObject=function(a){a=JXG.GetReferenceFromParameter(this,a);if(a==undefined){return}try{for(var d in a.childElements){a.childElements[d].board.removeObject(a.childElements[d])}for(var b in this.objects){if(typeof this.objects[b].childElements!="undefined"){delete (this.objects[b].childElements[a.id])}}delete (this.objects[a.id]);delete (this.elementsByName[a.name]);if(a.remove!=undefined){a.remove()}}catch(c){}};JXG.Board.prototype.initGeonextBoard=function(){var e=new JXG.Point(this,[0,0],this.id+"gOOe0","Ursprung",false);e.fixed=true;var d=new JXG.Point(this,[1,0],this.id+"gXOe0","Punkt_1_0",false);d.fixed=true;var c=new JXG.Point(this,[0,1],this.id+"gYOe0","Punkt_0_1",false);c.fixed=true;var b=new JXG.Line(this,this.id+"gOOe0",this.id+"gXOe0",this.id+"gXLe0","X-Achse");b.hideElement();var a=new JXG.Line(this,this.id+"gOOe0",this.id+"gYOe0",this.id+"gYLe0","Y-Achse");a.hideElement()};JXG.Board.prototype.resizeContainer=function(a,b){this.canvasWidth=1*a;this.canvasHeight=1*b;this.containerObj.style.width=(this.canvasWidth)+"px";this.containerObj.style.height=(this.canvasHeight)+"px"};JXG.Board.prototype.showDependencies=function(){var d;var b="<p>\n";for(d in this.objects){var a=0;for(var g in this.objects[d].childElements){a++}if(a>=0){b+="<b>"+this.objects[d].id+":</b> "}for(var g in this.objects[d].childElements){b+=this.objects[d].childElements[g].id+"("+this.objects[d].childElements[g].name+"), "}b+="<p>\n"}b+="</p>\n";var e=window.open();e.document.open();e.document.write(b);e.document.close()};JXG.Board.prototype.showXML=function(){var a=window.open("");a.document.open();a.document.write("<pre>"+JXG.escapeHTML(this.xmlString)+"</pre>");a.document.close()};JXG.Board.prototype.prepareUpdate=function(b){for(var a in this.objects){this.objects[a].needsUpdate=true}};JXG.Board.prototype.updateElements=function(b){b=JXG.GetReferenceFromParameter(this,b);var c=-1;if(!this.reducedUpdate){c=1}for(var a in this.objects){var d=this.objects[a];if(!this.fullUpdate&&!d.needsRegularUpdate&&d.afterFirstUpdate){continue}if(b==null||d.id!=b.id){if(c>=0||!d.afterFirstUpdate||this.fullUpdate){d.update(true)}}else{d.update(false);c=5}if(this.reducedUpdate){c--}}};JXG.Board.prototype.updateRenderer=function(b){var b=JXG.GetReferenceFromParameter(this,b);var c=-1;if(!this.reducedUpdate){c=1}for(var a in this.objects){var d=this.objects[a];if(!this.fullUpdate&&!d.needsRegularUpdate&&d.afterFirstUpdate){continue}if(b==null||d.id!=b.id){if(c>=0||!d.afterFirstUpdate||this.fullUpdate){d.updateRenderer()}}else{d.updateRenderer();c=5}if(this.reducedUpdate){c--}d.afterFirstUpdate=true}};JXG.Board.prototype.addHook=function(a){this.hooks.push(a);a(this);return(this.hooks.length-1)};JXG.Board.prototype.removeHook=function(a){this.hooks[a]=null};JXG.Board.prototype.updateHooks=function(){for(var a=0;a<this.hooks.length;a++){if(this.hooks[a]!=null){this.hooks[a](this)}}};JXG.Board.prototype.update=function(a){if(this.isSuspendedUpdate){return}this.prepareUpdate(a);this.updateElements(a);this.updateConditions();this.renderer.suspendRedraw();this.updateRenderer(a);this.renderer.unsuspendRedraw();this.updateHooks();for(var b in JXG.JSXGraph.boards){if(JXG.JSXGraph.boards[b]!=this){JXG.JSXGraph.boards[b].prepareUpdate(a);JXG.JSXGraph.boards[b].updateElements(a);JXG.JSXGraph.boards[b].updateConditions();JXG.JSXGraph.boards[b].renderer.suspendRedraw();JXG.JSXGraph.boards[b].updateRenderer(a);JXG.JSXGraph.boards[b].renderer.unsuspendRedraw();JXG.JSXGraph.boards[b].updateHooks()}}};JXG.Board.prototype.createElement=function(b,c,a){if(b!="turtle"&&(c==null||c.length==0)){return null}if(c==null){c=[]}var f;b=b.toLowerCase();if(a==null){a={}}for(var d=0;d<c.length;d++){c[d]=JXG.GetReferenceFromParameter(this,c[d])}if(JXG.JSXGraph.elements[b]!=null){f=JXG.JSXGraph.elements[b](this,c,a)}else{throw"JXG.createElement: Unknown element type given: "+b}if(f==undefined){return}if(JXG.IsArray(a)){a=a[0]}if(f.multipleElements){for(var e in f){if(typeof f[e].setProperty!="undefined"){f[e].setProperty(a)}}}else{if(typeof f.setProperty!="undefined"){f.setProperty(a)}}this.update();return f};JXG.Board.prototype.clearTraces=function(){for(var a in this.objects){if(this.objects[a].traced){this.objects[a].clearTrace()}}};JXG.Board.prototype.beforeLoad=function(){};JXG.Board.prototype.afterLoad=function(){};JXG.Board.prototype.suspendUpdate=function(){this.isSuspendedUpdate=true};JXG.Board.prototype.unsuspendUpdate=function(){this.isSuspendedUpdate=false;this.update()};JXG.Options=function(){this.fontSize=12;this.grid=new Object();this.grid.hasGrid=false;this.grid.gridX=2;this.grid.gridY=2;this.grid.gridColor="#C0C0C0";this.grid.gridOpacity="1";this.grid.gridDash=true;this.grid.snapToGrid=false;this.grid.snapSizeX=2;this.grid.snapSizeY=2;this.zoom=new Object();this.zoom.factor=1.25;this.elements=new Object();this.elements.color=new Object();this.elements.color.strokeOpacity=1;this.elements.color.highlightStrokeOpacity=1;this.elements.color.fillOpacity=1;this.elements.color.highlightFillOpacity=1;this.elements.color.strokeColor="#0000ff";this.elements.color.highlightStrokeColor="#C3D9FF";this.elements.color.fillColor="none";this.elements.color.highlightFillColor="none";this.elements.strokeWidth="2px";this.elements.draft=new Object();this.elements.draft.draft=false;this.elements.draft.color="#565656";this.elements.draft.opacity=0.8;this.elements.draft.strokeWidth="1px";this.point=new Object();this.point.style=5;this.point.fillColor="#ff0000";this.point.highlightFillColor="#EEEEEE";this.point.strokeColor=this.elements.color.strokeColor;this.point.highlightStrokeColor=this.elements.color.highlightStrokeColor;this.line=new Object();this.line.firstArrow=false;this.line.lastArrow=false;this.line.straightFirst=true;this.line.straightLast=true;this.line.fillColor=this.elements.color.fillColor;this.line.highlightFillColor=this.elements.color.highlightFillColor;this.line.strokeColor=this.elements.color.strokeColor;this.line.highlightStrokeColor=this.elements.color.highlightStrokeColor;this.line.ticks=new Object();this.line.ticks.drawLabels=true;this.line.ticks.drawZero=false;this.line.ticks.insertTicks=false;this.line.ticks.minTicksDistance=100;this.line.ticks.maxTicksDistance=300;this.line.ticks.minorHeight=4;this.line.ticks.majorHeight=10;this.line.ticks.minorTicks=4;this.line.ticks.defaultDistance=5;this.circle=new Object();this.circle.fillColor=this.elements.color.fillColor;this.circle.highlightFillColor=this.elements.color.highlightFillColor;this.circle.strokeColor=this.elements.color.strokeColor;this.circle.highlightStrokeColor=this.elements.color.highlightStrokeColor;this.angle=new Object();this.angle.radius=1;this.angle.fillColor="#FF7F00";this.angle.highlightFillColor="#FF7F00";this.angle.strokeColor="#FF7F00";this.angle.fillOpacity=0.3;this.angle.highlightFillOpacity=0.3;this.arc=new Object();this.arc.firstArrow=false;this.arc.lastArrow=false;this.arc.fillColor=this.elements.color.fillColor;this.arc.highlightFillColor=this.elements.color.highlightFillColor;this.arc.strokeColor=this.elements.color.strokeColor;this.arc.highlightStrokeColor=this.elements.color.highlightStrokeColor;this.polygon=new Object();this.polygon.fillColor="#00FF00";this.polygon.highlightFillColor="#00FF00";this.polygon.fillOpacity=0.3;this.polygon.highlightFillOpacity=0.3;this.sector=new Object();this.sector.fillColor="#00FF00";this.sector.highlightFillColor="#00FF00";this.sector.fillOpacity=0.3;this.sector.highlightFillOpacity=0.3;this.text=new Object();this.text.strokeColor="#000000";this.curve=new Object();this.curve.strokeWidth="1px";this.curve.strokeColor=this.elements.color.strokeColor;this.precision=new Object();this.precision.hasPoint=4;this.precision.epsilon=0.0001};JXG.Options.prototype.useStandardOptions=function(d){var c=d.hasGrid;d.hasGrid=this.grid.hasGrid;d.gridX=this.grid.gridX;d.gridY=this.grid.gridY;d.gridColor=this.grid.gridColor;d.gridOpacity=this.grid.gridOpacity;d.gridDash=this.grid.gridDash;d.snapToGrid=this.grid.snapToGrid;d.snapSizeX=this.grid.SnapSizeX;d.snapSizeY=this.grid.SnapSizeY;for(var b in d.objects){if(d.objects[b].type==JXG.OBJECT_TYPE_POINT){d.objects[b].visProp.fillColor=this.point.fillColor;d.objects[b].visProp.highlightFillColor=this.point.highlightFillColor;d.objects[b].visProp.strokeColor=this.point.strokeColor;d.objects[b].visProp.highlightStrokeColor=this.point.highlightStrokeColor}else{if(d.objects[b].type==JXG.OBJECT_TYPE_LINE){d.objects[b].visProp.fillColor=this.line.fillColor;d.objects[b].visProp.highlightFillColor=this.line.highlightFillColor;d.objects[b].visProp.strokeColor=this.line.strokeColor;d.objects[b].visProp.highlightStrokeColor=this.line.highlightStrokeColor;for(var a in d.objects[b].ticks){a.majorTicks=this.line.ticks.majorTicks;a.minTicksDistance=this.line.ticks.minTicksDistance;a.minorHeight=this.line.ticks.minorHeight;a.majorHeight=this.line.ticks.majorHeight}}else{if(d.objects[b].type==JXG.OBJECT_TYPE_CIRCLE){d.objects[b].visProp.fillColor=this.circle.fillColor;d.objects[b].visProp.highlightFillColor=this.circle.highlightFillColor;d.objects[b].visProp.strokeColor=this.circle.strokeColor;d.objects[b].visProp.highlightStrokeColor=this.circle.highlightStrokeColor}else{if(d.objects[b].type==JXG.OBJECT_TYPE_ANGLE){d.objects[b].visProp.fillColor=this.angle.fillColor;d.objects[b].visProp.highlightFillColor=this.angle.highlightFillColor;d.objects[b].visProp.strokeColor=this.angle.strokeColor}else{if(d.objects[b].type==JXG.OBJECT_TYPE_ARC){d.objects[b].visProp.fillColor=this.arc.fillColor;d.objects[b].visProp.highlightFillColor=this.arc.highlightFillColor;d.objects[b].visProp.strokeColor=this.arc.strokeColor;d.objects[b].visProp.highlightStrokeColor=this.arc.highlightStrokeColor}else{if(d.objects[b].type==JXG.OBJECT_TYPE_POLYGON){d.objects[b].visProp.fillColor=this.polygon.fillColor;d.objects[b].visProp.highlightFillColor=this.polygon.highlightFillColor;d.objects[b].visProp.fillOpacity=this.polygon.fillOpacity;d.objects[b].visProp.highlightFillOpacity=this.polygon.highlightFillOpacity}else{if(d.objects[b].type==JXG.OBJECT_TYPE_CURVE){d.objects[b].visProp.strokeColor=this.curve.strokeColor}}}}}}}}for(var b in d.objects){if(d.objects[b].type==JXG.OBJECT_TYPE_SECTOR){d.objects[b].arc.visProp.fillColor=this.sector.fillColor;d.objects[b].arc.visProp.highlightFillColor=this.sector.highlightFillColor;d.objects[b].arc.visProp.fillOpacity=this.sector.fillOpacity;d.objects[b].arc.visProp.highlightFillOpacity=this.sector.highlightFillOpacity}}d.fullUpdate=true;d.update();d.fullUpdate=false;if(c&&d.hasGrid){d.renderer.removeGrid(d);d.renderer.drawGrid(d)}else{if(c&&!d.hasGrid){d.renderer.removeGrid(d)}else{if(!c&&d.hasGrid){d.renderer.drawGrid(d)}}}};JXG.Options.prototype.useBlackWhiteOptions=function(a){this.point.fillColor=this.changeColorToBlackWhite(this.point.fillColor);this.point.highlightFillColor=this.changeColorToBlackWhite(this.point.highlightFillColor);this.point.strokeColor=this.changeColorToBlackWhite(this.point.strokeColor);this.point.highlightStrokeColor=this.changeColorToBlackWhite(this.point.highlightStrokeColor);this.line.fillColor=this.changeColorToBlackWhite(this.line.fillColor);this.line.highlightFillColor=this.changeColorToBlackWhite(this.line.highlightFillColor);this.line.strokeColor=this.changeColorToBlackWhite(this.line.strokeColor);this.line.highlightStrokeColor=this.changeColorToBlackWhite(this.line.highlightStrokeColor);this.circle.fillColor=this.changeColorToBlackWhite(this.circle.fillColor);this.circle.highlightFillColor=this.changeColorToBlackWhite(this.circle.highlightFillColor);this.circle.strokeColor=this.changeColorToBlackWhite(this.circle.strokeColor);this.circle.highlightStrokeColor=this.changeColorToBlackWhite(this.circle.highlightStrokeColor);this.arc.fillColor=this.changeColorToBlackWhite(this.arc.fillColor);this.arc.highlightFillColor=this.changeColorToBlackWhite(this.arc.highlightFillColor);this.arc.strokeColor=this.changeColorToBlackWhite(this.arc.strokeColor);this.arc.highlightStrokeColor=this.changeColorToBlackWhite(this.arc.highlightStrokeColor);this.polygon.fillColor=this.changeColorToBlackWhite(this.polygon.fillColor);this.polygon.highlightFillColor=this.changeColorToBlackWhite(this.polygon.highlightFillColor);this.sector.fillColor=this.changeColorToBlackWhite(this.sector.fillColor);this.sector.highlightFillColor=this.changeColorToBlackWhite(this.sector.highlightFillColor);this.curve.strokeColor=this.changeColorToBlackWhite(this.curve.strokeColor);this.grid.gridColor=this.changeColorToBlackWhite(this.grid.gridColor);this.useStandardOptions(a)};JXG.Options.prototype.changeColorToBlackWhite=function(d){if(d=="none"){return d}var e=new JXG.RGBColor(d);var j=e.r;var h=e.g;var c=e.b;var a=0.3*j+0.59*h+0.11*c;var k="0123456789ABCDEF";var f=k.charAt((a>>4)&15)+k.charAt(a&15);d="#"+f+""+f+""+f;return d};JXG.Options.prototype.loadFromFile=function(b,c,a){this.cbp=function(d){this.parseString(d,c,a)};this.cb=JXG.bind(this.cbp,this);JXG.FileReader.parseFileContent(b,this.cb,"raw")};JXG.Options.prototype.parseString=function(text,applyTo,board){var newOptions="";if(text!=""){newOptions=eval("("+text+")")}else{return}var maxDepth=10;var applyOption=function(base,option,depth){if(depth==10){return}depth++;for(var key in option){if((JXG.IsNumber(option[key]))||(JXG.IsArray(option[key]))||(JXG.IsString(option[key]))||(option[key]==true)||(option[key]==false)){base[key]=option[key]}else{applyOption(base[key],option[key],depth)}}};applyOption(this,newOptions,0);if(applyTo&&typeof board!="undefined"){this.useStandardOptions(board)}};JXG.Board.prototype.angle=function(a,c,b){return this.algebra.angle(a,c,b)};JXG.Board.prototype.rad=function(a,c,b){return this.algebra.rad(a,c,b)};JXG.Board.prototype.distance=function(b,a){return this.algebra.distance(b,a)};JXG.Board.prototype.pow=function(d,c){return this.algebra.pow(d,c)};JXG.Board.prototype.round=function(a,b){return(a).toFixed(b)};JXG.Board.prototype.cosh=function(a){return JXG.Math.Numerics.cosh(a)};JXG.Board.prototype.sinh=function(a){return JXG.Math.Numerics.sinh(a)};JXG.Board.prototype.sgn=function(a){return(a==0?0:a/(Math.abs(a)))};JXG.Board.prototype.D=function(a,b){return JXG.Math.Numerics.D(a,b)};JXG.Board.prototype.I=function(a,b){return JXG.Math.Numerics.I(a,b)};JXG.Board.prototype.root=function(b,a,c){return JXG.Math.Numerics.root(b,a,c)};JXG.Board.prototype.lagrangePolynomial=function(a){return JXG.Math.Numerics.lagrangePolynomial(a)};JXG.Board.prototype.neville=function(a){return JXG.Math.Numerics.neville(a)};JXG.Board.prototype.abs=Math.abs;JXG.Board.prototype.acos=Math.acos;JXG.Board.prototype.asin=Math.asin;JXG.Board.prototype.atan=Math.atan;JXG.Board.prototype.ceil=Math.ceil;JXG.Board.prototype.cos=Math.cos;JXG.Board.prototype.exp=Math.exp;JXG.Board.prototype.floor=Math.floor;JXG.Board.prototype.log=Math.log;JXG.Board.prototype.max=Math.max;JXG.Board.prototype.min=Math.min;JXG.Board.prototype.random=Math.random;JXG.Board.prototype.sin=Math.sin;JXG.Board.prototype.sqrt=Math.sqrt;JXG.Board.prototype.tan=Math.tan;JXG.Board.prototype.trunc=Math.ceil;JXG.Board.prototype.factorial=function(a){return JXG.Math.factorial(a)};JXG.Board.prototype.binomial=function(b,a){return JXG.Math.binomial(b,a)};JXG.Point.prototype.setPositionX=function(c,a){var b=(c==JXG.COORDS_BY_USER)?this.coords.usrCoords[2]:this.coords.scrCoords[2];this.setPosition(c,a,b)};JXG.Point.prototype.setPositionY=function(c,b){var a=(c==JXG.COORDS_BY_USER)?this.coords.usrCoords[1]:this.coords.scrCoords[1];this.setPosition(c,a,b)};JXG.Board.prototype.getElement=function(a){return JXG.GetReferenceFromParameter(this,a)};JXG.Board.prototype.intersectionOptions=["point",[[JXG.OBJECT_CLASS_LINE,JXG.OBJECT_CLASS_LINE],[JXG.OBJECT_CLASS_LINE,JXG.OBJECT_CLASS_CIRCLE],[JXG.OBJECT_CLASS_CIRCLE,JXG.OBJECT_CLASS_CIRCLE]]];JXG.Board.prototype.intersection=function(d,b,c,a){d=JXG.GetReferenceFromParameter(this,d);b=JXG.GetReferenceFromParameter(this,b);if(d.elementClass==JXG.OBJECT_CLASS_CURVE||b.elementClass==JXG.OBJECT_CLASS_CURVE){return function(){return d.board.algebra.meetCurveCurve(d,b,c,a)}}else{return function(){return d.board.algebra.meet(d.stdform,b.stdform,c)}}};JXG.Board.prototype.intersectionFunc=function(d,b,c,a){return this.intersection(d,b,c,a)};JXG.Board.prototype.pointFunc=function(){return[null]};JXG.Board.prototype.pointOptions=["point",[[JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.lineFunc=function(){return arguments};JXG.Board.prototype.lineOptions=["line",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.linesegmentFunc=function(){return arguments};JXG.Board.prototype.linesegmentOptions=["line",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.linesegmentAtts={straightFirst:false,straightLast:false};JXG.Board.prototype.arrowFunc=function(){return arguments};JXG.Board.prototype.arrowOptions=["arrow",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.circleFunc=function(){return arguments};JXG.Board.prototype.circleOptions=["circle",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT],[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_LINE],[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_CIRCLE]]];JXG.Board.prototype.arrowparallelOptions=["arrowparallel",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_LINE]]];JXG.Board.prototype.arrowparallelFunc=function(){return arguments};JXG.Board.prototype.bisectorOptions=["bisector",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.bisectorFunc=function(){return arguments};JXG.Board.prototype.circumcircleOptions=["circumcircle",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.circumcircleFunc=function(){return arguments};JXG.Board.prototype.circumcirclemidpointOptions=["circumcirclemidpoint",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.circumcirclemidpointFunc=function(){return arguments};JXG.Board.prototype.integralOptions=["integral",[[]]];JXG.Board.prototype.integralFunc=function(){return arguments};JXG.Board.prototype.midpointOptions=["midpoint",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT],[JXG.OBJECT_CLASS_LINE]]];JXG.Board.prototype.midpointFunc=function(){return arguments};JXG.Board.prototype.mirrorpointOptions=["mirrorpoint",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.mirrorpointFunc=function(){return arguments};JXG.Board.prototype.normalOptions=["normal",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_LINE]]];JXG.Board.prototype.normalFunc=function(){return arguments};JXG.Board.prototype.parallelOptions=["parallel",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_LINE]]];JXG.Board.prototype.parallelFunc=function(){return arguments};JXG.Board.prototype.parallelpointOptions=["parallelpoint",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_POINT]]];JXG.Board.prototype.parallelpointFunc=function(){return arguments};JXG.Board.prototype.perpendicularOptions=["perpendicular",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_LINE]]];JXG.Board.prototype.perpendicularFunc=function(){return arguments};JXG.Board.prototype.perpendicularpointOptions=["perpendicularpoint",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_LINE]]];JXG.Board.prototype.perpendicularpointFunc=function(){return arguments};JXG.Board.prototype.reflectionOptions=["reflection",[[JXG.OBJECT_CLASS_POINT,JXG.OBJECT_CLASS_LINE]]];JXG.Board.prototype.reflectionFunc=function(){return arguments};JXG.Ticks=function(a,e,d,f,b,g,c){this.constructor();this.type=JXG.OBJECT_TYPE_TICKS;this.elementClass=JXG.OBJECT_CLASS_LINE;this.line=a;this.board=this.line.board;this.ticksFunction=null;this.fixedTicks=null;this.equidistant=false;if(JXG.IsFunction(e)){this.ticksFunction=e}else{if(JXG.IsArray(e)){this.fixedTicks=e}else{if(Math.abs(e)<JXG.Math.eps){e=this.board.options.line.ticks.defaultDistance}this.ticksFunction=function(h){return e};this.equidistant=true}}this.minorTicks=((d==null)||(d==0)?this.board.options.line.ticks.minorTicks:d);if(this.minorTicks<0){this.minorTicks=-this.minorTicks}this.majorHeight=((f==null)||(f==0)?this.board.options.line.ticks.majorHeight:f);if(this.majorHeight<0){this.majorHeight=-this.majorHeight}this.minorHeight=((b==null)||(b==0)?this.board.options.line.ticks.minorHeight:b);if(this.minorHeight<0){this.minorHeight=-this.minorHeight}this.minTicksDistance=this.board.options.line.ticks.minTicksDistance;this.maxTicksDistance=this.board.options.line.ticks.maxTicksDistance;this.insertTicks=this.board.options.line.ticks.insertTicks;this.drawZero=this.board.options.line.ticks.drawZero;this.drawLabels=this.board.options.line.ticks.drawLabels;this.init(this.board,g,c);this.visProp.visible=true;this.visProp.fillColor=this.line.visProp.fillColor;this.visProp.highlightFillColor=this.line.visProp.highlightFillColor;this.visProp.strokeColor=this.line.visProp.strokeColor;this.visProp.highlightStrokeColor=this.line.visProp.highlightStrokeColor;this.visProp.strokeWidth=this.line.visProp.strokeWidth;this.id=this.line.addTicks(this)};JXG.Ticks.prototype=new JXG.GeometryElement;JXG.Ticks.prototype.hasPoint=function(a,b){return false};JXG.Ticks.prototype.makeTicks=function(f,c,F,C){var v=f.usrCoords[1]-c.usrCoords[1];var t=f.usrCoords[2]-c.usrCoords[2];var E=0;var g=Math.sqrt(v*v+t*t);if(g<=JXG.Math.eps){return}var s=f.usrCoords[1];var r=f.usrCoords[2];var D=F/Math.abs(F);E=Math.abs(this.ticksFunction(D));var H=(E*v)/(g);var G=(E*t)/(g);var A=0;if(this.equidistant){var b=H;var w=G;var a=E;var u=new JXG.Coords(JXG.COORDS_BY_USER,[0,0],this.board);var B=new JXG.Coords(JXG.COORDS_BY_USER,[H,G],this.board);A=(B.scrCoords[1]-u.scrCoords[1])*(B.scrCoords[1]-u.scrCoords[1])+(B.scrCoords[2]-u.scrCoords[2])*(B.scrCoords[2]-u.scrCoords[2]);while(A<this.minTicksDistance*this.minTicksDistance){H+=b;G+=w;E+=a;B=new JXG.Coords(JXG.COORDS_BY_USER,[H,G],this.board);A=(B.scrCoords[1]-u.scrCoords[1])*(B.scrCoords[1]-u.scrCoords[1])+(B.scrCoords[2]-u.scrCoords[2])*(B.scrCoords[2]-u.scrCoords[2])}}var I=F*E;var o=new JXG.Coords(JXG.COORDS_BY_USER,[s,r],this.board);var e=null;var d=null;var m="";var n=null;var k=true;var j=s;var h=r;while(k||(((this.board.sgn(H)*(s-C*H)>=this.board.sgn(H)*c.usrCoords[1])&&(this.board.sgn(G)*(r-C*G)>=this.board.sgn(G)*c.usrCoords[2])))){k=false;s=s-H;r=r-G;e=new JXG.Coords(JXG.COORDS_BY_USER,[s,r],this.board);if(!this.equidistant){A=(o.scrCoords[1]-e.scrCoords[1])*(o.scrCoords[1]-e.scrCoords[1])+(o.scrCoords[2]-e.scrCoords[2])*(o.scrCoords[2]-e.scrCoords[2])}if(this.insertTicks&&this.equidistant&&(A>this.maxTicksDistance*this.maxTicksDistance)){while(A>this.maxTicksDistance*this.maxTicksDistance){H=H/2;G=G/2;s=s+H;r=r+G;E=E/2;I=I-F*E;e=new JXG.Coords(JXG.COORDS_BY_USER,[s,r],this.board);A=(o.scrCoords[1]-e.scrCoords[1])*(o.scrCoords[1]-e.scrCoords[1])+(o.scrCoords[2]-e.scrCoords[2])*(o.scrCoords[2]-e.scrCoords[2])}}if(this.equidistant){for(var q=1;q<this.minorTicks+1;q++){d=new JXG.Coords(JXG.COORDS_BY_USER,[j-(H*q)/(this.minorTicks+1),h-(G*q)/(this.minorTicks+1)],this.board);d.major=false;this.ticks.push(d);this.labels.push(null)}}if(this.equidistant||(A>this.minTicksDistance*this.minTicksDistance)){e.major=true;this.ticks.push(e);m=I.toString();if(m.length>5){m=I.toPrecision(3).toString()}n=new JXG.Label(this.board,m,e,this.id+D+"Label");n.distanceX=0;n.distanceY=-10;n.setCoordinates(e);if(this.drawLabels){n.show=true}else{n.show=false}this.labels.push(n);j=s;h=r;o=e}D=D+F*1;if(!this.equidistant){E=Math.abs(this.ticksFunction(D))}I=I+F*E;if(!this.equidistant){H=(E*v)/(g);G=(E*t)/(g)}}};JXG.Ticks.prototype.calculateTicksCoordinates=function(){var x=1;var r=2;var s=x+r;var y=new JXG.Coords(JXG.COORDS_BY_USER,[this.line.point1.coords.usrCoords[1],this.line.point1.coords.usrCoords[2]],this.board);var w=new JXG.Coords(JXG.COORDS_BY_USER,[this.line.point2.coords.usrCoords[1],this.line.point2.coords.usrCoords[2]],this.board);this.board.renderer.calcStraight(this.line,y,w);var b=this.line.point1.coords;if(this.board.renderer.isSameDirection(b,y,w)){if(this.board.renderer.isSameDirection(b,this.line.point2.coords,y)){s=r;if(b.distance(JXG.COORDS_BY_USER,y)>b.distance(JXG.COORDS_BY_USER,w)){w=y}}else{s=x;if(b.distance(JXG.COORDS_BY_USER,y)<b.distance(JXG.COORDS_BY_USER,w)){y=w}}}else{if(this.board.renderer.isSameDirection(b,this.line.point2.coords,y)){var f=y;y=w;w=f}}if(this.ticks!=null){for(var A=0;A<this.ticks.length;A++){if(this.labels[A]!=null){if(this.labels[A].show){this.board.renderer.remove(this.labels[A].rendNode)}}}}this.ticks=new Array();this.labels=new Array();var m=null;var h="";var e=null;if(this.ticksFunction!=null){if(this.drawZero){e=new JXG.Coords(JXG.COORDS_BY_USER,[b.usrCoords[1],b.usrCoords[2]],this.board);this.ticks.push(e);m=new JXG.Label(this.board,"0",e,this.id+"0Label");if(this.drawLabels){m.show=true}else{m.show=false}this.labels.push(m);this.ticks[0].major=true}if(x==(s&x)){if(this.line.visProp.straightFirst){this.makeTicks(b,y,-1,0)}}if(r==(s&r)){if(this.line.visProp.straightLast){this.makeTicks(b,w,+1,0)}else{this.makeTicks(b,this.line.point2.coords,+1,1)}}}else{if(!this.line.visProp.straightFirst){y=b}var n=b.usrCoords[1]-y.usrCoords[1];var k=b.usrCoords[2]-y.usrCoords[2];var F=Math.sqrt(n*n+k*k);if(!this.line.visProp.straightLast){w=this.line.point2.coords}var g=b.usrCoords[1]-w.usrCoords[1];var o=b.usrCoords[2]-w.usrCoords[2];var c=Math.sqrt(g*g+o*o);var D=0;var C=0;for(var B=0;B<this.fixedTicks.length;B++){if((-F<=this.fixedTicks[B])&&(this.fixedTicks[B]<=c)){if(this.fixedTicks[B]<0){D=Math.abs(n)*this.fixedTicks[B]/F;C=Math.abs(k)*this.fixedTicks[B]/F}else{D=Math.abs(g)*this.fixedTicks[B]/c;C=Math.abs(o)*this.fixedTicks[B]/c}e=new JXG.Coords(JXG.COORDS_BY_USER,[b.usrCoords[1]+D,b.usrCoords[2]+C],this.board);this.ticks.push(e);this.ticks[this.ticks.length-1].major=true;h=this.fixedTicks[B].toString();if(h.length>5){h=this.fixedTicks[B].toFixed(3).toString()}m=new JXG.Label(this.board,h,e,this.id+B+"Label");m.distanceX=0;m.distanceY=-10;m.setCoordinates(e);if(this.drawLabels){m.show=true}else{m.show=false}this.labels.push(m)}}}var u=JXG.Math.eps;var q=-this.line.getSlope();var t=this.majorHeight/2;var d=this.minorHeight/2;var E=0;var a=0;var v=0;var z=0;if(Math.abs(q)<u){E=0;a=t;v=0;z=d}else{if((Math.abs(q)>1/u)||(isNaN(q))){E=t;a=0;v=d;z=0}else{E=t/Math.sqrt(1/(q*q)+1);a=-E/q;v=d/Math.sqrt(1/(q*q)+1);z=-v/q}}this.board.renderer.updateTicks(this,E,a,v,z)};JXG.Ticks.prototype.updateRenderer=function(){if(this.needsUpdate){this.calculateTicksCoordinates();this.needsUpdate=false}};JXG.createTicks=function(d,b,a){var c;if((b[0].elementClass==JXG.OBJECT_CLASS_LINE)&&(JXG.IsFunction(b[1])||JXG.IsArray(b[1])||JXG.IsNumber(b[1]))){c=new JXG.Ticks(b[0],b[1],a.minorTicks,a.majHeight,a.minHeight,a.id,a.name)}else{throw ("Can't create Ticks with parent types '"+(typeof b[0])+"' and '"+(typeof b[1])+"' and '"+(typeof b[2])+"'.")}return c};JXG.JSXGraph.registerElement("ticks",JXG.createTicks);JXG.SVGRenderer=function(a){this.constructor();this.svgRoot=null;this.suspendHandle=null;this.svgNamespace="http://www.w3.org/2000/svg";this.xlinkNamespace="http://www.w3.org/1999/xlink";this.container=a;this.container.style.MozUserSelect="none";this.container.style.overflow="hidden";if(this.container.style.position==""){this.container.style.position="relative"}this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg");this.container.appendChild(this.svgRoot);this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs");this.svgRoot.appendChild(this.defs);this.images=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.images);this.grid=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.grid);this.angles=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.angles);this.sectors=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.sectors);this.polygone=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.polygone);this.curves=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.curves);this.circles=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.circles);this.lines=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.lines);this.arcs=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.arcs);this.points=this.container.ownerDocument.createElementNS(this.svgNamespace,"g");this.svgRoot.appendChild(this.points);this.dashArray=["2, 2","5, 5","10, 10","20, 20","20, 10, 10, 10","20, 5, 10, 5"]};JXG.SVGRenderer.prototype=new JXG.AbstractRenderer;JXG.SVGRenderer.prototype.displayCopyright=function(c,d){var b=this.createPrimitive("text","licenseText");b.setAttributeNS(null,"x","20");b.setAttributeNS(null,"y",2+d);b.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+d+"px; fill:#356AA0;  opacity:0.3;");var a=document.createTextNode(c);b.appendChild(a);this.appendChildPrimitive(b,"images")};JXG.SVGRenderer.prototype.drawTicks=function(a){var b=this.createPrimitive("path",a.id);this.appendChildPrimitive(b,"lines");a.rendNode=b};JXG.SVGRenderer.prototype.updateTicks=function(d,e,a,g,b){var f="";for(var h=0;h<d.ticks.length;h++){var j=d.ticks[h];if(j.major){if(d.labels[h].show){this.drawLabel(d.labels[h])}f+="M "+(j.scrCoords[1]+e)+" "+(j.scrCoords[2]-a)+" L "+(j.scrCoords[1]-e)+" "+(j.scrCoords[2]+a)+" "}else{f+="M "+(j.scrCoords[1]+g)+" "+(j.scrCoords[2]-b)+" L "+(j.scrCoords[1]-g)+" "+(j.scrCoords[2]+b)+" "}}var k=document.getElementById(d.id);if(k==null){k=this.createPrimitive("path",d.id);this.appendChildPrimitive(k,"lines")}k.setAttributeNS(null,"stroke",d.visProp.strokeColor);k.setAttributeNS(null,"stroke-opacity",d.visProp.strokeOpacity);k.setAttributeNS(null,"stroke-width",d.visProp.strokeWidth);this.updatePathPrimitive(k,f,d.board)};JXG.SVGRenderer.prototype.drawArc=function(b){var c=this.createPrimitive("path",b.id);b.rendNode=c;var g=b.getRadius();var d=b.board.algebra.trueAngle(b.point2,b.midpoint,b.point3);var a={};a.midpoint=b.midpoint;a.getRadius=function(){return g};var h=b.board.algebra.projectPointToCircle(b.point3,a);var e="M "+b.point2.coords.scrCoords[1]+" "+b.point2.coords.scrCoords[2]+" A ";e+=Math.round(g*b.board.unitX*b.board.zoomX)+" "+Math.round(g*b.board.unitY*b.board.zoomY)+" 0 ";if(d>=180){e+="1 "}else{e+="0 "}e+="0 ";e+=h.scrCoords[1]+" "+h.scrCoords[2];this.updatePathPrimitive(c,e,b.board);this.setStrokeProp(c,b.visProp);c.setAttributeNS(null,"fill","none");this.setDashStyle(c,b.visProp);var m;var k;if(b.visProp.firstArrow){var m=this.createArrowHead(b,"Start");this.defs.appendChild(m);b.rendNodeTriangleStart=m;c.setAttributeNS(null,"marker-end","url(#"+b.id+"TriangleStart)")}if(b.visProp.lastArrow){var m=this.createArrowHead(b,"End");this.defs.appendChild(m);b.rendNodeTriangleEnd=m;c.setAttributeNS(null,"marker-start","url(#"+b.id+"TriangleEnd)")}var j=this.createPrimitive("path",b.id+"_fill");var f="M "+b.midpoint.coords.scrCoords[1]+" "+b.midpoint.coords.scrCoords[2];f+=" L "+b.point2.coords.scrCoords[1]+" "+b.point2.coords.scrCoords[2]+" A ";f+=Math.round(g*b.board.unitX*b.board.zoomX)+" "+Math.round(g*b.board.unitY*b.board.zoomY)+" 0 ";if(d>=180){f+="1 "}else{f+="0 "}f+="0 ";f+=h.scrCoords[1]+" "+h.scrCoords[2];f+=" L "+b.midpoint.coords.scrCoords[1]+" "+b.midpoint.coords.scrCoords[2]+" z";this.updatePathPrimitive(j,f,b.board);this.setFillProp(j,b.visProp);j.setAttributeNS(null,"stroke","none");this.arcs.appendChild(c);this.sectors.appendChild(j);b.rendNodeFill=j;this.setDraft(b);if(!b.visProp.visible){b.hideElement()}};JXG.SVGRenderer.prototype.drawAngle=function(e){var h=e.board.algebra.trueAngle(e.point1,e.point2,e.point3);var g={};g.midpoint=e.point2;g.getRadius=function(){return e.radius};var d=e.board.algebra.projectPointToCircle(e.point1,g);var b=e.board.algebra.projectPointToCircle(e.point3,g);var f=this.createPrimitive("path",e.id+"_1");var c="M "+e.point2.coords.scrCoords[1]+" "+e.point2.coords.scrCoords[2];c+=" L "+d.scrCoords[1]+" "+d.scrCoords[2]+" A ";c+=Math.round(e.radius*e.board.unitX*e.board.zoomX)+" "+Math.round(e.radius*e.board.unitY*e.board.zoomY)+" 0 ";if(h>=180){c+="1 "}else{c+="0 "}c+="0 ";c+=b.scrCoords[1]+" "+b.scrCoords[2];c+=" L "+e.point2.coords.scrCoords[1]+" "+e.point2.coords.scrCoords[2]+" z";f.setAttributeNS(null,"d",c);f.setAttributeNS(null,"fill",e.visProp.fillColor);f.setAttributeNS(null,"fill-opacity",e.visProp.fillOpacity);f.setAttributeNS(null,"stroke","none");var a=this.createPrimitive("path",e.id+"_2");var c="M "+d.scrCoords[1]+" "+d.scrCoords[2]+" A ";c+=Math.round(e.radius*e.board.unitX*e.board.zoomX)+" "+Math.round(e.radius*e.board.unitY*e.board.zoomY)+" 0 ";if(h>=180){c+="1 "}else{c+="0 "}c+="0 ";c+=b.scrCoords[1]+" "+b.scrCoords[2];a.setAttributeNS(null,"d",c);a.setAttributeNS(null,"id",e.id+"_2");a.setAttributeNS(null,"fill","none");a.setAttributeNS(null,"stroke",e.visProp.strokeColor);a.setAttributeNS(null,"stroke-opacity",e.visProp.strokeOpacity);this.appendChildPrimitive(f,"angles");e.rendNode1=f;this.appendChildPrimitive(a,"angles");e.rendNode2=a;this.setObjectStrokeWidth(e,e.visProp.strokeWidth)};JXG.SVGRenderer.prototype.updateAngle=function(a){this.remove(a.rendNode1);this.remove(a.rendNode2);this.drawAngle(a);if(!a.visProp.visible){a.hideElement()}return};JXG.SVGRenderer.prototype.drawImage=function(b){var a="data:image/png;base64,"+b.imageBase64String;var c=this.createPrimitive("image",b.id);c.setAttributeNS(this.xlinkNamespace,"xlink:href",a);this.appendChildPrimitive(c,b.displayLevel);b.rendNode=c;this.updateImage(b)};JXG.SVGRenderer.prototype.transformImage=function(b,a){var c=b.rendNode;var d=c.getAttributeNS(null,"transform");d+=" "+this.joinTransforms(b,a);c.setAttributeNS(null,"transform",d)};JXG.SVGRenderer.prototype.joinTransforms=function(d,b){var e="";for(var a=0;a<b.length;a++){var c=b[a].matrix[1][1]+","+b[a].matrix[2][1]+","+b[a].matrix[1][2]+","+b[a].matrix[2][2]+","+b[a].matrix[1][0]+","+b[a].matrix[2][0];e+="matrix("+c+") "}return e};JXG.SVGRenderer.prototype.transformImageParent=function(c,a){if(a!=null){var b=a[1][1]+","+a[2][1]+","+a[1][2]+","+a[2][2]+","+a[1][0]+","+a[2][0];var d="matrix("+b+")"}else{var d=""}c.rendNode.setAttributeNS(null,"transform",d)};JXG.SVGRenderer.prototype.removeGrid=function(a){a.hasGrid=false;var b=this.grid;while(b.childNodes.length>0){b.removeChild(b.firstChild)}};JXG.SVGRenderer.prototype.setObjectDash=function(a){if(a.elementClass!=JXG.OBJECT_CLASS_POINT){var b;if(a.type==JXG.OBJECT_TYPE_ANGLE){b=a.rendNode2}else{b=a.rendNode}if(a.visProp.dash>0){var c=a.visProp.dash;b.setAttributeNS(null,"stroke-dasharray",this.dashArray[c-1])}else{if(b.hasAttributeNS(null,"stroke-dasharray")){b.removeAttributeNS(null,"stroke-dasharray")}}}};JXG.SVGRenderer.prototype.setObjectStrokeColor=function(d,a,b){if(b==undefined){b=1}var g,f;if(typeof b=="function"){f=b()}else{f=b}f=(f>0)?f:0;if(typeof a=="function"){g=a()}else{g=a}if(d.elementClass!=JXG.OBJECT_CLASS_POINT){var e=d.rendNode;if(d.type==JXG.OBJECT_TYPE_TEXT){e.style.color=g}else{if(d.type==JXG.OBJECT_TYPE_ANGLE){e=d.rendNode2;e.setAttributeNS(null,"stroke",g);e.setAttributeNS(null,"stroke-opacity",f)}else{e.setAttributeNS(null,"stroke",g);e.setAttributeNS(null,"stroke-opacity",f)}}if(d.type==JXG.OBJECT_TYPE_ARROW){d.rendNodeTriangle.setAttributeNS(null,"stroke",g);d.rendNodeTriangle.setAttributeNS(null,"stroke-opacity",f);d.rendNodeTriangle.setAttributeNS(null,"fill",g);d.rendNodeTriangle.setAttributeNS(null,"fill-opacity",f)}if(d.type==JXG.OBJECT_TYPE_ARC){if(d.visProp.firstArrow){d.rendNodeTriangleStart.setAttributeNS(null,"stroke",g);d.rendNodeTriangleStart.setAttributeNS(null,"stroke-opacity",f);d.rendNodeTriangleStart.setAttributeNS(null,"fill",g);d.rendNodeTriangleStart.setAttributeNS(null,"fill-opacity",f)}if(d.visProp.lastArrow){d.rendNodeTriangleEnd.setAttributeNS(null,"stroke",g);d.rendNodeTriangleEnd.setAttributeNS(null,"stroke-opacity",f);d.rendNodeTriangleEnd.setAttributeNS(null,"fill",g);d.rendNodeTriangleEnd.setAttributeNS(null,"fill-opacity",f)}}else{if(d.type==JXG.OBJECT_TYPE_LINE){if(d.visProp.firstArrow){d.rendNodeTriangleStart.setAttributeNS(null,"stroke",g);d.rendNodeTriangleStart.setAttributeNS(null,"stroke-opacity",f);d.rendNodeTriangleStart.setAttributeNS(null,"fill",g);d.rendNodeTriangleStart.setAttributeNS(null,"fill-opacity",f)}if(d.visProp.lastArrow){d.rendNodeTriangleEnd.setAttributeNS(null,"stroke",g);d.rendNodeTriangleEnd.setAttributeNS(null,"stroke-opacity",f);d.rendNodeTriangleEnd.setAttributeNS(null,"fill",g);d.rendNodeTriangleEnd.setAttributeNS(null,"fill-opacity",f)}}}}else{if(d.visProp.style>=3&&d.visProp.style<=9){var e=d.rendNode;e.setAttributeNS(null,"stroke",g);e.setAttributeNS(null,"stroke-opacity",f)}else{var e=d.rendNodeX1;e.setAttributeNS(null,"stroke",g);e.setAttributeNS(null,"stroke-opacity",f);e=d.rendNodeX2;e.setAttributeNS(null,"stroke",g);e.setAttributeNS(null,"stroke-opacity",f)}}};JXG.SVGRenderer.prototype.setObjectFillColor=function(d,a,b){if(b==undefined){b=1}var g,f;if(typeof b=="function"){f=b()}else{f=b}f=(f>0)?f:0;if(typeof a=="function"){g=a()}else{g=a}if(d.elementClass!=JXG.OBJECT_CLASS_POINT){if(d.type==JXG.OBJECT_TYPE_ARC){var e=d.rendNodeFill;e.setAttributeNS(null,"fill",g);e.setAttributeNS(null,"fill-opacity",f)}else{if(d.type==JXG.OBJECT_TYPE_ANGLE){e=d.rendNode1;e.setAttributeNS(null,"fill",g);e.setAttributeNS(null,"fill-opacity",f)}else{var e=d.rendNode;e.setAttributeNS(null,"fill",g);e.setAttributeNS(null,"fill-opacity",f)}}}else{if(d.visProp.style>=3&&d.visProp.style<=9){var e=d.rendNode;e.setAttributeNS(null,"fill",g);e.setAttributeNS(null,"fill-opacity",f)}else{var e=d.rendNodeX1;e.setAttributeNS(null,"fill",g);e.setAttributeNS(null,"fill-opacity",f);e=d.rendNodeX2;e.setAttributeNS(null,"fill",g);e.setAttributeNS(null,"fill-opacity",f)}}};JXG.SVGRenderer.prototype.hide=function(a){if(JXG.IsPoint(a)){if(a.visProp.style>=3&&a.visProp.style<=9){var b=a.rendNode;b.setAttributeNS(null,"display","none");b.style.visibility="hidden"}else{var b=a.rendNodeX1;b.setAttributeNS(null,"display","none");b.style.visibility="hidden";b=a.rendNodeX2;b.setAttributeNS(null,"display","none");b.style.visibility="hidden"}}else{if(a.type==JXG.OBJECT_TYPE_ARC){var b=a.rendNode;b.setAttributeNS(null,"display","none");b.style.visibility="hidden";b=a.rendNodeFill;b.setAttributeNS(null,"display","none");b.style.visibility="hidden"}else{if(a.type==JXG.OBJECT_TYPE_ANGLE){var b=a.rendNode1;b.setAttributeNS(null,"display","none");b.style.visibility="hidden";b=a.rendNode2;b.setAttributeNS(null,"display","none");b.style.visibility="hidden"}else{var b=a.rendNode;b.setAttributeNS(null,"display","none");b.style.visibility="hidden"}}}};JXG.SVGRenderer.prototype.show=function(a){if(JXG.IsPoint(a)){if(a.visProp.style>=3&&a.visProp.style<=9){var b=a.rendNode;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit"}else{var b=a.rendNodeX1;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit";b=a.rendNodeX2;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit"}}else{if(a.type==JXG.OBJECT_TYPE_ARC){var b=a.rendNode;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit";b=a.rendNodeFill;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit"}else{if(a.type==JXG.OBJECT_TYPE_ANGLE){var b=a.rendNode1;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit";b=a.rendNode2;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit"}else{var b=a.rendNode;b.setAttributeNS(null,"display","inline");b.style.visibility="inherit"}}}};JXG.SVGRenderer.prototype.remove=function(a){if(a!=null&&a.parentNode!=null){a.parentNode.removeChild(a)}};JXG.SVGRenderer.prototype.suspendRedraw=function(){if(true){this.suspendHandle=this.svgRoot.suspendRedraw(10000)}};JXG.SVGRenderer.prototype.unsuspendRedraw=function(){if(true){this.svgRoot.unsuspendRedraw(this.suspendHandle);this.svgRoot.forceRedraw()}};JXG.SVGRenderer.prototype.setStrokeProp=function(b,a){if(a.strokeColor!=null){b.setAttributeNS(null,"stroke",a.strokeColor)}if(a.strokeOpacity!=null){b.setAttributeNS(null,"stroke-opacity",a.strokeOpacity)}if(a.strokeWidth!=null){b.setAttributeNS(null,"stroke-width",a.strokeWidth)}};JXG.SVGRenderer.prototype.setFillProp=function(b,a){if(a.fillColor!=null){b.setAttributeNS(null,"fill",a.fillColor)}if(a.fillOpacity!=null){b.setAttributeNS(null,"fill-opacity",a.fillOpacity)}};JXG.SVGRenderer.prototype.setDashStyle=function(b,a){if(a.dash>0){var c=a.dash;b.setAttributeNS(null,"stroke-dasharray",this.dashArray[c-1])}};JXG.SVGRenderer.prototype.createPrimitive=function(a,c){var b=this.container.ownerDocument.createElementNS(this.svgNamespace,a);b.setAttributeNS(null,"id",c);b.style.position="absolute";return b};JXG.SVGRenderer.prototype.createArrowHead=function(c,e){var d=c.id+"Triangle";if(e!=null){d+=e}var b=this.createPrimitive("marker",d);b.setAttributeNS(null,"viewBox","0 0 10 6");b.setAttributeNS(null,"refY","3");b.setAttributeNS(null,"markerUnits","strokeWidth");b.setAttributeNS(null,"markerHeight","6");b.setAttributeNS(null,"markerWidth","6");b.setAttributeNS(null,"orient","auto");b.setAttributeNS(null,"stroke",c.visProp.strokeColor);b.setAttributeNS(null,"stroke-opacity",c.visProp.strokeOpacity);b.setAttributeNS(null,"fill",c.visProp.strokeColor);b.setAttributeNS(null,"fill-opacity",c.visProp.strokeOpacity);var a=this.container.ownerDocument.createElementNS(this.svgNamespace,"path");if(e=="End"){b.setAttributeNS(null,"refX","0");a.setAttributeNS(null,"d","M 0 3 L 10 6 L 10 0 z")}else{b.setAttributeNS(null,"refX","10");a.setAttributeNS(null,"d","M 0 0 L 10 3 L 0 6 z")}b.appendChild(a);return b};JXG.SVGRenderer.prototype.makeArrow=function(c,b,d){var a=this.createArrowHead(b,d);this.defs.appendChild(a);c.setAttributeNS(null,"marker-end","url(#"+b.id+"Triangle)");b.rendNodeTriangle=a};JXG.SVGRenderer.prototype.makeArrows=function(b){if(b.visProp.firstArrow){var a=b.rendNodeTriangleStart;if(a==null){a=this.createArrowHead(b,"End");this.defs.appendChild(a);b.rendNodeTriangleStart=a;b.rendNode.setAttributeNS(null,"marker-start","url(#"+b.id+"TriangleEnd)")}}else{var a=b.rendNodeTriangleStart;if(a!=null){this.remove(a)}}if(b.visProp.lastArrow){var a=b.rendNodeTriangleEnd;if(a==null){a=this.createArrowHead(b,"Start");this.defs.appendChild(a);b.rendNodeTriangleEnd=a;b.rendNode.setAttributeNS(null,"marker-end","url(#"+b.id+"TriangleStart)")}}else{var a=b.rendNodeTriangleEnd;if(a!=null){this.remove(a)}}};JXG.SVGRenderer.prototype.updateLinePrimitive=function(e,b,a,d,c){e.setAttributeNS(null,"x1",b);e.setAttributeNS(null,"y1",a);e.setAttributeNS(null,"x2",d);e.setAttributeNS(null,"y2",c)};JXG.SVGRenderer.prototype.updateCirclePrimitive=function(c,a,d,b){c.setAttributeNS(null,"cx",(a));c.setAttributeNS(null,"cy",(d));c.setAttributeNS(null,"r",(b))};JXG.SVGRenderer.prototype.updateEllipsePrimitive=function(b,a,e,d,c){b.setAttributeNS(null,"cx",(a));b.setAttributeNS(null,"cy",(e));b.setAttributeNS(null,"rx",(d));b.setAttributeNS(null,"ry",(c))};JXG.SVGRenderer.prototype.updateRectPrimitive=function(d,a,e,b,c){d.setAttributeNS(null,"x",(a));d.setAttributeNS(null,"y",(e));d.setAttributeNS(null,"width",(b));d.setAttributeNS(null,"height",(c))};JXG.SVGRenderer.prototype.updatePathPrimitive=function(b,c,a){b.setAttributeNS(null,"d",c);b.setAttributeNS(null,"stroke-linecap","round");b.setAttributeNS(null,"stroke-linejoin","round")};JXG.SVGRenderer.prototype.updatePathStringPrimitive=function(d){if(d.numberPoints<=0){return""}var g=" M ";var f="";var c=100*d.board.canvasHeight;var a=100*d.board.canvasWidth;for(var b=0;b<d.numberPoints;b++){var e=d.points[b].scrCoords;if(isNaN(e[1])||isNaN(e[2])||Math.abs(e[1])>a||Math.abs(e[2])>c){g=" M "}else{f+=g+e[1]+" "+e[2];g=" L "}}return f};JXG.SVGRenderer.prototype.updatePolygonePrimitive=function(d,b){d.setAttributeNS(null,"stroke","none");var e="";for(var a=0;a<b.vertices.length-1;a++){var c=b.vertices[a].coords.scrCoords;e=e+c[1]+","+c[2];if(a<b.vertices.length-2){e+=" "}}d.setAttributeNS(null,"points",e)};JXG.SVGRenderer.prototype.appendChildPrimitive=function(a,b){switch(b){case"images":this.images.appendChild(a);break;case"grid":this.grid.appendChild(a);break;case"angles":this.angles.appendChild(a);break;case"sectors":this.sectors.appendChild(a);break;case"polygone":this.polygone.appendChild(a);break;case"curves":this.lines.appendChild(a);break;case"circles":this.lines.appendChild(a);break;case"lines":this.lines.appendChild(a);break;case"arcs":this.arcs.appendChild(a);break;case"points":this.points.appendChild(a);break}};JXG.SVGRenderer.prototype.setPropertyPrimitive=function(b,a,c){if(a=="stroked"){return}b.setAttributeNS(null,a,c)};JXG.VMLRenderer=function(a){this.constructor();this.container=a;this.container.style.overflow="hidden";this.container.onselectstart=function(){return false};a.ownerDocument.namespaces.add("v","urn:schemas-microsoft-com:vml");a.ownerDocument.createStyleSheet().addRule("v\\:*","behavior: url(#default#VML);");this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]};JXG.VMLRenderer.prototype=new JXG.AbstractRenderer;JXG.VMLRenderer.prototype.displayCopyright=function(c,d){var b=this.createPrimitive("textbox","licenseText");b.style.left=20;b.style.top=(2);b.style.fontSize=(d);b.style.color="#356AA0";b.style.fontFamily="Arial,Helvetica,sans-serif";b.setAttribute("opacity","30%");b.style.filter="alpha(opacity = 30)";var a=document.createTextNode(c);b.appendChild(a);this.appendChildPrimitive(b,"images")};JXG.VMLRenderer.prototype.drawTicks=function(a){var b=this.createPrimitive("path",a.id+"_ticks");this.appendChildPrimitive(b,"lines");a.rendNode=b};JXG.VMLRenderer.prototype.updateTicks=function(e,f,a,g,d){var b=[];for(var h=0;h<e.ticks.length;h++){var j=e.ticks[h];if(j.major){if(e.labels[h].show){this.drawLabel(e.labels[h])}b.push(" m "+Math.round(j.scrCoords[1]+f)+", "+Math.round(j.scrCoords[2]-a)+" l "+Math.round(j.scrCoords[1]-f)+", "+Math.round(j.scrCoords[2]+a)+" ")}else{b.push(" m "+Math.round(j.scrCoords[1]+g)+", "+Math.round(j.scrCoords[2]-d)+" l "+Math.round(j.scrCoords[1]-g)+", "+Math.round(j.scrCoords[2]+d)+" ")}}var k=document.getElementById(e.id+"_ticks");if(k==null){k=this.createPrimitive("path",e.id+"_ticks");this.appendChildPrimitive(k,"lines")}k.setAttribute("stroked","true");k.setAttribute("strokecolor",e.visProp.strokeColor,1);k.setAttribute("strokeweight",e.visProp.strokeWidth);this.updatePathPrimitive(k,b,e.board)};JXG.VMLRenderer.prototype.drawArc=function(b){var j=b.getRadius();var a={};a.coords=new JXG.Coords(JXG.COORDS_BY_USER,[b.midpoint.coords.usrCoords[1],b.board.origin.scrCoords[2]/(b.board.unitY*b.board.zoomY)],b.board);var g=b.board.algebra.trueAngle(b.point2,b.midpoint,a);var h=b.board.algebra.trueAngle(b.point3,b.midpoint,a);if(g<h){h-=360}var d=this.createPrimitive("arc",b.id);d.setAttribute("filled","false");this.setStrokeProp(d,b.visProp);d.style.left=(b.midpoint.coords.scrCoords[1]-Math.round(j*b.board.unitX*b.board.zoomX))+"px";d.style.top=(b.midpoint.coords.scrCoords[2]-Math.round(j*b.board.unitY*b.board.zoomY))+"px";d.style.width=(Math.round(j*b.board.unitX*b.board.zoomX)*2)+"px";d.style.height=(Math.round(j*b.board.unitY*b.board.zoomY)*2)+"px";d.setAttribute("startangle",h);d.setAttribute("endangle",g);var c=this.container.ownerDocument.createElement("v:stroke");if(b.visProp.lastArrow){c.setAttribute("endarrow","block");c.setAttribute("endarrowlength","long")}if(b.visProp.firstArrow){c.setAttribute("startarrow","block");c.setAttribute("startarrowlength","long")}c.setAttribute("id",b.id+"stroke");var f=b.visProp.dash;c.setAttribute("dashstyle",this.dashArray[f]);d.appendChild(c);var r=this.createPrimitive("shape",b.id+"_fill");if(b.visProp.fillColor=="none"){r.setAttribute("filled","false")}else{r.setAttribute("filled","true");r.setAttribute("fillcolor",b.visProp.fillColor)}r.setAttribute("stroked","false");var q=Math.round(j*b.board.unitX*b.board.zoomX);var n=Math.round(j*b.board.unitY*b.board.zoomY);r.style.width=q;r.style.height=n;r.setAttribute("coordsize",q+","+n);var m=this.container.ownerDocument.createElement("v:path");m.setAttribute("id",b.id+"path");var o=b.board.algebra.projectPointToCircle(b.point3,b);var e="m "+b.midpoint.coords.scrCoords[1]+","+b.midpoint.coords.scrCoords[2]+" l ";e+=b.point2.coords.scrCoords[1]+","+b.point2.coords.scrCoords[2]+" at ";e+=(b.midpoint.coords.scrCoords[1]-q)+","+(b.midpoint.coords.scrCoords[2]-n)+",";e+=(b.midpoint.coords.scrCoords[1]+q)+","+(b.midpoint.coords.scrCoords[2]+n);e+=" "+b.point2.coords.scrCoords[1]+","+b.point2.coords.scrCoords[2];e+=", "+o.scrCoords[1]+","+o.scrCoords[2]+" l ";e+=b.midpoint.coords.scrCoords[1]+","+b.midpoint.coords.scrCoords[2]+" x e";m.setAttribute("v",e);r.appendChild(m);var k=this.container.ownerDocument.createElement("v:fill");k.setAttribute("id",b.id+"_fillnode");k.setAttribute("opacity",(b.visProp.fillOpacity*100)+"%");r.appendChild(k);this.appendChildPrimitive(d,"lines");this.appendChildPrimitive(r,"angles");b.rendNode=d;b.rendNodeFill=r;if(b.visProp.draft){this.setDraft(b)}};JXG.VMLRenderer.prototype.drawAngle=function(c){var d=this.container.ownerDocument.createElement("v:shape");d.style.position="absolute";d.setAttribute("filled","true");d.setAttribute("fillcolor",c.visProp.fillColor);d.setAttribute("stroked","false");d.style.zIndex="2";d.setAttribute("id",c.id+"_1");var m=Math.round(c.radius*c.board.unitX*c.board.zoomX);var k=Math.round(c.radius*c.board.unitY*c.board.zoomY);d.style.width=m;d.style.height=k;d.setAttribute("coordsize",m+","+k);var a={};a.midpoint=c.point2;a.getRadius=function(){return c.radius};var q=c.board.algebra.projectPointToCircle(c.point1,a);var o=c.board.algebra.projectPointToCircle(c.point3,a);var j=this.container.ownerDocument.createElement("v:path");j.setAttribute("id",c.id+"_path");var e="m "+c.point2.coords.scrCoords[1]+","+c.point2.coords.scrCoords[2]+" l ";e+=q.scrCoords[1]+","+q.scrCoords[2]+" at ";e+=(c.point2.coords.scrCoords[1]-m)+","+(c.point2.coords.scrCoords[2]-k)+",";e+=(c.point2.coords.scrCoords[1]+m)+","+(c.point2.coords.scrCoords[2]+k);e+=" "+q.scrCoords[1]+","+q.scrCoords[2];e+=", "+o.scrCoords[1]+","+o.scrCoords[2]+" l ";e+=c.point2.coords.scrCoords[1]+","+c.point2.coords.scrCoords[2]+" x e";j.setAttribute("v",e);d.appendChild(j);var h=this.container.ownerDocument.createElement("v:fill");h.setAttribute("opacity",c.visProp.fillOpacity*10+"%");h.setAttribute("id",c.id+"_fillnode");d.appendChild(h);var b={};b.coords=new JXG.Coords(JXG.COORDS_BY_USER,[c.point2.coords.usrCoords[1],c.board.origin.scrCoords[2]/(c.board.unitY*c.board.zoomY)],c.board);var f=c.board.algebra.trueAngle(c.point1,c.point2,b);var g=c.board.algebra.trueAngle(c.point3,c.point2,b);if(f<g){g-=360}var n=this.container.ownerDocument.createElement("v:arc");n.style.position="absolute";n.style.left=(c.point2.coords.scrCoords[1]-Math.round(c.radius*c.board.unitX*c.board.zoomX))+"px";n.style.top=(c.point2.coords.scrCoords[2]-Math.round(c.radius*c.board.unitY*c.board.zoomY))+"px";n.style.width=(Math.round(c.radius*c.board.unitX*c.board.zoomX)*2)+"px";n.style.height=(Math.round(c.radius*c.board.unitY*c.board.zoomY)*2)+"px";n.setAttribute("startangle",g);n.setAttribute("endangle",f);n.setAttribute("stroked","true");n.setAttribute("strokecolor",c.visProp.strokeColor);n.setAttribute("strokeweight",c.visProp.strokeWidth);n.setAttribute("filled","false");n.style.zIndex="4";n.setAttribute("id",c.id+"_2");this.container.appendChild(d);this.container.appendChild(n);c.rendNode1=d;c.rendNode2=n;if(!c.visProp.visible){c.hideElement(c)}};JXG.VMLRenderer.prototype.updateAngle=function(a){this.remove(a.rendNode1);this.remove(a.rendNode2);this.drawAngle(a);return};JXG.VMLRenderer.prototype.drawImage=function(b){var a="data:image/png;base64,"+b.imageBase64String;var c=this.container.ownerDocument.createElement("img");c.style.position="absolute";c.setAttribute("id",b.id);c.setAttribute("src",a);this.container.appendChild(c);this.appendChildPrimitive(c,b.displayLevel);c.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand')";b.rendNode=c;this.updateImage(b)};JXG.VMLRenderer.prototype.transformImage=function(c,b){var d=c.rendNode;var a=this.joinTransforms(c,b);d.style.left=(c.coords.scrCoords[1]+a[1][0])+"px";d.style.top=(c.coords.scrCoords[2]-c.size[1]+a[2][0])+"px";d.filters.item(0).M11=a[1][1];d.filters.item(0).M12=a[1][2];d.filters.item(0).M21=a[2][1];d.filters.item(0).M22=a[2][2]};JXG.VMLRenderer.prototype.joinTransforms=function(d,c){var a=[[1,0,0],[0,1,0],[0,0,1]];for(var b=0;b<c.length;b++){a=d.board.algebra.matMatMult(c[b].matrix,a)}return a};JXG.VMLRenderer.prototype.transformImageParent=function(b,a){};JXG.VMLRenderer.prototype.removeGrid=function(b){b.hasGrid=false;for(var a=0;a<=this.gridXsize;a++){var d=document.getElementById("gridx"+a);while(d.childNodes.length>0){d.removeChild(d.firstChild)}d.remove()}for(var a=0;a<=this.gridYsize;a++){var d=document.getElementById("gridy"+a);while(d.childNodes.length>0){d.removeChild(d.firstChild)}d.remove()}};JXG.VMLRenderer.prototype.hide=function(a){if(!JXG.IsPoint(a)){if(a.type!=JXG.OBJECT_TYPE_ANGLE){var b=a.rendNode;b.style.visibility="hidden";if(a.type==JXG.OBJECT_TYPE_ARC){b=a.rendNodeFill;b.style.visibility="hidden"}}else{var b=a.rendNode1;b.style.visibility="hidden";b=a.rendNode2;b.style.visibility="hidden"}}else{if(a.visProp.style>=3&&a.visProp.style<=9){var b=a.rendNode;b.style.visibility="hidden"}else{var b=a.rendNodeX1;b.style.visibility="hidden";var b=a.rendNodeX2;b.style.visibility="hidden"}}};JXG.VMLRenderer.prototype.show=function(a){if(!JXG.IsPoint(a)){if(a.type!=JXG.OBJECT_TYPE_ANGLE){var b=a.rendNode;b.style.visibility="inherit";if(a.type==JXG.OBJECT_TYPE_ARC){b=a.rendNodeFill;b.style.visibility="inherit"}}else{var b=a.rendNode1;b.style.visibility="inherit";b=a.rendNode2;b.style.visibility="inherit"}}else{if(a.visProp.style>=3&&a.visProp.style<=9){var b=a.rendNode;b.style.visibility="inherit"}else{var b=a.rendNodeX1;b.style.visibility="inherit";var b=a.rendNodeX2;b.style.visibility="inherit"}}};JXG.VMLRenderer.prototype.setObjectDash=function(b){if(b.elementClass!=JXG.OBJECT_CLASS_POINT){if(b.type==JXG.OBJECT_TYPE_ANGLE){var c=b.rendNode2;var a=b.visProp.dash;c.setAttribute("dashstyle",this.dashArray[a])}else{var c=document.getElementById(b.id+"stroke");if(c){var a=b.visProp.dash;c.setAttribute("dashstyle",this.dashArray[a])}}}};JXG.VMLRenderer.prototype.setObjectStrokeColor=function(d,a,b){var g,f;if(typeof a=="function"){g=a()}else{g=a}if(d.elementClass!=JXG.OBJECT_CLASS_POINT){if(d.type==JXG.OBJECT_TYPE_ANGLE){var e=d.rendNode2;e.setAttribute("stroked","true");e.setAttribute("strokecolor",g)}else{if(d.type==JXG.OBJECT_TYPE_TEXT){d.rendNode.style.color=g}else{var e=d.rendNode;e.setAttribute("stroked","true");e.setAttribute("strokecolor",g)}}}else{if(d.visProp.style>=3&&d.visProp.style<=9){var e=d.rendNode;e.setAttribute("stroked","true");e.setAttribute("strokecolor",g)}else{var e=d.rendNodeX1;e.setAttribute("stroked","true");e.setAttribute("strokecolor",g);var e=d.rendNodeX2;e.setAttribute("stroked","true");e.setAttribute("strokecolor",g)}}};JXG.VMLRenderer.prototype.setObjectFillColor=function(e,a,b){var f;var h,g;if(typeof b=="function"){g=b()}else{g=b}g=(g>0)?g:0;if(typeof a=="function"){h=a()}else{h=a}if(e.elementClass!=JXG.OBJECT_CLASS_POINT){if(e.type==JXG.OBJECT_TYPE_ARC){f=e.rendNodeFill;if(h=="none"){f.setAttribute("filled","false")}else{f.setAttribute("filled","true");f.setAttribute("fillcolor",h)}}else{if(e.type==JXG.OBJECT_TYPE_ANGLE){f=e.rendNode1;if(h=="none"){f.setAttribute("filled","false")}else{f.setAttribute("filled","true");f.setAttribute("fillcolor",h)}}else{f=e.rendNode;if(h=="none"){f.setAttribute("filled","false")}else{f.setAttribute("filled","true");f.setAttribute("fillcolor",h)}}}}else{if(e.visProp.style>=3&&e.visProp.style<=9){var f=e.rendNode;if(h=="none"){f.setAttribute("filled","false")}else{f.setAttribute("filled","true");f.setAttribute("fillcolor",h)}}else{var f=e.rendNodeX1;if(h=="none"){f.setAttribute("filled","false")}else{f.setAttribute("filled","true");f.setAttribute("fillcolor",h)}var f=e.rendNodeX2;if(h=="none"){f.setAttribute("filled","false")}else{f.setAttribute("filled","true");f.setAttribute("fillcolor",h)}}}if(e.type==JXG.OBJECT_TYPE_POLYGON||e.type==JXG.OBJECT_TYPE_CIRCLE||e.type==JXG.OBJECT_TYPE_ARC||e.type==JXG.OBJECT_TYPE_ANGLE||e.type==JXG.OBJECT_TYPE_CURVE){var d=document.getElementById(e.id+"_fillnode");if(g!=undefined){d.setAttribute("opacity",(g*100)+"%")}}};JXG.VMLRenderer.prototype.remove=function(a){a.removeNode(true)};JXG.VMLRenderer.prototype.suspendRedraw=function(){this.container.style.display="none"};JXG.VMLRenderer.prototype.unsuspendRedraw=function(){this.container.style.display=""};JXG.VMLRenderer.prototype.setStrokeProp=function(c,a){if(a.strokeColor=="none"){c.setAttribute("stroked","false")}else{c.setAttribute("stroked","true");var b=["strokeColor","strokeWidth"];var d=["strokecolor","strokeweight"];this.setAttributes(c,b,d,a)}};JXG.VMLRenderer.prototype.setFillProp=function(c,b){if(b.fillColor==null||b.fillColor=="none"){c.setAttribute("filled","false")}else{c.setAttribute("filled","true");c.setAttribute("fillcolor",b.fillColor)}var a=this.container.ownerDocument.createElement("v:fill");a.setAttribute("id",c.id+"_fillnode");a.setAttribute("opacity",(b.fillOpacity*100)+"%");c.appendChild(a)};JXG.VMLRenderer.prototype.setAttributes=function(d,c,g,b){var f;for(var a=0;a<c.length;a++){var e=c[a];if(b[e]!=null){if(typeof b[e]=="function"){f=b[e]();f=(f>0)?f:0}else{f=b[e]}d.setAttribute(g[a],f)}}};JXG.VMLRenderer.prototype.setDashStyle=function(c,b){if(b.dash>=0){var a=this.container.ownerDocument.createElement("v:stroke");a.setAttribute("id",c.id+"stroke");a.setAttribute("dashstyle",this.dashArray[b.dash]);c.appendChild(a)}};JXG.VMLRenderer.prototype.createPrimitive=function(a,c){var b;if(a=="circle"||a=="ellipse"){b=this.container.ownerDocument.createElement("v:oval")}else{if(a=="polygon"){b=this.container.ownerDocument.createElement("v:shape")}else{if(a=="path"){b=this.container.ownerDocument.createElement("v:shape")}else{b=this.container.ownerDocument.createElement("v:"+a)}}}b.style.position="absolute";b.setAttribute("id",c);return b};JXG.VMLRenderer.prototype.makeArrow=function(c,b,d){var a=this.container.ownerDocument.createElement("v:stroke");a.setAttribute("endarrow","block");a.setAttribute("endarrowlength","long");c.appendChild(a)};JXG.VMLRenderer.prototype.makeArrows=function(b){if(b.visProp.firstArrow){var a=b.rendNodeStroke;if(a==null){a=this.container.ownerDocument.createElement("v:stroke");a.setAttribute("id",b.id+"stroke");a.setAttribute("startarrow","block");a.setAttribute("startarrowlength","long");b.rendNode.appendChild(a);b.rendNodeStroke=a}}else{var a=b.rendNodeStroke;if(a!=null){a.setAttribute("startarrow","none")}}if(b.visProp.lastArrow){var a=b.rendNodeStroke;if(a==null){a=this.container.ownerDocument.createElement("v:stroke");b.rendNode.appendChild(a);b.rendNodeStroke=a}a.setAttribute("id",b.id+"stroke");a.setAttribute("endarrow","block");a.setAttribute("endarrowlength","long")}else{var a=b.rendNodeStroke;if(a!=null){a.setAttribute("endarrow","none")}}};JXG.VMLRenderer.prototype.updateLinePrimitive=function(e,b,a,d,c){e.setAttribute("from",[b,a].join(","));e.setAttribute("to",[d,c].join(","))};JXG.VMLRenderer.prototype.updateCirclePrimitive=function(c,a,d,b){c.style.left=(a-b)+"px";c.style.top=(d-b)+"px";c.style.width=(b*2)+"px";c.style.height=(b*2)+"px"};JXG.VMLRenderer.prototype.updateRectPrimitive=function(d,a,e,b,c){d.style.left=(a)+"px";d.style.top=(e)+"px";d.style.width=(b)+"px";d.style.height=(c)+"px"};JXG.VMLRenderer.prototype.updateEllipsePrimitive=function(b,a,e,d,c){b.style.left=(a-d)+"px";b.style.top=(e-c)+"px";b.style.width=(d*2)+"px";b.style.height=(c*2)+"px"};JXG.VMLRenderer.prototype.updatePathPrimitive=function(c,d,b){var a=b.canvasWidth;var e=b.canvasHeight;c.style.width=a;c.style.height=e;c.setAttribute("coordsize",a+","+e);c.setAttribute("path",d.join(""))};JXG.VMLRenderer.prototype.updatePathStringPrimitive=function(e){if(e.numberPoints<=0){return""}var j=" m ";var g=[];var d=100*e.board.canvasHeight;var b=100*e.board.canvasWidth;var a=Math.min(e.numberPoints,8192);for(var c=0;c<a;c++){var f=e.points[c].scrCoords;if(isNaN(f[1])||isNaN(f[2])||Math.abs(f[1])>b||Math.abs(f[2])>d){j=" m "}else{g.push(j+f[1]+", "+f[2]);j=" l "}}g.push(" e");return g};JXG.VMLRenderer.prototype.updatePolygonePrimitive=function(e,c){e.setAttribute("stroked","false");var f=c.vertices[0].coords.scrCoords[1];var b=c.vertices[0].coords.scrCoords[1];var d=c.vertices[0].coords.scrCoords[2];var a=c.vertices[0].coords.scrCoords[2];for(var g=1;g<c.vertices.length-1;g++){var m=c.vertices[g].coords.scrCoords;if(m[1]<f){f=m[1]}if(m[1]>b){b=m[1]}if(m[2]<d){d=m[2]}if(m[2]>a){a=m[2]}}var k=Math.round(b-f);var j=Math.round(a-d);e.style.width=k;e.style.height=j;e.setAttribute("coordsize",k+","+j);var h=[];h.push("m ");var m=c.vertices[0].coords.scrCoords;h.push(m[1]+","+m[2]);h.push(" l ");for(var g=1;g<c.vertices.length-1;g++){var m=c.vertices[g].coords.scrCoords;h.push(m[1]+","+m[2]);if(g<c.vertices.length-2){h.push(", ")}}h.push(" x e");e.setAttribute("path",h.join(""))};JXG.VMLRenderer.prototype.appendChildPrimitive=function(a,b){switch(b){case"images":a.style.zIndex="1";break;case"grid":a.style.zIndex="1";break;case"angles":a.style.zIndex="2";break;case"sectors":a.style.zIndex="2";break;case"polygone":a.style.zIndex="2";break;case"curves":a.style.zIndex="4";break;case"circles":a.style.zIndex="4";break;case"lines":a.style.zIndex="4";break;case"arcs":a.style.zIndex="4";break;case"points":a.style.zIndex="5";break}this.container.appendChild(a)};JXG.VMLRenderer.prototype.setPropertyPrimitive=function(e,d,f){var c="";switch(d){case"stroke":c="strokecolor";break;case"stroke-width":c="strokeweight";break;case"stroke-dasharray":c="dashstyle";break}if(d=="stroke-dasharray"){var a=this.container.ownerDocument.createElement("v:stroke");a.setAttribute("id",e.id+"stroke");a.setAttribute("dashstyle","Dash");e.appendChild(a)}else{if(c!=""){var b;if(typeof f=="function"){b=f()}else{b=f}e.setAttribute(c,b)}}};